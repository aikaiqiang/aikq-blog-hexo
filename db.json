{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/favicon.png","path":"favicon.png","modified":1,"renderable":0},{"_id":"themes/yilia/source/main.0cf68a.css","path":"main.0cf68a.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/slider.e37972.js","path":"slider.e37972.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/main.0cf68a.js","path":"main.0cf68a.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/mobile.992cbe.js","path":"mobile.992cbe.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/img/default-skin.png","path":"img/default-skin.png","modified":1,"renderable":1},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","path":"img/scrollbar_arrow.png","modified":1,"renderable":1},{"_id":"themes/yilia/source/img/preloader.gif","path":"img/preloader.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","path":"fonts/default-skin.b257fa.svg","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.8c627f.woff","path":"fonts/iconfont.8c627f.woff","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","path":"fonts/tooltip.4004ff.svg","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.16acc2.ttf","path":"fonts/iconfont.16acc2.ttf","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.b322fa.eot","path":"fonts/iconfont.b322fa.eot","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.45d7ee.svg","path":"fonts/iconfont.45d7ee.svg","modified":1,"renderable":1},{"_id":"source/img/header.jpg","path":"img/header.jpg","modified":1,"renderable":0},{"_id":"themes/yilia/source/img/header.jpg","path":"img/header.jpg","modified":1,"renderable":1}],"Cache":[{"_id":"themes/yilia/.editorconfig","hash":"daaa8757fac18f8735fadd0a37a42c06f421ca14","modified":1550541410718},{"_id":"themes/yilia/.babelrc","hash":"db600d40e93e6d8023737a65d58d3be7370e5e30","modified":1550541410718},{"_id":"themes/yilia/.gitignore","hash":"d5fc575329853ff620b50fc62ad4b18fa09a308a","modified":1550541410720},{"_id":"themes/yilia/.eslintignore","hash":"ed9d8911ca08c3dd5072c48dd0be4d06f8897730","modified":1550541410718},{"_id":"themes/yilia/.gitattributes","hash":"758cfbecfa7919e99abddf3297f37cde7e3d8d4e","modified":1550541410720},{"_id":"themes/yilia/README.md","hash":"1bf755806af9d8874bd22e1abbdaaa24328ef4dc","modified":1550541410721},{"_id":"themes/yilia/package.json","hash":"ee6aa61f1cb89fd549e3e087c0232207a9c9ee30","modified":1550541410746},{"_id":"themes/yilia/.eslintrc.js","hash":"303d25adf02ad65720e537a16a4a137d14bb755f","modified":1550541410719},{"_id":"themes/yilia/webpack.config.js","hash":"da7657347109ddb4ab8602b219778117254677fe","modified":1550541410789},{"_id":"themes/yilia/_config.yml","hash":"69077b3141b69adcc42e697fee9e74f8f24c741b","modified":1560849631566},{"_id":"source/_posts/Canal-study-01.md","hash":"1d1be5ce8dc2b9920b020fe22142170ad194931d","modified":1551752919996},{"_id":"source/_posts/Docker-rancher.md","hash":"468558f96ae8cd67bfd73739ba4d169b9a56ccd5","modified":1550645303396},{"_id":"source/_posts/Docker-harbor.md","hash":"0fa657cc5d1853e135620b33ebe9add4baadb767","modified":1550645303428},{"_id":"source/_posts/Hello-world.md","hash":"19b1097bd77d6b8c57c2ceae53e71772f433e7bc","modified":1550645427679},{"_id":"source/_posts/Maven-scope.md","hash":"d90690fe0159e3a10aa4d87f78e5110ba70409ab","modified":1572401777347},{"_id":"source/_posts/Harbor-setting.md","hash":"b14c622890f16cebf6071dd2da4acd5b26272829","modified":1550645532113},{"_id":"source/_posts/Git-push-remote.md","hash":"6e4e71ff08706d860be4c9cfb89b93dd747db68d","modified":1550645320862},{"_id":"source/_posts/Knowledge-overview.md","hash":"967136d19864d796d602a7d1b5afc977786d2a0a","modified":1551168945040},{"_id":"source/categories/index.md","hash":"4d05339d211039cd995e12ba86ed54f90f045541","modified":1550625196320},{"_id":"source/tags/index.md","hash":"1165c1641eceaf519140b727547c8325564a1dac","modified":1550625196326},{"_id":"source/about/index.md","hash":"f902bffd9d249009c9ec4c9e9ff6c700827cf739","modified":1550625196319},{"_id":"source/_posts/Linux-manage-firewalld.md","hash":"d32c42776d31a89389b280be5645c04cef2d5071","modified":1558069102561},{"_id":"source/_posts/Quotes.md","hash":"a7f34e9382e4dc35a79dfc57bcad720ace410a7f","modified":1550633604420},{"_id":"source/_posts/Zookeeper-study-01.md","hash":"f686e0ae15607d61d61bbfb8467de193273bbd7b","modified":1557817226358},{"_id":"source/_posts/Tool-idea.md","hash":"27ae6ed3445cc39dafc45fcae6e33e5bc19de123","modified":1557817580963},{"_id":"source/_posts/Flink-study-01.md","hash":"80c7847fe225fb0994bfc26790e5a20918b811d6","modified":1551169679204},{"_id":"source/photos/index.ejs","hash":"f2a9720884bd30e7216f4eb3a190980411a5535b","modified":1550634044576},{"_id":"source/photos/data.json","hash":"dba16a3e248e670a0c08a0b1e8b210297b44a4cf","modified":1550634044576},{"_id":"source/photos/ins.css","hash":"43a45811b364e206d2190228b9afe629f2c7d50b","modified":1550634044577},{"_id":"source/photos/lazyload.min.js","hash":"3dc25abfab48205c564c515494d14b787d63bda3","modified":1550634044578},{"_id":"source/favicon.png","hash":"b99e7a601ba5276d1b705a869532b81f89f3441d","modified":1550625196322},{"_id":"themes/yilia/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":1550553847414},{"_id":"themes/yilia/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1550553847416},{"_id":"themes/yilia/layout/index.ejs","hash":"ec498c6c0606acde997ce195dad97b267418d980","modified":1550541410744},{"_id":"themes/yilia/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1550541410746},{"_id":"themes/yilia/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1550553847417},{"_id":"themes/yilia/languages/default.yml","hash":"f26a34a7983d4bc17c65c7f0f14da598e62ce66d","modified":1550541410722},{"_id":"themes/yilia/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1550541410745},{"_id":"themes/yilia/languages/nl.yml","hash":"3d82ec703d0b3287739d7cb4750a715ae83bfcb3","modified":1550541410723},{"_id":"themes/yilia/languages/fr.yml","hash":"b4be1c1592a72012e48df2b3ec41cc9685573e50","modified":1550541410723},{"_id":"themes/yilia/languages/no.yml","hash":"ddf2035e920a5ecb9076138c184257d9f51896a7","modified":1550541410724},{"_id":"themes/yilia/languages/ru.yml","hash":"2a476b4c6e04900914c81378941640ac5d58a1f0","modified":1550541410724},{"_id":"themes/yilia/languages/zh-CN.yml","hash":"b057f389c6713010f97d461e48ec959b0b6f3b44","modified":1550541410725},{"_id":"themes/yilia/languages/zh-tw.yml","hash":"f5f0ca88185da7a8457760d84bf221781473bd7c","modified":1550541410725},{"_id":"source/photos/ins.js","hash":"7386f7af873902be58d8f5d8a66d8504bea920a2","modified":1550650392736},{"_id":"themes/yilia/source/main.0cf68a.css","hash":"2e258da070be56d217be534ddc6d60dedfc7ecf4","modified":1550643669616},{"_id":"themes/yilia/layout/layout.ejs","hash":"b471ab706d48e0be3f783eab1c94bf5878ef5a94","modified":1550541410744},{"_id":"themes/yilia/source/slider.e37972.js","hash":"ce5eac88301fe4f2fce0fb6203adfd58eb8313ac","modified":1550541410789},{"_id":"themes/yilia/source-src/css.ejs","hash":"cf7eab48d626433120d1ef9697f719a359817018","modified":1550541410747},{"_id":"themes/yilia/source-src/script.ejs","hash":"28abac2426761d7e715b38aadd86ce6549c8ae77","modified":1550541410778},{"_id":"themes/yilia/layout/_partial/toc.ejs","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1550541410741},{"_id":"source/_posts/Docker-rancher/10_docker_run_error.png","hash":"27d2886c76a9d8d7c972f8a8bb6c98e3d46acf2a","modified":1550625196262},{"_id":"source/_posts/Docker-rancher/12_docker_manage_index.png","hash":"1d90ab5dbb4947c82fe660482f5b5124404380d2","modified":1550625196263},{"_id":"source/_posts/Docker-rancher/13_manage_add_host.png","hash":"f1475028b64969eac0c22a3ddc54a96dc575e09b","modified":1550625196264},{"_id":"source/_posts/Docker-rancher/13_manage_controll.png","hash":"af78d232adb398137efe2a4630db480d176431bc","modified":1550625196266},{"_id":"source/_posts/Docker-rancher/14_docker_registry_1.png","hash":"b1ea87f17faf1aa5df911ce719ad120cb25dcaa2","modified":1550625196266},{"_id":"source/_posts/Docker-rancher/11_docker_run_success.png","hash":"8bdaf7879bf0253940411f6926eb3dc85afe98dd","modified":1550625196262},{"_id":"source/_posts/Docker-rancher/14_docker_tag.png","hash":"badf4610ca40544c0b16b6190e7f1b82a962daeb","modified":1550625196268},{"_id":"source/_posts/Docker-rancher/14_docker_registry_2.png","hash":"13914795e1f0d96f2a17b7ffc17f1e1e971c73ef","modified":1550625196267},{"_id":"source/_posts/Docker-rancher/5_docker_info.png","hash":"e0edbe16f48c0544a765f175a1e818b214712a1a","modified":1550625196274},{"_id":"source/_posts/Docker-rancher/3_edit_docker_config.png","hash":"568c66a694094cb5e80386f08b6eb4c5131616c0","modified":1550625196271},{"_id":"source/_posts/Docker-rancher/8_docker_run_error.png","hash":"ce4493be33ce77911e7cfdb6e5f3b6270d0d95c6","modified":1550625196275},{"_id":"source/_posts/Docker-rancher/1_start_error.png","hash":"d1e4095f598db1a9e3e6f639b5276350784644df","modified":1550625196269},{"_id":"source/_posts/Docker-rancher/docker_daemon.png","hash":"78ce6ea449150eb31b4d9ae12c7aa2603f18c0ec","modified":1550625196297},{"_id":"source/_posts/Docker-rancher/docker-compose-success.png","hash":"9e4d4299515973a58747690fe325501a66e0f96b","modified":1550625196295},{"_id":"source/_posts/Docker-rancher/docker_images.png","hash":"b7c8744ec70aab8a39238182afd6150405ec90c3","modified":1550625196299},{"_id":"source/_posts/Docker-rancher/9_docker_run_error.png","hash":"c905be41b50cdac2eb1851c062528e8f1dd57118","modified":1550625196294},{"_id":"source/_posts/Docker-rancher/docker-compose-mulu.png","hash":"c4d2815a2e26fe4984b6c5c0c324f1c54c0806f3","modified":1550625196294},{"_id":"source/_posts/Docker-rancher/docker_pull_error.png","hash":"318a1f355461f7f9b05d4b034f939ff441a646ef","modified":1550625196301},{"_id":"source/_posts/Docker-rancher/docker_push_ok.png","hash":"b3361c6c6dd80476647f279e92552e4c4ab19523","modified":1550625196304},{"_id":"source/_posts/Docker-rancher/docker_push_error.png","hash":"1edfa6d5420fd310ab72734d610daf2caddb8253","modified":1550625196303},{"_id":"source/_posts/Docker-rancher/docker_image_location.png","hash":"7f59fff5a6ce5ca3ffe9b93d09da994430b83b55","modified":1550625196298},{"_id":"source/_posts/Docker-rancher/docker_push_solution.png","hash":"a1e4353cb466389168afa52b8d7550d9663ba5d1","modified":1550625196305},{"_id":"source/_posts/Docker-rancher/docker_tag.png","hash":"52a67b9dd9b29a5062ed898a6b70276b5e7d40fc","modified":1550625196306},{"_id":"source/_posts/Docker-rancher/harbor-docker-compose.png","hash":"b03ae6f311db04585fea34781103b9bba3fc1d29","modified":1550625196307},{"_id":"source/_posts/Docker-harbor/harbor-docker-compose.png","hash":"b03ae6f311db04585fea34781103b9bba3fc1d29","modified":1550625196317},{"_id":"source/_posts/Docker-harbor/harbor-index.png","hash":"d6a0e7329351446d5ae14e80b92f36de3be28ba5","modified":1550625196318},{"_id":"source/_posts/Docker-rancher/harbor-index.png","hash":"d6a0e7329351446d5ae14e80b92f36de3be28ba5","modified":1550625196308},{"_id":"source/_posts/Docker-rancher/docker_run_ok.png","hash":"142919b4516d679253ba55bd86bd97679be39cfb","modified":1550625196305},{"_id":"source/_posts/Docker-rancher/maven_docker_build.png","hash":"6dfb74f79dc6d779c1b66e3395f4c992b794b338","modified":1550625196310},{"_id":"source/_posts/Harbor-setting/harbor_dir.png","hash":"2ee4d148b5f570fd31cbb5c10eb76411f3dece52","modified":1550625196312},{"_id":"themes/yilia/source/main.0cf68a.js","hash":"283ae27ea37ac3e0e45b2e05c2482a4c594b9c25","modified":1550541410786},{"_id":"themes/yilia/source/mobile.992cbe.js","hash":"1801ef448909ea23c0a48e9d63b80d0cfd5534ce","modified":1550541410788},{"_id":"themes/yilia/layout/_partial/archive-post.ejs","hash":"edc0154b30a4127acda10297bec6aacf754b4ac4","modified":1550541410727},{"_id":"themes/yilia/layout/_partial/after-footer.ejs","hash":"c70f367f54064a441e574c913f5e0ea121d0f899","modified":1550541410726},{"_id":"themes/yilia/layout/_partial/baidu-analytics.ejs","hash":"94bc8f91afe7609fb5cfdab201923b056aa13daf","modified":1550640473927},{"_id":"themes/yilia/layout/_partial/footer.ejs","hash":"871f81cacd5d41cb2eb001cd56254217a857dc2f","modified":1550641120393},{"_id":"themes/yilia/layout/_partial/css.ejs","hash":"236f8a377b2e4e35754319c3029bcd4a4115431d","modified":1550541410730},{"_id":"themes/yilia/layout/_partial/aside.ejs","hash":"751e5deab5365348be5243688b419c82d337ab9a","modified":1550541410728},{"_id":"themes/yilia/layout/_partial/google-analytics.ejs","hash":"1ccc627d7697e68fddc367c73ac09920457e5b35","modified":1550541410731},{"_id":"themes/yilia/layout/_partial/mathjax.ejs","hash":"11550a418921d330e6553be0569a94ab5a217967","modified":1550541410733},{"_id":"themes/yilia/layout/_partial/head.ejs","hash":"64f092186b5a744aa1603ce22bb1d44a34446add","modified":1550639546673},{"_id":"themes/yilia/layout/_partial/archive.ejs","hash":"a4eacc2bc1278095a0ef99f904b0634c78f980eb","modified":1550541410727},{"_id":"themes/yilia/layout/_partial/left-col.ejs","hash":"929503eef41ff2f8872894772d4372e2279bc110","modified":1550638871178},{"_id":"themes/yilia/layout/_partial/mobile-nav.ejs","hash":"7fbbfabf5e29525b24ada14613c21a26789132b4","modified":1550638958004},{"_id":"themes/yilia/layout/_partial/header.ejs","hash":"b69855e07b65117769adc515cb64b803932068c9","modified":1550541410732},{"_id":"themes/yilia/layout/_partial/article.ejs","hash":"ddf5d65c27ea64e262da95e9ade00c13a852f3a7","modified":1550642867483},{"_id":"themes/yilia/source/img/default-skin.png","hash":"ed95a8e40a2c3478c5915376acb8e5f33677f24d","modified":1550541410783},{"_id":"themes/yilia/layout/_partial/tools.ejs","hash":"0ffcb251b79e8a920c9b4cb6bb7a96a808816165","modified":1550541410741},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1550541410784},{"_id":"themes/yilia/source/img/preloader.gif","hash":"6342367c93c82da1b9c620e97c84a389cc43d96d","modified":1550541410784},{"_id":"themes/yilia/layout/_partial/viewer.ejs","hash":"cc1c39903aed0a0601d104238d2bbd13ad2a36f3","modified":1550541410742},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","hash":"2ac727c9e092331d35cce95af209ccfac6d4c7c7","modified":1550541410779},{"_id":"themes/yilia/source/fonts/iconfont.8c627f.woff","hash":"aa9672cb097f7fd73ae5a03bcd3d9d726935bc0a","modified":1550541410781},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1550541410782},{"_id":"themes/yilia/source/fonts/iconfont.16acc2.ttf","hash":"f342ac8bf4d937f42a7d6a0032ad267ab47eb7f2","modified":1550541410780},{"_id":"source/_posts/Docker-rancher/4_docker_status.png","hash":"97304df3413d9d944688d7b6b5179d5d4a50cfb0","modified":1550625196273},{"_id":"source/_posts/Docker-rancher/7_docker_run_error.png","hash":"20ec01fe1fb3ff4dce25b46524b4808ff8934f33","modified":1550625196275},{"_id":"source/_posts/Docker-rancher/docker_build.png","hash":"a7743298eccfc54c77f5d635b835cf5354ad1f0e","modified":1550625196296},{"_id":"source/_posts/Docker-rancher/docker_ps.png","hash":"d78334dc85e776fbdaf493163435ce2f6d026bf8","modified":1550625196300},{"_id":"source/_posts/Docker-rancher/harbor_images.png","hash":"8ff48d222f3f2a6243b7991a120fb7721070f869","modified":1550625196309},{"_id":"source/_posts/Docker-rancher/docker_pull_image.png","hash":"7c5ec2aa1fc34845f6395f8d574ab0079bc513dd","modified":1550625196302},{"_id":"source/_posts/Docker-harbor/harbor_images.png","hash":"8ff48d222f3f2a6243b7991a120fb7721070f869","modified":1550625196318},{"_id":"themes/yilia/source-src/css/_core.scss","hash":"29ba600e98ed55f7af4ade8038272c84cba21188","modified":1550541410748},{"_id":"themes/yilia/source-src/css/_function.scss","hash":"ce227b6f5a9af194fd5d455200630f32c05e151f","modified":1550541410748},{"_id":"themes/yilia/source-src/css/article-inner.scss","hash":"f7388f5c11370ef462f7cb913d8f72edf24ecaf9","modified":1550541410749},{"_id":"themes/yilia/source-src/css/archive.scss","hash":"d6a7dd88404b383b5b94e4c7ec675a410c41f3cc","modified":1550541410749},{"_id":"themes/yilia/source-src/css/article-main.scss","hash":"1577a2336b3ad122f49f60dff2bc1a97d4e7b18b","modified":1550541410750},{"_id":"themes/yilia/source-src/css/article-nav.scss","hash":"8f82fe898ba1c1bd00c24a7d8270feddc7eba3bc","modified":1550541410750},{"_id":"themes/yilia/source-src/css/article.scss","hash":"55d082fec4c6bb341725567acaa29ce37d50320a","modified":1550541410751},{"_id":"themes/yilia/source-src/css/aside.scss","hash":"07244c188f58ecfb90bb7c047b8cde977f1dc4b4","modified":1550541410752},{"_id":"themes/yilia/source-src/css/comment.scss","hash":"b85f344f2c66d43d7094746e0a9ccb21d0534201","modified":1550541410752},{"_id":"themes/yilia/source/fonts/iconfont.b322fa.eot","hash":"bc8c5e88f4994a852041b4d83f126d9c4d419b4a","modified":1550541410782},{"_id":"themes/yilia/source-src/css/fonts.scss","hash":"96d7eb1d42c06fdcccb8ef969f6ecd30c3194903","modified":1550541410756},{"_id":"themes/yilia/source-src/css/global.scss","hash":"b4cb4f45a55d4250cd9056f76dab2a3c0dabcec4","modified":1550541410760},{"_id":"themes/yilia/source-src/css/footer.scss","hash":"7ca837a4cc34db1c35f01baec85eb10ccc64ea86","modified":1550541410760},{"_id":"themes/yilia/source-src/css/highlight.scss","hash":"40e5aa5056dc0b3b9f51c5b387370b612e265d4e","modified":1550541410761},{"_id":"themes/yilia/source/fonts/iconfont.45d7ee.svg","hash":"75767c904d483d9b93469afb6b92bb6bdface639","modified":1550541410780},{"_id":"themes/yilia/source-src/css/main.scss","hash":"9eba1fcf4805256697528fcf3b767cf6dd8d0591","modified":1550541410764},{"_id":"themes/yilia/source-src/css/left.scss","hash":"80dac621e43581a254d0152d5df901e4d0b01c09","modified":1550541410764},{"_id":"themes/yilia/source-src/css/mobile-slider.scss","hash":"19f10fd2f0c3377aa4b165b3c2291ecf86dd9351","modified":1550541410765},{"_id":"themes/yilia/source-src/css/page.scss","hash":"244c4d75c375978ff9edb74acc68825e63c6b235","modified":1550541410766},{"_id":"themes/yilia/source-src/css/grid.scss","hash":"f53ea8270752b5919ec5d79224d22af91f2eda12","modified":1550541410761},{"_id":"themes/yilia/source-src/css/reward.scss","hash":"a557a9ed244c82b8b71e9da9de3339d92783499f","modified":1550541410766},{"_id":"themes/yilia/source-src/css/mobile.scss","hash":"d995dcd483a250fe61b426158afb61bf8923a927","modified":1550541410765},{"_id":"themes/yilia/source-src/css/share.scss","hash":"9d6f6884f40c191882e56a1e1e1192400944a515","modified":1550541410767},{"_id":"themes/yilia/source-src/css/scroll.scss","hash":"2495f7e4e3b055735c531f944b5f40a118a351ec","modified":1550541410767},{"_id":"themes/yilia/source-src/css/social.scss","hash":"a10a038a1dac8953cb4ffc7e04272eff9fac54e4","modified":1550541410768},{"_id":"themes/yilia/source-src/css/tags-cloud.scss","hash":"399744e98e7c67939ed9b23c2670d8baad044eda","modified":1550541410768},{"_id":"themes/yilia/source-src/css/tooltip.scss","hash":"b81cedbe31accca82e597801186911a7b5e6841c","modified":1550541410770},{"_id":"themes/yilia/source-src/css/tags.scss","hash":"915c93edd67c5326695cc7dc84b14c5f154dbcc8","modified":1550541410769},{"_id":"themes/yilia/source-src/css/tools.scss","hash":"2924fb6f77c4a9973cd928c2c7db0acb848ed483","modified":1550541410769},{"_id":"themes/yilia/source-src/js/Q.js","hash":"e56d9710afa79b31ca6b9fbd845f6d1895f5214b","modified":1550541410771},{"_id":"themes/yilia/source-src/js/main.js","hash":"fe98bf90ce61658fe16ae057f8b6a512a845af3b","modified":1550541410774},{"_id":"themes/yilia/source-src/js/browser.js","hash":"4dc04845cf27f350922b63f1813a9c82e6e33b05","modified":1550541410773},{"_id":"themes/yilia/source-src/js/anm.js","hash":"d18f6276a352b871390a4112d479b9e58b8cdbbe","modified":1550541410772},{"_id":"themes/yilia/source-src/js/report.js","hash":"57680f9a23bd0a1eaafd64ae08cc33e20627ab15","modified":1550541410775},{"_id":"themes/yilia/source-src/js/slider.js","hash":"0beaa112657ad57c723d9e773d5b79de60c1dd74","modified":1550541410776},{"_id":"themes/yilia/source-src/js/fix.js","hash":"67b8819abb886c9d066fb3b0624ca15e06f63fe0","modified":1550541410773},{"_id":"themes/yilia/source-src/js/aside.js","hash":"5e4c3c3d61f1e1ce2f09688d3aff25fadc851fff","modified":1550541410772},{"_id":"source/img/header.jpg","hash":"b99e7a601ba5276d1b705a869532b81f89f3441d","modified":1550625196325},{"_id":"themes/yilia/layout/_partial/script.ejs","hash":"e98ec0b3b56f14d1d79af99ceb42727719a584f3","modified":1550541410740},{"_id":"themes/yilia/source-src/js/util.js","hash":"3bcdeb95072b85600874424e6929e3e22cfddaa0","modified":1550541410777},{"_id":"themes/yilia/source-src/js/viewer.js","hash":"c699cf3c89409ec8f044258e0715a470861b5d5d","modified":1550541410777},{"_id":"source/_posts/Docker-rancher/2_status_docker.png","hash":"7ad696d0fccf7f49771dbf534a21befa1b90a8ba","modified":1550625196270},{"_id":"themes/yilia/source-src/js/share.js","hash":"d4ccff8266c37363b3904226f5d035b7db882c61","modified":1550541410776},{"_id":"source/_posts/Harbor-setting/harbor_kill.png","hash":"95ab88a724f3642d3481c7d9ad1318cf084a2035","modified":1550625196313},{"_id":"themes/yilia/layout/_partial/post/category.ejs","hash":"e777cbf959b11c4dfda649c562799899b90ab4a3","modified":1550541410734},{"_id":"themes/yilia/layout/_partial/post/changyan.ejs","hash":"086c8a88fd3bcae7ec13258df58e25d6354af2fa","modified":1550541410735},{"_id":"themes/yilia/layout/_partial/post/date.ejs","hash":"aae96de18d48cd3b9b7bf6fed0100e15b53cca97","modified":1550541410735},{"_id":"themes/yilia/layout/_partial/post/gitment.ejs","hash":"f72f91e337e933df232aa66a5b641a7cce76dc09","modified":1550558584716},{"_id":"themes/yilia/layout/_partial/post/nav.ejs","hash":"b6a97043f9ec37e571aacacfedcda1d4d75e3c7c","modified":1550541410737},{"_id":"themes/yilia/layout/_partial/post/tag.ejs","hash":"2c4e4ca36c9bb4318506c38aca7127f1f44d827f","modified":1550541410738},{"_id":"themes/yilia/layout/_partial/post/title.ejs","hash":"d4a460a35e2112d0c7414fd5e19b3a16093f1caf","modified":1550541410738},{"_id":"themes/yilia/layout/_partial/post/wangyiyun.ejs","hash":"fb022502c741b4a26bad6b2ad37245c10ede3f1a","modified":1550541410739},{"_id":"themes/yilia/source/img/header.jpg","hash":"b99e7a601ba5276d1b705a869532b81f89f3441d","modified":1537959839717},{"_id":"themes/yilia/source-src/js/mobile.js","hash":"461c08ffcbc724d74ec7e0ff38e171eefe0f89fd","modified":1550541410775},{"_id":"themes/yilia/layout/_partial/post/duoshuo.ejs","hash":"f6b4c4eaafb5ac386273354b5f64a26139b7a3b0","modified":1550541410736},{"_id":"themes/yilia/source-src/css/fonts/iconfont.ttf","hash":"f342ac8bf4d937f42a7d6a0032ad267ab47eb7f2","modified":1550541410759},{"_id":"themes/yilia/source-src/css/fonts/iconfont.woff","hash":"aa9672cb097f7fd73ae5a03bcd3d9d726935bc0a","modified":1550541410759},{"_id":"themes/yilia/layout/_partial/post/share.ejs","hash":"345b262e3c3b75c0cd9a93d9ecabcf06e33e54ff","modified":1550541410738},{"_id":"themes/yilia/source-src/css/core/_animation.scss","hash":"1834c3ed8560716e63bb3a50be94cac87fbbeaf3","modified":1550541410753},{"_id":"themes/yilia/source-src/css/fonts/iconfont.eot","hash":"bc8c5e88f4994a852041b4d83f126d9c4d419b4a","modified":1550541410757},{"_id":"themes/yilia/source-src/css/core/_media-queries.scss","hash":"262ffcd88775080b7f511db37f58d2bcb1b2bfc7","modified":1550541410754},{"_id":"themes/yilia/source-src/css/core/_mixin.scss","hash":"91db061c9c17628291a005e5bd4936cf9d35a6c4","modified":1550541410754},{"_id":"themes/yilia/source-src/css/core/_variables.scss","hash":"6e75bdaa46de83094ba0873099c6e7d656a22453","modified":1550541410756},{"_id":"themes/yilia/source-src/css/img/checkered-pattern.png","hash":"049262fa0886989d750637b264bed34ab51c23c8","modified":1550541410762},{"_id":"themes/yilia/source-src/css/img/tooltip.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1550541410763},{"_id":"themes/yilia/source-src/css/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1550541410763},{"_id":"themes/yilia/source-src/css/core/_reset.scss","hash":"398a49913b4a47d928103562b1ce94520be4026a","modified":1550541410755},{"_id":"themes/yilia/source-src/css/fonts/iconfont.svg","hash":"75767c904d483d9b93469afb6b92bb6bdface639","modified":1550541410758}],"Category":[{"name":"Canal","_id":"ck2vmvr8b0002mgu55j13ol53"},{"name":"Maven","_id":"ck2vmvr8j0007mgu5mac5j7jb"},{"name":"Hexo","_id":"ck2vmvr8l000bmgu5tz9obyap"},{"name":"Git","_id":"ck2vmvr8n000gmgu51wetzjg4"},{"name":"Docker","_id":"ck2vmvr8p000kmgu51osy6ad7"},{"name":"Linux","_id":"ck2vmvr9l0012mgu5w5v9pej2"},{"name":"名句","_id":"ck2vmvr9v001amgu5v1n0fr0x"},{"name":"Zookeeper","_id":"ck2vmvra2001hmgu5ihapqv0s"},{"name":"工具","_id":"ck2vmvra9001mmgu5ygtymcnq"},{"name":"flink","_id":"ck2vmvrac001smgu52t10xkdz"}],"Data":[],"Page":[{"title":"标签","date":"2018-09-29T07:54:23.000Z","type":"tags","layout":"tags","comments":0,"_content":"","source":"tags/index.md","raw":"---\ntitle: 标签\ndate: 2018-09-29 15:54:23\ntype: \"tags\"\nlayout: \"tags\"\ncomments: false\n---","updated":"2019-02-20T01:13:16.326Z","path":"tags/index.html","_id":"ck2vmvr9b000ymgu5vacvoxln","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"categories","date":"2018-09-29T07:54:45.000Z","type":"categories","layout":"categories","comments":0,"_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2018-09-29 15:54:45\ntype: \"categories\"\nlayout: \"categories\"\ncomments: false\n---\n","updated":"2019-02-20T01:13:16.320Z","path":"categories/index.html","_id":"ck2vmvr9f0010mgu5fsyp17sq","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"关于","date":"2018-09-29T07:54:23.000Z","comments":0,"_content":"\n### 艾凯强\n\nPhone: 18782206113　　　　Email: akqdream@163.com　　　Work-Experience: 2.5 years\n\nGitHub: github.com/aikaiqiang　　　　Blog: http://akq.zhangzetao.cn\n\n---\n\n#### 个人经历\n\n##### 2016/06-至今　　　　广州多好科技有限公司　　Java后台开发\n##### 2015/12-2016/06　　 成都世纪东方有限公司　　Java后台开发\n##### 2012/09-2016/05　　 西南民族大学　　　计算机科学与技术　排名7/151\n\n---\n\n#### 专业技能\n* 精通J2EE开发框架，能够独立承担后端的开发工作；\n* 熟悉基于Dubbo+Zookeeper微服务架构和SpringBoot+ SpringCloud微服务架构开发；\n* 熟悉ONS、Redis、Quartz等中间件技术的使用；\n* 熟悉Mysql，SqlServer等数据库的使用以及优化；\n* 熟悉Git，Maven，Rap，Jira，Jenkins等项目管理用具的使用；\n* 具有HTML5App应用开发经验，利用HTML5技术开发网站、手机等多平台的前端应用；\n* 了解前段Vue框架开发模式，以及element-ui和layui组件的使用；\n\n---","source":"about/index.md","raw":"---\ntitle:  关于\ndate: 2018-09-29 15:54:23\ncomments: false\n---\n\n### 艾凯强\n\nPhone: 18782206113　　　　Email: akqdream@163.com　　　Work-Experience: 2.5 years\n\nGitHub: github.com/aikaiqiang　　　　Blog: http://akq.zhangzetao.cn\n\n---\n\n#### 个人经历\n\n##### 2016/06-至今　　　　广州多好科技有限公司　　Java后台开发\n##### 2015/12-2016/06　　 成都世纪东方有限公司　　Java后台开发\n##### 2012/09-2016/05　　 西南民族大学　　　计算机科学与技术　排名7/151\n\n---\n\n#### 专业技能\n* 精通J2EE开发框架，能够独立承担后端的开发工作；\n* 熟悉基于Dubbo+Zookeeper微服务架构和SpringBoot+ SpringCloud微服务架构开发；\n* 熟悉ONS、Redis、Quartz等中间件技术的使用；\n* 熟悉Mysql，SqlServer等数据库的使用以及优化；\n* 熟悉Git，Maven，Rap，Jira，Jenkins等项目管理用具的使用；\n* 具有HTML5App应用开发经验，利用HTML5技术开发网站、手机等多平台的前端应用；\n* 了解前段Vue框架开发模式，以及element-ui和layui组件的使用；\n\n---","updated":"2019-02-20T01:13:16.319Z","path":"about/index.html","layout":"page","_id":"ck2vmvr9n0014mgu5jmr8jyzg","content":"<h3 id=\"艾凯强\"><a href=\"#艾凯强\" class=\"headerlink\" title=\"艾凯强\"></a>艾凯强</h3><p>Phone: 18782206113　　　　Email: <a href=\"mailto:akqdream@163.com\" target=\"_blank\" rel=\"noopener\">akqdream@163.com</a>　　　Work-Experience: 2.5 years</p>\n<p>GitHub: github.com/aikaiqiang　　　　Blog: <a href=\"http://akq.zhangzetao.cn\" target=\"_blank\" rel=\"noopener\">http://akq.zhangzetao.cn</a></p>\n<hr>\n<h4 id=\"个人经历\"><a href=\"#个人经历\" class=\"headerlink\" title=\"个人经历\"></a>个人经历</h4><h5 id=\"2016-06-至今-广州多好科技有限公司-Java后台开发\"><a href=\"#2016-06-至今-广州多好科技有限公司-Java后台开发\" class=\"headerlink\" title=\"2016/06-至今　　　　广州多好科技有限公司　　Java后台开发\"></a>2016/06-至今　　　　广州多好科技有限公司　　Java后台开发</h5><h5 id=\"2015-12-2016-06-成都世纪东方有限公司-Java后台开发\"><a href=\"#2015-12-2016-06-成都世纪东方有限公司-Java后台开发\" class=\"headerlink\" title=\"2015/12-2016/06　　 成都世纪东方有限公司　　Java后台开发\"></a>2015/12-2016/06　　 成都世纪东方有限公司　　Java后台开发</h5><h5 id=\"2012-09-2016-05-西南民族大学-计算机科学与技术-排名7-151\"><a href=\"#2012-09-2016-05-西南民族大学-计算机科学与技术-排名7-151\" class=\"headerlink\" title=\"2012/09-2016/05　　 西南民族大学　　　计算机科学与技术　排名7/151\"></a>2012/09-2016/05　　 西南民族大学　　　计算机科学与技术　排名7/151</h5><hr>\n<h4 id=\"专业技能\"><a href=\"#专业技能\" class=\"headerlink\" title=\"专业技能\"></a>专业技能</h4><ul>\n<li>精通J2EE开发框架，能够独立承担后端的开发工作；</li>\n<li>熟悉基于Dubbo+Zookeeper微服务架构和SpringBoot+ SpringCloud微服务架构开发；</li>\n<li>熟悉ONS、Redis、Quartz等中间件技术的使用；</li>\n<li>熟悉Mysql，SqlServer等数据库的使用以及优化；</li>\n<li>熟悉Git，Maven，Rap，Jira，Jenkins等项目管理用具的使用；</li>\n<li>具有HTML5App应用开发经验，利用HTML5技术开发网站、手机等多平台的前端应用；</li>\n<li>了解前段Vue框架开发模式，以及element-ui和layui组件的使用；</li>\n</ul>\n<hr>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"艾凯强\"><a href=\"#艾凯强\" class=\"headerlink\" title=\"艾凯强\"></a>艾凯强</h3><p>Phone: 18782206113　　　　Email: <a href=\"mailto:akqdream@163.com\" target=\"_blank\" rel=\"noopener\">akqdream@163.com</a>　　　Work-Experience: 2.5 years</p>\n<p>GitHub: github.com/aikaiqiang　　　　Blog: <a href=\"http://akq.zhangzetao.cn\" target=\"_blank\" rel=\"noopener\">http://akq.zhangzetao.cn</a></p>\n<hr>\n<h4 id=\"个人经历\"><a href=\"#个人经历\" class=\"headerlink\" title=\"个人经历\"></a>个人经历</h4><h5 id=\"2016-06-至今-广州多好科技有限公司-Java后台开发\"><a href=\"#2016-06-至今-广州多好科技有限公司-Java后台开发\" class=\"headerlink\" title=\"2016/06-至今　　　　广州多好科技有限公司　　Java后台开发\"></a>2016/06-至今　　　　广州多好科技有限公司　　Java后台开发</h5><h5 id=\"2015-12-2016-06-成都世纪东方有限公司-Java后台开发\"><a href=\"#2015-12-2016-06-成都世纪东方有限公司-Java后台开发\" class=\"headerlink\" title=\"2015/12-2016/06　　 成都世纪东方有限公司　　Java后台开发\"></a>2015/12-2016/06　　 成都世纪东方有限公司　　Java后台开发</h5><h5 id=\"2012-09-2016-05-西南民族大学-计算机科学与技术-排名7-151\"><a href=\"#2012-09-2016-05-西南民族大学-计算机科学与技术-排名7-151\" class=\"headerlink\" title=\"2012/09-2016/05　　 西南民族大学　　　计算机科学与技术　排名7/151\"></a>2012/09-2016/05　　 西南民族大学　　　计算机科学与技术　排名7/151</h5><hr>\n<h4 id=\"专业技能\"><a href=\"#专业技能\" class=\"headerlink\" title=\"专业技能\"></a>专业技能</h4><ul>\n<li>精通J2EE开发框架，能够独立承担后端的开发工作；</li>\n<li>熟悉基于Dubbo+Zookeeper微服务架构和SpringBoot+ SpringCloud微服务架构开发；</li>\n<li>熟悉ONS、Redis、Quartz等中间件技术的使用；</li>\n<li>熟悉Mysql，SqlServer等数据库的使用以及优化；</li>\n<li>熟悉Git，Maven，Rap，Jira，Jenkins等项目管理用具的使用；</li>\n<li>具有HTML5App应用开发经验，利用HTML5技术开发网站、手机等多平台的前端应用；</li>\n<li>了解前段Vue框架开发模式，以及element-ui和layui组件的使用；</li>\n</ul>\n<hr>\n"},{"layout":"post","slug":"photos","title":"相册","noDate":"true","comments":0,"_content":"<link rel=\"stylesheet\" href=\"./ins.css\">\n<div class=\"photos-btn-wrap\">\n\t<a class=\"photos-btn active\" href=\"javascript:void(0)\">Photos</a>\n\t<a class=\"photos-btn\" href=\"#\">待续</a>\n</div>\n<div class=\"instagram itemscope\">\n\t<a href=\"https://www.instagram.com/lawlitewang20/\" target=\"_blank\" class=\"open-ins\">图片正在加载中…</a>\n</div>\n<script>\n  (function() {\n    var loadScript = function(path) {\n      var $script = document.createElement('script')\n      document.getElementsByTagName('body')[0].appendChild($script)\n      $script.setAttribute('src', path)\n    }\n    setTimeout(function() {\n      loadScript('./ins.js')\n    }, 0)\n  })()\n</script>\n","source":"photos/index.ejs","raw":"---\nlayout: post\nslug: \"photos\"\ntitle: \"相册\"\nnoDate: \"true\"\ncomments: \"false\"\n---\n<link rel=\"stylesheet\" href=\"./ins.css\">\n<div class=\"photos-btn-wrap\">\n\t<a class=\"photos-btn active\" href=\"javascript:void(0)\">Photos</a>\n\t<a class=\"photos-btn\" href=\"#\">待续</a>\n</div>\n<div class=\"instagram itemscope\">\n\t<a href=\"https://www.instagram.com/lawlitewang20/\" target=\"_blank\" class=\"open-ins\">图片正在加载中…</a>\n</div>\n<script>\n  (function() {\n    var loadScript = function(path) {\n      var $script = document.createElement('script')\n      document.getElementsByTagName('body')[0].appendChild($script)\n      $script.setAttribute('src', path)\n    }\n    setTimeout(function() {\n      loadScript('./ins.js')\n    }, 0)\n  })()\n</script>\n","date":"2019-02-20T03:48:03.814Z","updated":"2019-02-20T03:40:44.576Z","path":"photos/index.html","_id":"ck2vmvr9r0016mgu5vw4xt7il","content":"<link rel=\"stylesheet\" href=\"./ins.css\">\n<div class=\"photos-btn-wrap\">\n\t<a class=\"photos-btn active\" href=\"javascript:void(0)\" target=\"_blank\" rel=\"noopener\">Photos</a>\n\t<a class=\"photos-btn\" href=\"#\">待续</a>\n</div>\n<div class=\"instagram itemscope\">\n\t<a href=\"https://www.instagram.com/lawlitewang20/\" target=\"_blank\" class=\"open-ins\">图片正在加载中…</a>\n</div>\n<script>\n  (function() {\n    var loadScript = function(path) {\n      var $script = document.createElement('script')\n      document.getElementsByTagName('body')[0].appendChild($script)\n      $script.setAttribute('src', path)\n    }\n    setTimeout(function() {\n      loadScript('./ins.js')\n    }, 0)\n  })()\n</script>\n","site":{"data":{}},"excerpt":"","more":"<link rel=\"stylesheet\" href=\"./ins.css\">\n<div class=\"photos-btn-wrap\">\n\t<a class=\"photos-btn active\" href=\"javascript:void(0)\" target=\"_blank\" rel=\"noopener\">Photos</a>\n\t<a class=\"photos-btn\" href=\"#\">待续</a>\n</div>\n<div class=\"instagram itemscope\">\n\t<a href=\"https://www.instagram.com/lawlitewang20/\" target=\"_blank\" class=\"open-ins\">图片正在加载中…</a>\n</div>\n<script>\n  (function() {\n    var loadScript = function(path) {\n      var $script = document.createElement('script')\n      document.getElementsByTagName('body')[0].appendChild($script)\n      $script.setAttribute('src', path)\n    }\n    setTimeout(function() {\n      loadScript('./ins.js')\n    }, 0)\n  })()\n</script>\n"},{"_content":"{\"list\": [{\"arr\": {\"link\": [\"2017-03-01_\\u4e09\\u5206\\u5f52\\u664b.jpg\", \"2017-03-01_\\u5c81\\u6708\\u795e\\u5077.jpg\"], \"text\": [\"\\u4e09\\u5206\\u5f52\\u664b\", \"\\u5c81\\u6708\\u795e\\u5077\"], \"month\": 3, \"type\": [\"image\", \"image\"], \"year\": 2017}, \"date\": \"2017-03\"}, {\"arr\": {\"link\": [\"2017-01-01_2017\\u65b0\\u5e74 (2).jpg\", \"2017-01-01_2017\\u65b0\\u5e74 (3).jpg\", \"2017-01-01_2017\\u65b0\\u5e74 (4).jpg\", \"2017-01-01_2017\\u65b0\\u5e74.jpg\", \"2017-01-01_\\u9ec4\\u660f.jpg\"], \"text\": [\"2017\\u65b0\\u5e74 (2)\", \"2017\\u65b0\\u5e74 (3)\", \"2017\\u65b0\\u5e74 (4)\", \"2017\\u65b0\\u5e74\", \"\\u9ec4\\u660f\"], \"month\": 1, \"type\": [\"image\", \"image\", \"image\", \"image\", \"image\"], \"year\": 2017}, \"date\": \"2017-01\"}, {\"arr\": {\"link\": [\"2016-11-03_\\u5915\\u9633\\u65e0\\u9650\\u597d\\uff0c\\u53ea\\u662f\\u8fd1\\u9ec4\\u660f.jpg\"], \"text\": [\"\\u5915\\u9633\\u65e0\\u9650\\u597d\\uff0c\\u53ea\\u662f\\u8fd1\\u9ec4\\u660f\"], \"month\": 11, \"type\": [\"image\"], \"year\": 2016}, \"date\": \"2016-11\"}, {\"arr\": {\"link\": [\"2016-05-01_\\u4e16\\u535a\\u9986.PNG\", \"2016-05-01_\\u5356\\u4e66\\u5566\\uff01.jpg\", \"2016-05-01_\\u6211\\u7684\\u75d5\\u8ff9.jpg\", \"2016-05-01_\\u6f02\\u4eae--\\u4e2d\\u56fd\\u9986.JPG\", \"2016-05-01_\\u6f02\\u4eae.jpg\", \"2016-05-01_\\u73ed\\u7ea7\\u805a\\u9910-1.jpg\", \"2016-05-01_\\u73ed\\u7ea7\\u805a\\u9910-\\u5b54\\u660e\\u706f-1.jpg\", \"2016-05-01_\\u73ed\\u7ea7\\u805a\\u9910-\\u5b54\\u660e\\u706f-2.jpg\", \"2016-05-01_\\u73ed\\u7ea7\\u9732\\u8425-1.jpg\", \"2016-05-01_\\u73ed\\u7ea7\\u9732\\u8425-2.JPG\", \"2016-05-01_\\u73ed\\u7ea7\\u9732\\u8425-\\u70e7\\u70e4-1.jpg\", \"2016-05-01_\\u770b\\uff0c\\u86c7\\uff01.jpg\", \"2016-05-01_\\u968f\\u540e\\u62cd2.jpg\", \"2016-05-10_\\u6700\\u540e\\u7684\\u805a\\u9910\\u770b\\u7535\\u5f71\\u56de\\u6765-2-24\\u665a.jpg\", \"2016-05-10_\\u6700\\u540e\\u7684\\u901a\\u5bb5--\\u8fd8\\u5728\\u6539\\u8bba\\u6587.jpg\", \"2016-05-10_\\u6700\\u540e\\u7684\\u901a\\u5bb5-ktv.jpg\", \"2016-05-10_\\u6700\\u540e\\u7684\\u901a\\u5bb5-\\u7f51\\u5427.jpg\", \"2016-05-10_\\u6700\\u540e\\u7684\\u95f2\\u901b.jpg\"], \"text\": [\"\\u4e16\\u535a\\u9986\", \"\\u5356\\u4e66\\u5566\\uff01\", \"\\u6211\\u7684\\u75d5\\u8ff9\", \"\\u6f02\\u4eae--\\u4e2d\\u56fd\\u9986\", \"\\u6f02\\u4eae\", \"\\u73ed\\u7ea7\\u805a\\u9910-1\", \"\\u73ed\\u7ea7\\u805a\\u9910-\\u5b54\\u660e\\u706f-1\", \"\\u73ed\\u7ea7\\u805a\\u9910-\\u5b54\\u660e\\u706f-2\", \"\\u73ed\\u7ea7\\u9732\\u8425-1\", \"\\u73ed\\u7ea7\\u9732\\u8425-2\", \"\\u73ed\\u7ea7\\u9732\\u8425-\\u70e7\\u70e4-1\", \"\\u770b\\uff0c\\u86c7\\uff01\", \"\\u968f\\u540e\\u62cd2\", \"\\u6700\\u540e\\u7684\\u805a\\u9910\\u770b\\u7535\\u5f71\\u56de\\u6765-2-24\\u665a\", \"\\u6700\\u540e\\u7684\\u901a\\u5bb5--\\u8fd8\\u5728\\u6539\\u8bba\\u6587\", \"\\u6700\\u540e\\u7684\\u901a\\u5bb5-ktv\", \"\\u6700\\u540e\\u7684\\u901a\\u5bb5-\\u7f51\\u5427\", \"\\u6700\\u540e\\u7684\\u95f2\\u901b\"], \"month\": 5, \"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"], \"year\": 2016}, \"date\": \"2016-05\"}, {\"arr\": {\"link\": [\"2016-04-01_\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-1.jpg\", \"2016-04-01_\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-2.jpg\", \"2016-04-01_\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-3.jpg\", \"2016-04-03_\\u6700\\u540e\\u4e00\\u6b21\\u5347\\u65d7\\u4eea\\u5f0f.jpg\"], \"text\": [\"\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-1\", \"\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-2\", \"\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-3\", \"\\u6700\\u540e\\u4e00\\u6b21\\u5347\\u65d7\\u4eea\\u5f0f\"], \"month\": 4, \"type\": [\"image\", \"image\", \"image\", \"image\"], \"year\": 2016}, \"date\": \"2016-04\"}, {\"arr\": {\"link\": [\"2015-12-01_beautiful\\uff01\\uff01.JPG\"], \"text\": [\"beautiful\\uff01\\uff01\"], \"month\": 12, \"type\": [\"image\"], \"year\": 2015}, \"date\": \"2015-12\"}, {\"arr\": {\"link\": [\"2015-10-01_five floor.jpg\", \"2015-10-01_\\u4e2d\\u79cb--.jpg\", \"2015-10-01_\\u54c8\\u54c8.jpg\", \"2015-10-01_\\u54c8\\u54c82.jpg\", \"2015-10-01_\\u9633\\u5149\\u6b63\\u597d.jpg\", \"2015-10-01_\\u9752\\u6625\\u653e\\u6b4c.jpg\"], \"text\": [\"five floor\", \"\\u4e2d\\u79cb--\", \"\\u54c8\\u54c8\", \"\\u54c8\\u54c82\", \"\\u9633\\u5149\\u6b63\\u597d\", \"\\u9752\\u6625\\u653e\\u6b4c\"], \"month\": 10, \"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\"], \"year\": 2015}, \"date\": \"2015-10\"}, {\"arr\": {\"link\": [\"2015-05-01_\\u4f53\\u80b2\\u9986\\u4e0a.JPG\", \"2015-05-01_\\u5145\\u5b9e\\u7684\\u4e00\\u5929--\\u4e03\\u591501.jpg\", \"2015-05-01_\\u518d\\u6765\\u4e00\\u6b21\\u56fe\\u4e66\\u9986-1.jpg\", \"2015-05-01_\\u518d\\u6765\\u4e00\\u6b21\\u56fe\\u4e66\\u9986-2.jpg\", \"2015-05-01_\\u53cd\\u6b63\\u4e0d\\u662f\\u6211\\u8d34\\u7684.jpg\", \"2015-05-01_\\u591a\\u56fe.JPG\", \"2015-05-01_\\u5929\\u6c14\\u4e0d\\u9519--\\u6691\\u5047\\u7559\\u6821\\u671f\\u95f4.JPG\", \"2015-05-01_\\u5b66\\u4f4d\\u6388\\u4e88-1.jpg\", \"2015-05-01_\\u5bbf\\u820d\\u805a\\u9910-1.jpg\", \"2015-05-01_\\u62bd\\u5956\\u4e2d\\u7684\\u2014\\u2014\\u4f4e\\u8c03.jpg\", \"2015-05-01_\\u6f02\\u917f.jpg\", \"2015-05-01_\\u7ae5\\u5e74.jpg\", \"2015-05-01_\\u968f\\u610f\\u62cd.jpg\", \"2015-05-01_\\u968f\\u624b\\u62cd3.jpg\"], \"text\": [\"\\u4f53\\u80b2\\u9986\\u4e0a\", \"\\u5145\\u5b9e\\u7684\\u4e00\\u5929--\\u4e03\\u591501\", \"\\u518d\\u6765\\u4e00\\u6b21\\u56fe\\u4e66\\u9986-1\", \"\\u518d\\u6765\\u4e00\\u6b21\\u56fe\\u4e66\\u9986-2\", \"\\u53cd\\u6b63\\u4e0d\\u662f\\u6211\\u8d34\\u7684\", \"\\u591a\\u56fe\", \"\\u5929\\u6c14\\u4e0d\\u9519--\\u6691\\u5047\\u7559\\u6821\\u671f\\u95f4\", \"\\u5b66\\u4f4d\\u6388\\u4e88-1\", \"\\u5bbf\\u820d\\u805a\\u9910-1\", \"\\u62bd\\u5956\\u4e2d\\u7684\\u2014\\u2014\\u4f4e\\u8c03\", \"\\u6f02\\u917f\", \"\\u7ae5\\u5e74\", \"\\u968f\\u610f\\u62cd\", \"\\u968f\\u624b\\u62cd3\"], \"month\": 5, \"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"], \"year\": 2015}, \"date\": \"2015-05\"}]}","source":"photos/data.json","raw":"{\"list\": [{\"arr\": {\"link\": [\"2017-03-01_\\u4e09\\u5206\\u5f52\\u664b.jpg\", \"2017-03-01_\\u5c81\\u6708\\u795e\\u5077.jpg\"], \"text\": [\"\\u4e09\\u5206\\u5f52\\u664b\", \"\\u5c81\\u6708\\u795e\\u5077\"], \"month\": 3, \"type\": [\"image\", \"image\"], \"year\": 2017}, \"date\": \"2017-03\"}, {\"arr\": {\"link\": [\"2017-01-01_2017\\u65b0\\u5e74 (2).jpg\", \"2017-01-01_2017\\u65b0\\u5e74 (3).jpg\", \"2017-01-01_2017\\u65b0\\u5e74 (4).jpg\", \"2017-01-01_2017\\u65b0\\u5e74.jpg\", \"2017-01-01_\\u9ec4\\u660f.jpg\"], \"text\": [\"2017\\u65b0\\u5e74 (2)\", \"2017\\u65b0\\u5e74 (3)\", \"2017\\u65b0\\u5e74 (4)\", \"2017\\u65b0\\u5e74\", \"\\u9ec4\\u660f\"], \"month\": 1, \"type\": [\"image\", \"image\", \"image\", \"image\", \"image\"], \"year\": 2017}, \"date\": \"2017-01\"}, {\"arr\": {\"link\": [\"2016-11-03_\\u5915\\u9633\\u65e0\\u9650\\u597d\\uff0c\\u53ea\\u662f\\u8fd1\\u9ec4\\u660f.jpg\"], \"text\": [\"\\u5915\\u9633\\u65e0\\u9650\\u597d\\uff0c\\u53ea\\u662f\\u8fd1\\u9ec4\\u660f\"], \"month\": 11, \"type\": [\"image\"], \"year\": 2016}, \"date\": \"2016-11\"}, {\"arr\": {\"link\": [\"2016-05-01_\\u4e16\\u535a\\u9986.PNG\", \"2016-05-01_\\u5356\\u4e66\\u5566\\uff01.jpg\", \"2016-05-01_\\u6211\\u7684\\u75d5\\u8ff9.jpg\", \"2016-05-01_\\u6f02\\u4eae--\\u4e2d\\u56fd\\u9986.JPG\", \"2016-05-01_\\u6f02\\u4eae.jpg\", \"2016-05-01_\\u73ed\\u7ea7\\u805a\\u9910-1.jpg\", \"2016-05-01_\\u73ed\\u7ea7\\u805a\\u9910-\\u5b54\\u660e\\u706f-1.jpg\", \"2016-05-01_\\u73ed\\u7ea7\\u805a\\u9910-\\u5b54\\u660e\\u706f-2.jpg\", \"2016-05-01_\\u73ed\\u7ea7\\u9732\\u8425-1.jpg\", \"2016-05-01_\\u73ed\\u7ea7\\u9732\\u8425-2.JPG\", \"2016-05-01_\\u73ed\\u7ea7\\u9732\\u8425-\\u70e7\\u70e4-1.jpg\", \"2016-05-01_\\u770b\\uff0c\\u86c7\\uff01.jpg\", \"2016-05-01_\\u968f\\u540e\\u62cd2.jpg\", \"2016-05-10_\\u6700\\u540e\\u7684\\u805a\\u9910\\u770b\\u7535\\u5f71\\u56de\\u6765-2-24\\u665a.jpg\", \"2016-05-10_\\u6700\\u540e\\u7684\\u901a\\u5bb5--\\u8fd8\\u5728\\u6539\\u8bba\\u6587.jpg\", \"2016-05-10_\\u6700\\u540e\\u7684\\u901a\\u5bb5-ktv.jpg\", \"2016-05-10_\\u6700\\u540e\\u7684\\u901a\\u5bb5-\\u7f51\\u5427.jpg\", \"2016-05-10_\\u6700\\u540e\\u7684\\u95f2\\u901b.jpg\"], \"text\": [\"\\u4e16\\u535a\\u9986\", \"\\u5356\\u4e66\\u5566\\uff01\", \"\\u6211\\u7684\\u75d5\\u8ff9\", \"\\u6f02\\u4eae--\\u4e2d\\u56fd\\u9986\", \"\\u6f02\\u4eae\", \"\\u73ed\\u7ea7\\u805a\\u9910-1\", \"\\u73ed\\u7ea7\\u805a\\u9910-\\u5b54\\u660e\\u706f-1\", \"\\u73ed\\u7ea7\\u805a\\u9910-\\u5b54\\u660e\\u706f-2\", \"\\u73ed\\u7ea7\\u9732\\u8425-1\", \"\\u73ed\\u7ea7\\u9732\\u8425-2\", \"\\u73ed\\u7ea7\\u9732\\u8425-\\u70e7\\u70e4-1\", \"\\u770b\\uff0c\\u86c7\\uff01\", \"\\u968f\\u540e\\u62cd2\", \"\\u6700\\u540e\\u7684\\u805a\\u9910\\u770b\\u7535\\u5f71\\u56de\\u6765-2-24\\u665a\", \"\\u6700\\u540e\\u7684\\u901a\\u5bb5--\\u8fd8\\u5728\\u6539\\u8bba\\u6587\", \"\\u6700\\u540e\\u7684\\u901a\\u5bb5-ktv\", \"\\u6700\\u540e\\u7684\\u901a\\u5bb5-\\u7f51\\u5427\", \"\\u6700\\u540e\\u7684\\u95f2\\u901b\"], \"month\": 5, \"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"], \"year\": 2016}, \"date\": \"2016-05\"}, {\"arr\": {\"link\": [\"2016-04-01_\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-1.jpg\", \"2016-04-01_\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-2.jpg\", \"2016-04-01_\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-3.jpg\", \"2016-04-03_\\u6700\\u540e\\u4e00\\u6b21\\u5347\\u65d7\\u4eea\\u5f0f.jpg\"], \"text\": [\"\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-1\", \"\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-2\", \"\\u6bd5\\u4e1a\\u751f\\u665a\\u4f1a-3\", \"\\u6700\\u540e\\u4e00\\u6b21\\u5347\\u65d7\\u4eea\\u5f0f\"], \"month\": 4, \"type\": [\"image\", \"image\", \"image\", \"image\"], \"year\": 2016}, \"date\": \"2016-04\"}, {\"arr\": {\"link\": [\"2015-12-01_beautiful\\uff01\\uff01.JPG\"], \"text\": [\"beautiful\\uff01\\uff01\"], \"month\": 12, \"type\": [\"image\"], \"year\": 2015}, \"date\": \"2015-12\"}, {\"arr\": {\"link\": [\"2015-10-01_five floor.jpg\", \"2015-10-01_\\u4e2d\\u79cb--.jpg\", \"2015-10-01_\\u54c8\\u54c8.jpg\", \"2015-10-01_\\u54c8\\u54c82.jpg\", \"2015-10-01_\\u9633\\u5149\\u6b63\\u597d.jpg\", \"2015-10-01_\\u9752\\u6625\\u653e\\u6b4c.jpg\"], \"text\": [\"five floor\", \"\\u4e2d\\u79cb--\", \"\\u54c8\\u54c8\", \"\\u54c8\\u54c82\", \"\\u9633\\u5149\\u6b63\\u597d\", \"\\u9752\\u6625\\u653e\\u6b4c\"], \"month\": 10, \"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\"], \"year\": 2015}, \"date\": \"2015-10\"}, {\"arr\": {\"link\": [\"2015-05-01_\\u4f53\\u80b2\\u9986\\u4e0a.JPG\", \"2015-05-01_\\u5145\\u5b9e\\u7684\\u4e00\\u5929--\\u4e03\\u591501.jpg\", \"2015-05-01_\\u518d\\u6765\\u4e00\\u6b21\\u56fe\\u4e66\\u9986-1.jpg\", \"2015-05-01_\\u518d\\u6765\\u4e00\\u6b21\\u56fe\\u4e66\\u9986-2.jpg\", \"2015-05-01_\\u53cd\\u6b63\\u4e0d\\u662f\\u6211\\u8d34\\u7684.jpg\", \"2015-05-01_\\u591a\\u56fe.JPG\", \"2015-05-01_\\u5929\\u6c14\\u4e0d\\u9519--\\u6691\\u5047\\u7559\\u6821\\u671f\\u95f4.JPG\", \"2015-05-01_\\u5b66\\u4f4d\\u6388\\u4e88-1.jpg\", \"2015-05-01_\\u5bbf\\u820d\\u805a\\u9910-1.jpg\", \"2015-05-01_\\u62bd\\u5956\\u4e2d\\u7684\\u2014\\u2014\\u4f4e\\u8c03.jpg\", \"2015-05-01_\\u6f02\\u917f.jpg\", \"2015-05-01_\\u7ae5\\u5e74.jpg\", \"2015-05-01_\\u968f\\u610f\\u62cd.jpg\", \"2015-05-01_\\u968f\\u624b\\u62cd3.jpg\"], \"text\": [\"\\u4f53\\u80b2\\u9986\\u4e0a\", \"\\u5145\\u5b9e\\u7684\\u4e00\\u5929--\\u4e03\\u591501\", \"\\u518d\\u6765\\u4e00\\u6b21\\u56fe\\u4e66\\u9986-1\", \"\\u518d\\u6765\\u4e00\\u6b21\\u56fe\\u4e66\\u9986-2\", \"\\u53cd\\u6b63\\u4e0d\\u662f\\u6211\\u8d34\\u7684\", \"\\u591a\\u56fe\", \"\\u5929\\u6c14\\u4e0d\\u9519--\\u6691\\u5047\\u7559\\u6821\\u671f\\u95f4\", \"\\u5b66\\u4f4d\\u6388\\u4e88-1\", \"\\u5bbf\\u820d\\u805a\\u9910-1\", \"\\u62bd\\u5956\\u4e2d\\u7684\\u2014\\u2014\\u4f4e\\u8c03\", \"\\u6f02\\u917f\", \"\\u7ae5\\u5e74\", \"\\u968f\\u610f\\u62cd\", \"\\u968f\\u624b\\u62cd3\"], \"month\": 5, \"type\": [\"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\", \"image\"], \"year\": 2015}, \"date\": \"2015-05\"}]}","date":"2019-02-20T03:48:03.811Z","updated":"2019-02-20T03:40:44.576Z","path":"photos/data.json","layout":"false","title":"","comments":1,"_id":"ck2vmvr9t0018mgu5fnbsk87n","content":"{\"list\":[{\"arr\":{\"link\":[\"2017-03-01_三分归晋.jpg\",\"2017-03-01_岁月神偷.jpg\"],\"text\":[\"三分归晋\",\"岁月神偷\"],\"month\":3,\"type\":[\"image\",\"image\"],\"year\":2017},\"date\":\"2017-03\"},{\"arr\":{\"link\":[\"2017-01-01_2017新年 (2).jpg\",\"2017-01-01_2017新年 (3).jpg\",\"2017-01-01_2017新年 (4).jpg\",\"2017-01-01_2017新年.jpg\",\"2017-01-01_黄昏.jpg\"],\"text\":[\"2017新年 (2)\",\"2017新年 (3)\",\"2017新年 (4)\",\"2017新年\",\"黄昏\"],\"month\":1,\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\"],\"year\":2017},\"date\":\"2017-01\"},{\"arr\":{\"link\":[\"2016-11-03_夕阳无限好，只是近黄昏.jpg\"],\"text\":[\"夕阳无限好，只是近黄昏\"],\"month\":11,\"type\":[\"image\"],\"year\":2016},\"date\":\"2016-11\"},{\"arr\":{\"link\":[\"2016-05-01_世博馆.PNG\",\"2016-05-01_卖书啦！.jpg\",\"2016-05-01_我的痕迹.jpg\",\"2016-05-01_漂亮--中国馆.JPG\",\"2016-05-01_漂亮.jpg\",\"2016-05-01_班级聚餐-1.jpg\",\"2016-05-01_班级聚餐-孔明灯-1.jpg\",\"2016-05-01_班级聚餐-孔明灯-2.jpg\",\"2016-05-01_班级露营-1.jpg\",\"2016-05-01_班级露营-2.JPG\",\"2016-05-01_班级露营-烧烤-1.jpg\",\"2016-05-01_看，蛇！.jpg\",\"2016-05-01_随后拍2.jpg\",\"2016-05-10_最后的聚餐看电影回来-2-24晚.jpg\",\"2016-05-10_最后的通宵--还在改论文.jpg\",\"2016-05-10_最后的通宵-ktv.jpg\",\"2016-05-10_最后的通宵-网吧.jpg\",\"2016-05-10_最后的闲逛.jpg\"],\"text\":[\"世博馆\",\"卖书啦！\",\"我的痕迹\",\"漂亮--中国馆\",\"漂亮\",\"班级聚餐-1\",\"班级聚餐-孔明灯-1\",\"班级聚餐-孔明灯-2\",\"班级露营-1\",\"班级露营-2\",\"班级露营-烧烤-1\",\"看，蛇！\",\"随后拍2\",\"最后的聚餐看电影回来-2-24晚\",\"最后的通宵--还在改论文\",\"最后的通宵-ktv\",\"最后的通宵-网吧\",\"最后的闲逛\"],\"month\":5,\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"],\"year\":2016},\"date\":\"2016-05\"},{\"arr\":{\"link\":[\"2016-04-01_毕业生晚会-1.jpg\",\"2016-04-01_毕业生晚会-2.jpg\",\"2016-04-01_毕业生晚会-3.jpg\",\"2016-04-03_最后一次升旗仪式.jpg\"],\"text\":[\"毕业生晚会-1\",\"毕业生晚会-2\",\"毕业生晚会-3\",\"最后一次升旗仪式\"],\"month\":4,\"type\":[\"image\",\"image\",\"image\",\"image\"],\"year\":2016},\"date\":\"2016-04\"},{\"arr\":{\"link\":[\"2015-12-01_beautiful！！.JPG\"],\"text\":[\"beautiful！！\"],\"month\":12,\"type\":[\"image\"],\"year\":2015},\"date\":\"2015-12\"},{\"arr\":{\"link\":[\"2015-10-01_five floor.jpg\",\"2015-10-01_中秋--.jpg\",\"2015-10-01_哈哈.jpg\",\"2015-10-01_哈哈2.jpg\",\"2015-10-01_阳光正好.jpg\",\"2015-10-01_青春放歌.jpg\"],\"text\":[\"five floor\",\"中秋--\",\"哈哈\",\"哈哈2\",\"阳光正好\",\"青春放歌\"],\"month\":10,\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"],\"year\":2015},\"date\":\"2015-10\"},{\"arr\":{\"link\":[\"2015-05-01_体育馆上.JPG\",\"2015-05-01_充实的一天--七夕01.jpg\",\"2015-05-01_再来一次图书馆-1.jpg\",\"2015-05-01_再来一次图书馆-2.jpg\",\"2015-05-01_反正不是我贴的.jpg\",\"2015-05-01_多图.JPG\",\"2015-05-01_天气不错--暑假留校期间.JPG\",\"2015-05-01_学位授予-1.jpg\",\"2015-05-01_宿舍聚餐-1.jpg\",\"2015-05-01_抽奖中的——低调.jpg\",\"2015-05-01_漂酿.jpg\",\"2015-05-01_童年.jpg\",\"2015-05-01_随意拍.jpg\",\"2015-05-01_随手拍3.jpg\"],\"text\":[\"体育馆上\",\"充实的一天--七夕01\",\"再来一次图书馆-1\",\"再来一次图书馆-2\",\"反正不是我贴的\",\"多图\",\"天气不错--暑假留校期间\",\"学位授予-1\",\"宿舍聚餐-1\",\"抽奖中的——低调\",\"漂酿\",\"童年\",\"随意拍\",\"随手拍3\"],\"month\":5,\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"],\"year\":2015},\"date\":\"2015-05\"}]}","site":{"data":{}},"excerpt":"","more":"{\"list\":[{\"arr\":{\"link\":[\"2017-03-01_三分归晋.jpg\",\"2017-03-01_岁月神偷.jpg\"],\"text\":[\"三分归晋\",\"岁月神偷\"],\"month\":3,\"type\":[\"image\",\"image\"],\"year\":2017},\"date\":\"2017-03\"},{\"arr\":{\"link\":[\"2017-01-01_2017新年 (2).jpg\",\"2017-01-01_2017新年 (3).jpg\",\"2017-01-01_2017新年 (4).jpg\",\"2017-01-01_2017新年.jpg\",\"2017-01-01_黄昏.jpg\"],\"text\":[\"2017新年 (2)\",\"2017新年 (3)\",\"2017新年 (4)\",\"2017新年\",\"黄昏\"],\"month\":1,\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\"],\"year\":2017},\"date\":\"2017-01\"},{\"arr\":{\"link\":[\"2016-11-03_夕阳无限好，只是近黄昏.jpg\"],\"text\":[\"夕阳无限好，只是近黄昏\"],\"month\":11,\"type\":[\"image\"],\"year\":2016},\"date\":\"2016-11\"},{\"arr\":{\"link\":[\"2016-05-01_世博馆.PNG\",\"2016-05-01_卖书啦！.jpg\",\"2016-05-01_我的痕迹.jpg\",\"2016-05-01_漂亮--中国馆.JPG\",\"2016-05-01_漂亮.jpg\",\"2016-05-01_班级聚餐-1.jpg\",\"2016-05-01_班级聚餐-孔明灯-1.jpg\",\"2016-05-01_班级聚餐-孔明灯-2.jpg\",\"2016-05-01_班级露营-1.jpg\",\"2016-05-01_班级露营-2.JPG\",\"2016-05-01_班级露营-烧烤-1.jpg\",\"2016-05-01_看，蛇！.jpg\",\"2016-05-01_随后拍2.jpg\",\"2016-05-10_最后的聚餐看电影回来-2-24晚.jpg\",\"2016-05-10_最后的通宵--还在改论文.jpg\",\"2016-05-10_最后的通宵-ktv.jpg\",\"2016-05-10_最后的通宵-网吧.jpg\",\"2016-05-10_最后的闲逛.jpg\"],\"text\":[\"世博馆\",\"卖书啦！\",\"我的痕迹\",\"漂亮--中国馆\",\"漂亮\",\"班级聚餐-1\",\"班级聚餐-孔明灯-1\",\"班级聚餐-孔明灯-2\",\"班级露营-1\",\"班级露营-2\",\"班级露营-烧烤-1\",\"看，蛇！\",\"随后拍2\",\"最后的聚餐看电影回来-2-24晚\",\"最后的通宵--还在改论文\",\"最后的通宵-ktv\",\"最后的通宵-网吧\",\"最后的闲逛\"],\"month\":5,\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"],\"year\":2016},\"date\":\"2016-05\"},{\"arr\":{\"link\":[\"2016-04-01_毕业生晚会-1.jpg\",\"2016-04-01_毕业生晚会-2.jpg\",\"2016-04-01_毕业生晚会-3.jpg\",\"2016-04-03_最后一次升旗仪式.jpg\"],\"text\":[\"毕业生晚会-1\",\"毕业生晚会-2\",\"毕业生晚会-3\",\"最后一次升旗仪式\"],\"month\":4,\"type\":[\"image\",\"image\",\"image\",\"image\"],\"year\":2016},\"date\":\"2016-04\"},{\"arr\":{\"link\":[\"2015-12-01_beautiful！！.JPG\"],\"text\":[\"beautiful！！\"],\"month\":12,\"type\":[\"image\"],\"year\":2015},\"date\":\"2015-12\"},{\"arr\":{\"link\":[\"2015-10-01_five floor.jpg\",\"2015-10-01_中秋--.jpg\",\"2015-10-01_哈哈.jpg\",\"2015-10-01_哈哈2.jpg\",\"2015-10-01_阳光正好.jpg\",\"2015-10-01_青春放歌.jpg\"],\"text\":[\"five floor\",\"中秋--\",\"哈哈\",\"哈哈2\",\"阳光正好\",\"青春放歌\"],\"month\":10,\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"],\"year\":2015},\"date\":\"2015-10\"},{\"arr\":{\"link\":[\"2015-05-01_体育馆上.JPG\",\"2015-05-01_充实的一天--七夕01.jpg\",\"2015-05-01_再来一次图书馆-1.jpg\",\"2015-05-01_再来一次图书馆-2.jpg\",\"2015-05-01_反正不是我贴的.jpg\",\"2015-05-01_多图.JPG\",\"2015-05-01_天气不错--暑假留校期间.JPG\",\"2015-05-01_学位授予-1.jpg\",\"2015-05-01_宿舍聚餐-1.jpg\",\"2015-05-01_抽奖中的——低调.jpg\",\"2015-05-01_漂酿.jpg\",\"2015-05-01_童年.jpg\",\"2015-05-01_随意拍.jpg\",\"2015-05-01_随手拍3.jpg\"],\"text\":[\"体育馆上\",\"充实的一天--七夕01\",\"再来一次图书馆-1\",\"再来一次图书馆-2\",\"反正不是我贴的\",\"多图\",\"天气不错--暑假留校期间\",\"学位授予-1\",\"宿舍聚餐-1\",\"抽奖中的——低调\",\"漂酿\",\"童年\",\"随意拍\",\"随手拍3\"],\"month\":5,\"type\":[\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\",\"image\"],\"year\":2015},\"date\":\"2015-05\"}]}"},{"_content":"#post-instagram{\n\tpadding: 30px;\n}\n#post-instagram .article-entry{\n\tpadding-right: 0;\n}\n.instagram{\n\tposition: relative;\n\tmin-height: 500px;\n}\n.instagram img {\n\twidth: 100%;\n}\n.instagram .year {\n\tfont-size: 16px;\n}\n.instagram .open-ins{\n\tpadding: 10px 0;\n\tcolor: #cdcdcd;\n}\n.instagram .open-ins:hover{\n\tcolor: #657b83;\n}\n.instagram .year{\n\tdisplay: inline;\n}\n.instagram .thumb {\n\twidth: 25%;\n\theight: 0; \n\tpadding-bottom: 25%;\n\tposition: relative;\n\tdisplay: inline-block;\n\ttext-align: center;\n\tbackground: #ededed;\n\toutline: 1px solid #ddd;\n}\n.instagram .thumb a {\n\tposition: relative;\n}\n.instagram .album h1 em{\n\tfont-style: normal;\n\tfont-size: 14px;\n\tmargin-left: 10px;\n}\n.instagram .album ul{\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tclear: both;\n\twidth: 100%;\n\ttext-align: left;\n}\n.instagram .album li{\n\tlist-style: none;\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tpadding: 0 5px;\n\tmargin-bottom: -10px;\n\theight: 0;\n\twidth: 25%;\n\tposition: relative;\n\tpadding-bottom: 25%;\n}\n.instagram .album li:before{\n\tdisplay: none;\n}\n.instagram .album div.img-box{\n\tposition: absolute;\n\twidth: 90%;\n\theight: 90%;\n\t-webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\t-moz-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\tbox-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n}\n.instagram .album div.img-box img{\n\twidth: 100%;\n\theight: 100%;\n    position: absolute;\n    z-index: 2;\n}\n.instagram .album div.img-box .img-bg{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0px;\n\twidth: 100%;\n\tmargin: -5px;\n\tpadding: 5px;\n\t-webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-moz-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\tbox-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-webkit-transition: all 0.15s ease-out 0.1s;\n\t-moz-transition: all 0.15s ease-out 0.1s;\n\t-o-transition: all 0.15s ease-out 0.1s;\n\ttransition: all 0.15s ease-out 0.1s;\n\topacity: 0.2;\n\tcursor: pointer;\n\tdisplay: block;\n\tz-index: 3;\n}\n.instagram .album div.img-box .icon {\n    font-size: 14px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -7px;\n    margin-top: -7px;\n    color: #999;\n    z-index: 1;\n}\n.instagram .album div.img-box .img-bg:hover{\n\topacity: 0;\n}\n.photos-btn-wrap {\n\tborder-bottom: 1px solid #e5e5e5;\n\tmargin-bottom: 20px;\n}\n.photos-btn {\n\tfont-size: 16px;\n\tcolor: #333;\n\tmargin-bottom: -4px;\n\tpadding: 5px 8px 3px;\n}\n.photos-btn.active {\n\tcolor: #08c;\n\tborder: 1px solid #e5e5e5;\n\tborder-bottom: 5px solid #fff;\n}\n\n@media screen and (max-width:600px) {\n\t.instagram .thumb {\n\t\twidth: 50%;\n\t\tpadding-bottom: 50%;\n\t}\n\t.instagram .album li {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tpadding-bottom: 100%;\n\t\ttext-align: center;\n\t}\n\t.instagram .album div.img-box{\n\t\tmargin: 0;\n\t\twidth: 90%;\n\t\theight: 90%;\n\t}\n}","source":"photos/ins.css","raw":"#post-instagram{\n\tpadding: 30px;\n}\n#post-instagram .article-entry{\n\tpadding-right: 0;\n}\n.instagram{\n\tposition: relative;\n\tmin-height: 500px;\n}\n.instagram img {\n\twidth: 100%;\n}\n.instagram .year {\n\tfont-size: 16px;\n}\n.instagram .open-ins{\n\tpadding: 10px 0;\n\tcolor: #cdcdcd;\n}\n.instagram .open-ins:hover{\n\tcolor: #657b83;\n}\n.instagram .year{\n\tdisplay: inline;\n}\n.instagram .thumb {\n\twidth: 25%;\n\theight: 0; \n\tpadding-bottom: 25%;\n\tposition: relative;\n\tdisplay: inline-block;\n\ttext-align: center;\n\tbackground: #ededed;\n\toutline: 1px solid #ddd;\n}\n.instagram .thumb a {\n\tposition: relative;\n}\n.instagram .album h1 em{\n\tfont-style: normal;\n\tfont-size: 14px;\n\tmargin-left: 10px;\n}\n.instagram .album ul{\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tclear: both;\n\twidth: 100%;\n\ttext-align: left;\n}\n.instagram .album li{\n\tlist-style: none;\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tpadding: 0 5px;\n\tmargin-bottom: -10px;\n\theight: 0;\n\twidth: 25%;\n\tposition: relative;\n\tpadding-bottom: 25%;\n}\n.instagram .album li:before{\n\tdisplay: none;\n}\n.instagram .album div.img-box{\n\tposition: absolute;\n\twidth: 90%;\n\theight: 90%;\n\t-webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\t-moz-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\tbox-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n}\n.instagram .album div.img-box img{\n\twidth: 100%;\n\theight: 100%;\n    position: absolute;\n    z-index: 2;\n}\n.instagram .album div.img-box .img-bg{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0px;\n\twidth: 100%;\n\tmargin: -5px;\n\tpadding: 5px;\n\t-webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-moz-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\tbox-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-webkit-transition: all 0.15s ease-out 0.1s;\n\t-moz-transition: all 0.15s ease-out 0.1s;\n\t-o-transition: all 0.15s ease-out 0.1s;\n\ttransition: all 0.15s ease-out 0.1s;\n\topacity: 0.2;\n\tcursor: pointer;\n\tdisplay: block;\n\tz-index: 3;\n}\n.instagram .album div.img-box .icon {\n    font-size: 14px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -7px;\n    margin-top: -7px;\n    color: #999;\n    z-index: 1;\n}\n.instagram .album div.img-box .img-bg:hover{\n\topacity: 0;\n}\n.photos-btn-wrap {\n\tborder-bottom: 1px solid #e5e5e5;\n\tmargin-bottom: 20px;\n}\n.photos-btn {\n\tfont-size: 16px;\n\tcolor: #333;\n\tmargin-bottom: -4px;\n\tpadding: 5px 8px 3px;\n}\n.photos-btn.active {\n\tcolor: #08c;\n\tborder: 1px solid #e5e5e5;\n\tborder-bottom: 5px solid #fff;\n}\n\n@media screen and (max-width:600px) {\n\t.instagram .thumb {\n\t\twidth: 50%;\n\t\tpadding-bottom: 50%;\n\t}\n\t.instagram .album li {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tpadding-bottom: 100%;\n\t\ttext-align: center;\n\t}\n\t.instagram .album div.img-box{\n\t\tmargin: 0;\n\t\twidth: 90%;\n\t\theight: 90%;\n\t}\n}","date":"2019-02-20T03:48:03.818Z","updated":"2019-02-20T03:40:44.577Z","path":"photos/ins.css","layout":"false","title":"","comments":1,"_id":"ck2vmvr9w001cmgu5vj3vn8wc","content":"#post-instagram{\n\tpadding: 30px;\n}\n#post-instagram .article-entry{\n\tpadding-right: 0;\n}\n.instagram{\n\tposition: relative;\n\tmin-height: 500px;\n}\n.instagram img {\n\twidth: 100%;\n}\n.instagram .year {\n\tfont-size: 16px;\n}\n.instagram .open-ins{\n\tpadding: 10px 0;\n\tcolor: #cdcdcd;\n}\n.instagram .open-ins:hover{\n\tcolor: #657b83;\n}\n.instagram .year{\n\tdisplay: inline;\n}\n.instagram .thumb {\n\twidth: 25%;\n\theight: 0; \n\tpadding-bottom: 25%;\n\tposition: relative;\n\tdisplay: inline-block;\n\ttext-align: center;\n\tbackground: #ededed;\n\toutline: 1px solid #ddd;\n}\n.instagram .thumb a {\n\tposition: relative;\n}\n.instagram .album h1 em{\n\tfont-style: normal;\n\tfont-size: 14px;\n\tmargin-left: 10px;\n}\n.instagram .album ul{\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tclear: both;\n\twidth: 100%;\n\ttext-align: left;\n}\n.instagram .album li{\n\tlist-style: none;\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tpadding: 0 5px;\n\tmargin-bottom: -10px;\n\theight: 0;\n\twidth: 25%;\n\tposition: relative;\n\tpadding-bottom: 25%;\n}\n.instagram .album li:before{\n\tdisplay: none;\n}\n.instagram .album div.img-box{\n\tposition: absolute;\n\twidth: 90%;\n\theight: 90%;\n\t-webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\t-moz-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\tbox-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n}\n.instagram .album div.img-box img{\n\twidth: 100%;\n\theight: 100%;\n    position: absolute;\n    z-index: 2;\n}\n.instagram .album div.img-box .img-bg{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0px;\n\twidth: 100%;\n\tmargin: -5px;\n\tpadding: 5px;\n\t-webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-moz-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\tbox-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-webkit-transition: all 0.15s ease-out 0.1s;\n\t-moz-transition: all 0.15s ease-out 0.1s;\n\t-o-transition: all 0.15s ease-out 0.1s;\n\ttransition: all 0.15s ease-out 0.1s;\n\topacity: 0.2;\n\tcursor: pointer;\n\tdisplay: block;\n\tz-index: 3;\n}\n.instagram .album div.img-box .icon {\n    font-size: 14px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -7px;\n    margin-top: -7px;\n    color: #999;\n    z-index: 1;\n}\n.instagram .album div.img-box .img-bg:hover{\n\topacity: 0;\n}\n.photos-btn-wrap {\n\tborder-bottom: 1px solid #e5e5e5;\n\tmargin-bottom: 20px;\n}\n.photos-btn {\n\tfont-size: 16px;\n\tcolor: #333;\n\tmargin-bottom: -4px;\n\tpadding: 5px 8px 3px;\n}\n.photos-btn.active {\n\tcolor: #08c;\n\tborder: 1px solid #e5e5e5;\n\tborder-bottom: 5px solid #fff;\n}\n\n@media screen and (max-width:600px) {\n\t.instagram .thumb {\n\t\twidth: 50%;\n\t\tpadding-bottom: 50%;\n\t}\n\t.instagram .album li {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tpadding-bottom: 100%;\n\t\ttext-align: center;\n\t}\n\t.instagram .album div.img-box{\n\t\tmargin: 0;\n\t\twidth: 90%;\n\t\theight: 90%;\n\t}\n}","site":{"data":{}},"excerpt":"","more":"#post-instagram{\n\tpadding: 30px;\n}\n#post-instagram .article-entry{\n\tpadding-right: 0;\n}\n.instagram{\n\tposition: relative;\n\tmin-height: 500px;\n}\n.instagram img {\n\twidth: 100%;\n}\n.instagram .year {\n\tfont-size: 16px;\n}\n.instagram .open-ins{\n\tpadding: 10px 0;\n\tcolor: #cdcdcd;\n}\n.instagram .open-ins:hover{\n\tcolor: #657b83;\n}\n.instagram .year{\n\tdisplay: inline;\n}\n.instagram .thumb {\n\twidth: 25%;\n\theight: 0; \n\tpadding-bottom: 25%;\n\tposition: relative;\n\tdisplay: inline-block;\n\ttext-align: center;\n\tbackground: #ededed;\n\toutline: 1px solid #ddd;\n}\n.instagram .thumb a {\n\tposition: relative;\n}\n.instagram .album h1 em{\n\tfont-style: normal;\n\tfont-size: 14px;\n\tmargin-left: 10px;\n}\n.instagram .album ul{\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tclear: both;\n\twidth: 100%;\n\ttext-align: left;\n}\n.instagram .album li{\n\tlist-style: none;\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tpadding: 0 5px;\n\tmargin-bottom: -10px;\n\theight: 0;\n\twidth: 25%;\n\tposition: relative;\n\tpadding-bottom: 25%;\n}\n.instagram .album li:before{\n\tdisplay: none;\n}\n.instagram .album div.img-box{\n\tposition: absolute;\n\twidth: 90%;\n\theight: 90%;\n\t-webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\t-moz-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n\tbox-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);\n}\n.instagram .album div.img-box img{\n\twidth: 100%;\n\theight: 100%;\n    position: absolute;\n    z-index: 2;\n}\n.instagram .album div.img-box .img-bg{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0px;\n\twidth: 100%;\n\tmargin: -5px;\n\tpadding: 5px;\n\t-webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-moz-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\tbox-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);\n\t-webkit-transition: all 0.15s ease-out 0.1s;\n\t-moz-transition: all 0.15s ease-out 0.1s;\n\t-o-transition: all 0.15s ease-out 0.1s;\n\ttransition: all 0.15s ease-out 0.1s;\n\topacity: 0.2;\n\tcursor: pointer;\n\tdisplay: block;\n\tz-index: 3;\n}\n.instagram .album div.img-box .icon {\n    font-size: 14px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -7px;\n    margin-top: -7px;\n    color: #999;\n    z-index: 1;\n}\n.instagram .album div.img-box .img-bg:hover{\n\topacity: 0;\n}\n.photos-btn-wrap {\n\tborder-bottom: 1px solid #e5e5e5;\n\tmargin-bottom: 20px;\n}\n.photos-btn {\n\tfont-size: 16px;\n\tcolor: #333;\n\tmargin-bottom: -4px;\n\tpadding: 5px 8px 3px;\n}\n.photos-btn.active {\n\tcolor: #08c;\n\tborder: 1px solid #e5e5e5;\n\tborder-bottom: 5px solid #fff;\n}\n\n@media screen and (max-width:600px) {\n\t.instagram .thumb {\n\t\twidth: 50%;\n\t\tpadding-bottom: 50%;\n\t}\n\t.instagram .album li {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tpadding-bottom: 100%;\n\t\ttext-align: center;\n\t}\n\t.instagram .album div.img-box{\n\t\tmargin: 0;\n\t\twidth: 90%;\n\t\theight: 90%;\n\t}\n}"},{"_content":"/*!\n * An jQuery | zepto plugin for lazy loading images.\n * author -> jieyou\n * see https://github.com/jieyou/lazyload\n * use some tuupola's code https://github.com/tuupola/jquery_lazyload (BSD)\n * use component's throttle https://github.com/component/throttle (MIT)\n */\n!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(window.jQuery||window.Zepto)}(function(a){function g(){}function h(a,b){var e;return e=b._$container==d?(\"innerHeight\"in c?c.innerHeight:d.height())+d.scrollTop():b._$container.offset().top+b._$container.height(),e<=a.offset().top-b.threshold}function i(b,e){var f;return f=e._$container==d?d.width()+(a.fn.scrollLeft?d.scrollLeft():c.pageXOffset):e._$container.offset().left+e._$container.width(),f<=b.offset().left-e.threshold}function j(a,b){var c;return c=b._$container==d?d.scrollTop():b._$container.offset().top,c>=a.offset().top+b.threshold+a.height()}function k(b,e){var f;return f=e._$container==d?a.fn.scrollLeft?d.scrollLeft():c.pageXOffset:e._$container.offset().left,f>=b.offset().left+e.threshold+b.width()}function l(a,b){var c=0;a.each(function(d){function g(){f.trigger(\"_lazyload_appear\"),c=0}var f=a.eq(d);if(!(f.width()<=0&&f.height()<=0||\"none\"===f.css(\"display\")))if(b.vertical_only)if(j(f,b));else if(h(f,b)){if(++c>b.failure_limit)return!1}else g();else if(j(f,b)||k(f,b));else if(h(f,b)||i(f,b)){if(++c>b.failure_limit)return!1}else g()})}function m(a){return a.filter(function(b){return!a.eq(b)._lazyload_loadStarted})}function n(a,b){function h(){f=0,g=+new Date,e=a.apply(c,d),c=null,d=null}var c,d,e,f,g=0;return function(){c=this,d=arguments;var a=new Date-g;return f||(a>=b?h():f=setTimeout(h,b-a)),e}}var f,c=window,d=a(c),e={threshold:0,failure_limit:0,event:\"scroll\",effect:\"show\",effect_params:null,container:c,data_attribute:\"original\",data_srcset_attribute:\"original-srcset\",skip_invisible:!0,appear:g,load:g,vertical_only:!1,check_appear_throttle_time:300,url_rewriter_fn:g,no_fake_img_loader:!1,placeholder_data_img:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC\",placeholder_real_img:\"http://ditu.baidu.cn/yyfm/lazyload/0.0.1/img/placeholder.png\"};f=function(){var a=Object.prototype.toString;return function(b){return a.call(b).replace(\"[object \",\"\").replace(\"]\",\"\")}}(),a.fn.hasOwnProperty(\"lazyload\")||(a.fn.lazyload=function(b){var i,j,k,h=this;return a.isPlainObject(b)||(b={}),a.each(e,function(g,h){var i=f(b[g]);-1!=a.inArray(g,[\"threshold\",\"failure_limit\",\"check_appear_throttle_time\"])?\"String\"==i?b[g]=parseInt(b[g],10):\"Number\"!=i&&(b[g]=h):\"container\"==g?(b._$container=b.hasOwnProperty(g)?b[g]==c||b[g]==document?d:a(b[g]):d,delete b.container):!e.hasOwnProperty(g)||b.hasOwnProperty(g)&&i==f(e[g])||(b[g]=h)}),i=\"scroll\"==b.event,k=0==b.check_appear_throttle_time?l:n(l,b.check_appear_throttle_time),j=i||\"scrollstart\"==b.event||\"scrollstop\"==b.event,h.each(function(c){var e=this,f=h.eq(c),i=f.attr(\"src\"),k=f.attr(\"data-\"+b.data_attribute),l=b.url_rewriter_fn==g?k:b.url_rewriter_fn.call(e,f,k),n=f.attr(\"data-\"+b.data_srcset_attribute),o=f.is(\"img\");return 1==f._lazyload_loadStarted||i==l?(f._lazyload_loadStarted=!0,h=m(h),void 0):(f._lazyload_loadStarted=!1,o&&!i&&f.one(\"error\",function(){f.attr(\"src\",b.placeholder_real_img)}).attr(\"src\",b.placeholder_data_img),f.one(\"_lazyload_appear\",function(){function i(){d&&f.hide(),o?(n&&f.attr(\"srcset\",n),l&&f.attr(\"src\",l)):f.css(\"background-image\",'url(\"'+l+'\")'),d&&f[b.effect].apply(f,c?b.effect_params:[]),h=m(h)}var d,c=a.isArray(b.effect_params);f._lazyload_loadStarted||(d=\"show\"!=b.effect&&a.fn[b.effect]&&(!b.effect_params||c&&0==b.effect_params.length),b.appear!=g&&b.appear.call(e,f,h.length,b),f._lazyload_loadStarted=!0,b.no_fake_img_loader||n?(b.load!=g&&f.one(\"load\",function(){b.load.call(e,f,h.length,b)}),i()):a(\"<img />\").one(\"load\",function(){i(),b.load!=g&&b.load.call(e,f,h.length,b)}).attr(\"src\",l))}),j||f.on(b.event,function(){f._lazyload_loadStarted||f.trigger(\"_lazyload_appear\")}),void 0)}),j&&b._$container.on(b.event,function(){k(h,b)}),d.on(\"resize load\",function(){k(h,b)}),a(function(){k(h,b)}),this})});","source":"photos/lazyload.min.js","raw":"/*!\n * An jQuery | zepto plugin for lazy loading images.\n * author -> jieyou\n * see https://github.com/jieyou/lazyload\n * use some tuupola's code https://github.com/tuupola/jquery_lazyload (BSD)\n * use component's throttle https://github.com/component/throttle (MIT)\n */\n!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(window.jQuery||window.Zepto)}(function(a){function g(){}function h(a,b){var e;return e=b._$container==d?(\"innerHeight\"in c?c.innerHeight:d.height())+d.scrollTop():b._$container.offset().top+b._$container.height(),e<=a.offset().top-b.threshold}function i(b,e){var f;return f=e._$container==d?d.width()+(a.fn.scrollLeft?d.scrollLeft():c.pageXOffset):e._$container.offset().left+e._$container.width(),f<=b.offset().left-e.threshold}function j(a,b){var c;return c=b._$container==d?d.scrollTop():b._$container.offset().top,c>=a.offset().top+b.threshold+a.height()}function k(b,e){var f;return f=e._$container==d?a.fn.scrollLeft?d.scrollLeft():c.pageXOffset:e._$container.offset().left,f>=b.offset().left+e.threshold+b.width()}function l(a,b){var c=0;a.each(function(d){function g(){f.trigger(\"_lazyload_appear\"),c=0}var f=a.eq(d);if(!(f.width()<=0&&f.height()<=0||\"none\"===f.css(\"display\")))if(b.vertical_only)if(j(f,b));else if(h(f,b)){if(++c>b.failure_limit)return!1}else g();else if(j(f,b)||k(f,b));else if(h(f,b)||i(f,b)){if(++c>b.failure_limit)return!1}else g()})}function m(a){return a.filter(function(b){return!a.eq(b)._lazyload_loadStarted})}function n(a,b){function h(){f=0,g=+new Date,e=a.apply(c,d),c=null,d=null}var c,d,e,f,g=0;return function(){c=this,d=arguments;var a=new Date-g;return f||(a>=b?h():f=setTimeout(h,b-a)),e}}var f,c=window,d=a(c),e={threshold:0,failure_limit:0,event:\"scroll\",effect:\"show\",effect_params:null,container:c,data_attribute:\"original\",data_srcset_attribute:\"original-srcset\",skip_invisible:!0,appear:g,load:g,vertical_only:!1,check_appear_throttle_time:300,url_rewriter_fn:g,no_fake_img_loader:!1,placeholder_data_img:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC\",placeholder_real_img:\"http://ditu.baidu.cn/yyfm/lazyload/0.0.1/img/placeholder.png\"};f=function(){var a=Object.prototype.toString;return function(b){return a.call(b).replace(\"[object \",\"\").replace(\"]\",\"\")}}(),a.fn.hasOwnProperty(\"lazyload\")||(a.fn.lazyload=function(b){var i,j,k,h=this;return a.isPlainObject(b)||(b={}),a.each(e,function(g,h){var i=f(b[g]);-1!=a.inArray(g,[\"threshold\",\"failure_limit\",\"check_appear_throttle_time\"])?\"String\"==i?b[g]=parseInt(b[g],10):\"Number\"!=i&&(b[g]=h):\"container\"==g?(b._$container=b.hasOwnProperty(g)?b[g]==c||b[g]==document?d:a(b[g]):d,delete b.container):!e.hasOwnProperty(g)||b.hasOwnProperty(g)&&i==f(e[g])||(b[g]=h)}),i=\"scroll\"==b.event,k=0==b.check_appear_throttle_time?l:n(l,b.check_appear_throttle_time),j=i||\"scrollstart\"==b.event||\"scrollstop\"==b.event,h.each(function(c){var e=this,f=h.eq(c),i=f.attr(\"src\"),k=f.attr(\"data-\"+b.data_attribute),l=b.url_rewriter_fn==g?k:b.url_rewriter_fn.call(e,f,k),n=f.attr(\"data-\"+b.data_srcset_attribute),o=f.is(\"img\");return 1==f._lazyload_loadStarted||i==l?(f._lazyload_loadStarted=!0,h=m(h),void 0):(f._lazyload_loadStarted=!1,o&&!i&&f.one(\"error\",function(){f.attr(\"src\",b.placeholder_real_img)}).attr(\"src\",b.placeholder_data_img),f.one(\"_lazyload_appear\",function(){function i(){d&&f.hide(),o?(n&&f.attr(\"srcset\",n),l&&f.attr(\"src\",l)):f.css(\"background-image\",'url(\"'+l+'\")'),d&&f[b.effect].apply(f,c?b.effect_params:[]),h=m(h)}var d,c=a.isArray(b.effect_params);f._lazyload_loadStarted||(d=\"show\"!=b.effect&&a.fn[b.effect]&&(!b.effect_params||c&&0==b.effect_params.length),b.appear!=g&&b.appear.call(e,f,h.length,b),f._lazyload_loadStarted=!0,b.no_fake_img_loader||n?(b.load!=g&&f.one(\"load\",function(){b.load.call(e,f,h.length,b)}),i()):a(\"<img />\").one(\"load\",function(){i(),b.load!=g&&b.load.call(e,f,h.length,b)}).attr(\"src\",l))}),j||f.on(b.event,function(){f._lazyload_loadStarted||f.trigger(\"_lazyload_appear\")}),void 0)}),j&&b._$container.on(b.event,function(){k(h,b)}),d.on(\"resize load\",function(){k(h,b)}),a(function(){k(h,b)}),this})});","date":"2019-02-20T03:48:03.807Z","updated":"2019-02-20T03:40:44.578Z","path":"photos/lazyload.min.js","layout":"false","title":"","comments":1,"_id":"ck2vmvra0001emgu5d64hs6gd","content":"/*!\n * An jQuery | zepto plugin for lazy loading images.\n * author -> jieyou\n * see https://github.com/jieyou/lazyload\n * use some tuupola's code https://github.com/tuupola/jquery_lazyload (BSD)\n * use component's throttle https://github.com/component/throttle (MIT)\n */\n!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(window.jQuery||window.Zepto)}(function(a){function g(){}function h(a,b){var e;return e=b._$container==d?(\"innerHeight\"in c?c.innerHeight:d.height())+d.scrollTop():b._$container.offset().top+b._$container.height(),e<=a.offset().top-b.threshold}function i(b,e){var=\"\" f;return=\"\" f=\"e._$container==d?d.width()+(a.fn.scrollLeft?d.scrollLeft():c.pageXOffset):e._$container.offset().left+e._$container.width(),f<=b.offset().left-e.threshold}function\" j(a,b){var=\"\" c;return=\"\" c=\"b._$container==d?d.scrollTop():b._$container.offset().top,c\">=a.offset().top+b.threshold+a.height()}function k(b,e){var f;return f=e._$container==d?a.fn.scrollLeft?d.scrollLeft():c.pageXOffset:e._$container.offset().left,f>=b.offset().left+e.threshold+b.width()}function l(a,b){var c=0;a.each(function(d){function g(){f.trigger(\"_lazyload_appear\"),c=0}var f=a.eq(d);if(!(f.width()<=0&&f.height()<=0||\"none\"===f.css(\"display\")))if(b.vertical_only)if(j(f,b));else if(h(f,b)){if(++c=\"\">b.failure_limit)return!1}else g();else if(j(f,b)||k(f,b));else if(h(f,b)||i(f,b)){if(++c>b.failure_limit)return!1}else g()})}function m(a){return a.filter(function(b){return!a.eq(b)._lazyload_loadStarted})}function n(a,b){function h(){f=0,g=+new Date,e=a.apply(c,d),c=null,d=null}var c,d,e,f,g=0;return function(){c=this,d=arguments;var a=new Date-g;return f||(a>=b?h():f=setTimeout(h,b-a)),e}}var f,c=window,d=a(c),e={threshold:0,failure_limit:0,event:\"scroll\",effect:\"show\",effect_params:null,container:c,data_attribute:\"original\",data_srcset_attribute:\"original-srcset\",skip_invisible:!0,appear:g,load:g,vertical_only:!1,check_appear_throttle_time:300,url_rewriter_fn:g,no_fake_img_loader:!1,placeholder_data_img:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC\",placeholder_real_img:\"http://ditu.baidu.cn/yyfm/lazyload/0.0.1/img/placeholder.png\"};f=function(){var a=Object.prototype.toString;return function(b){return a.call(b).replace(\"[object \",\"\").replace(\"]\",\"\")}}(),a.fn.hasOwnProperty(\"lazyload\")||(a.fn.lazyload=function(b){var i,j,k,h=this;return a.isPlainObject(b)||(b={}),a.each(e,function(g,h){var i=f(b[g]);-1!=a.inArray(g,[\"threshold\",\"failure_limit\",\"check_appear_throttle_time\"])?\"String\"==i?b[g]=parseInt(b[g],10):\"Number\"!=i&&(b[g]=h):\"container\"==g?(b._$container=b.hasOwnProperty(g)?b[g]==c||b[g]==document?d:a(b[g]):d,delete b.container):!e.hasOwnProperty(g)||b.hasOwnProperty(g)&&i==f(e[g])||(b[g]=h)}),i=\"scroll\"==b.event,k=0==b.check_appear_throttle_time?l:n(l,b.check_appear_throttle_time),j=i||\"scrollstart\"==b.event||\"scrollstop\"==b.event,h.each(function(c){var e=this,f=h.eq(c),i=f.attr(\"src\"),k=f.attr(\"data-\"+b.data_attribute),l=b.url_rewriter_fn==g?k:b.url_rewriter_fn.call(e,f,k),n=f.attr(\"data-\"+b.data_srcset_attribute),o=f.is(\"img\");return 1==f._lazyload_loadStarted||i==l?(f._lazyload_loadStarted=!0,h=m(h),void 0):(f._lazyload_loadStarted=!1,o&&!i&&f.one(\"error\",function(){f.attr(\"src\",b.placeholder_real_img)}).attr(\"src\",b.placeholder_data_img),f.one(\"_lazyload_appear\",function(){function i(){d&&f.hide(),o?(n&&f.attr(\"srcset\",n),l&&f.attr(\"src\",l)):f.css(\"background-image\",'url(\"'+l+'\")'),d&&f[b.effect].apply(f,c?b.effect_params:[]),h=m(h)}var d,c=a.isArray(b.effect_params);f._lazyload_loadStarted||(d=\"show\"!=b.effect&&a.fn[b.effect]&&(!b.effect_params||c&&0==b.effect_params.length),b.appear!=g&&b.appear.call(e,f,h.length,b),f._lazyload_loadStarted=!0,b.no_fake_img_loader||n?(b.load!=g&&f.one(\"load\",function(){b.load.call(e,f,h.length,b)}),i()):a(\"<img>\").one(\"load\",function(){i(),b.load!=g&&b.load.call(e,f,h.length,b)}).attr(\"src\",l))}),j||f.on(b.event,function(){f._lazyload_loadStarted||f.trigger(\"_lazyload_appear\")}),void 0)}),j&&b._$container.on(b.event,function(){k(h,b)}),d.on(\"resize load\",function(){k(h,b)}),a(function(){k(h,b)}),this})});</=0&&f.height()<=0||\"none\"===f.css(\"display\")))if(b.vertical_only)if(j(f,b));else></=a.offset().top-b.threshold}function>","site":{"data":{}},"excerpt":"","more":"/*!\n * An jQuery | zepto plugin for lazy loading images.\n * author -> jieyou\n * see https://github.com/jieyou/lazyload\n * use some tuupola's code https://github.com/tuupola/jquery_lazyload (BSD)\n * use component's throttle https://github.com/component/throttle (MIT)\n */\n!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(window.jQuery||window.Zepto)}(function(a){function g(){}function h(a,b){var e;return e=b._$container==d?(\"innerHeight\"in c?c.innerHeight:d.height())+d.scrollTop():b._$container.offset().top+b._$container.height(),e<=a.offset().top-b.threshold}function i(b,e){var=\"\" f;return=\"\" f=\"e._$container==d?d.width()+(a.fn.scrollLeft?d.scrollLeft():c.pageXOffset):e._$container.offset().left+e._$container.width(),f<=b.offset().left-e.threshold}function\" j(a,b){var=\"\" c;return=\"\" c=\"b._$container==d?d.scrollTop():b._$container.offset().top,c\">=a.offset().top+b.threshold+a.height()}function k(b,e){var f;return f=e._$container==d?a.fn.scrollLeft?d.scrollLeft():c.pageXOffset:e._$container.offset().left,f>=b.offset().left+e.threshold+b.width()}function l(a,b){var c=0;a.each(function(d){function g(){f.trigger(\"_lazyload_appear\"),c=0}var f=a.eq(d);if(!(f.width()<=0&&f.height()<=0||\"none\"===f.css(\"display\")))if(b.vertical_only)if(j(f,b));else if(h(f,b)){if(++c=\"\">b.failure_limit)return!1}else g();else if(j(f,b)||k(f,b));else if(h(f,b)||i(f,b)){if(++c>b.failure_limit)return!1}else g()})}function m(a){return a.filter(function(b){return!a.eq(b)._lazyload_loadStarted})}function n(a,b){function h(){f=0,g=+new Date,e=a.apply(c,d),c=null,d=null}var c,d,e,f,g=0;return function(){c=this,d=arguments;var a=new Date-g;return f||(a>=b?h():f=setTimeout(h,b-a)),e}}var f,c=window,d=a(c),e={threshold:0,failure_limit:0,event:\"scroll\",effect:\"show\",effect_params:null,container:c,data_attribute:\"original\",data_srcset_attribute:\"original-srcset\",skip_invisible:!0,appear:g,load:g,vertical_only:!1,check_appear_throttle_time:300,url_rewriter_fn:g,no_fake_img_loader:!1,placeholder_data_img:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC\",placeholder_real_img:\"http://ditu.baidu.cn/yyfm/lazyload/0.0.1/img/placeholder.png\"};f=function(){var a=Object.prototype.toString;return function(b){return a.call(b).replace(\"[object \",\"\").replace(\"]\",\"\")}}(),a.fn.hasOwnProperty(\"lazyload\")||(a.fn.lazyload=function(b){var i,j,k,h=this;return a.isPlainObject(b)||(b={}),a.each(e,function(g,h){var i=f(b[g]);-1!=a.inArray(g,[\"threshold\",\"failure_limit\",\"check_appear_throttle_time\"])?\"String\"==i?b[g]=parseInt(b[g],10):\"Number\"!=i&&(b[g]=h):\"container\"==g?(b._$container=b.hasOwnProperty(g)?b[g]==c||b[g]==document?d:a(b[g]):d,delete b.container):!e.hasOwnProperty(g)||b.hasOwnProperty(g)&&i==f(e[g])||(b[g]=h)}),i=\"scroll\"==b.event,k=0==b.check_appear_throttle_time?l:n(l,b.check_appear_throttle_time),j=i||\"scrollstart\"==b.event||\"scrollstop\"==b.event,h.each(function(c){var e=this,f=h.eq(c),i=f.attr(\"src\"),k=f.attr(\"data-\"+b.data_attribute),l=b.url_rewriter_fn==g?k:b.url_rewriter_fn.call(e,f,k),n=f.attr(\"data-\"+b.data_srcset_attribute),o=f.is(\"img\");return 1==f._lazyload_loadStarted||i==l?(f._lazyload_loadStarted=!0,h=m(h),void 0):(f._lazyload_loadStarted=!1,o&&!i&&f.one(\"error\",function(){f.attr(\"src\",b.placeholder_real_img)}).attr(\"src\",b.placeholder_data_img),f.one(\"_lazyload_appear\",function(){function i(){d&&f.hide(),o?(n&&f.attr(\"srcset\",n),l&&f.attr(\"src\",l)):f.css(\"background-image\",'url(\"'+l+'\")'),d&&f[b.effect].apply(f,c?b.effect_params:[]),h=m(h)}var d,c=a.isArray(b.effect_params);f._lazyload_loadStarted||(d=\"show\"!=b.effect&&a.fn[b.effect]&&(!b.effect_params||c&&0==b.effect_params.length),b.appear!=g&&b.appear.call(e,f,h.length,b),f._lazyload_loadStarted=!0,b.no_fake_img_loader||n?(b.load!=g&&f.one(\"load\",function(){b.load.call(e,f,h.length,b)}),i()):a(\"<img>\").one(\"load\",function(){i(),b.load!=g&&b.load.call(e,f,h.length,b)}).attr(\"src\",l))}),j||f.on(b.event,function(){f._lazyload_loadStarted||f.trigger(\"_lazyload_appear\")}),void 0)}),j&&b._$container.on(b.event,function(){k(h,b)}),d.on(\"resize load\",function(){k(h,b)}),a(function(){k(h,b)}),this})});</=0&&f.height()<=0||\"none\"===f.css(\"display\")))if(b.vertical_only)if(j(f,b));else></=a.offset().top-b.threshold}function>"},{"_content":"/******/\n(function(modules) { // webpackBootstrap\n  /******/ // The module cache\n  /******/\n  var installedModules = {};\n  /******/\n  /******/ // The require function\n  /******/\n  function __webpack_require__(moduleId) {\n    /******/\n    /******/ // Check if module is in cache\n    /******/\n    if (installedModules[moduleId])\n    /******/\n      return installedModules[moduleId].exports;\n    /******/\n    /******/ // Create a new module (and put it into the cache)\n    /******/\n    var module = installedModules[moduleId] = {\n      /******/\n      exports: {},\n      /******/\n      id: moduleId,\n      /******/\n      loaded: false\n        /******/\n    };\n    /******/\n    /******/ // Execute the module function\n    /******/\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n    /******/ // Flag the module as loaded\n    /******/\n    module.loaded = true;\n    /******/\n    /******/ // Return the exports of the module\n    /******/\n    return module.exports;\n    /******/\n  }\n  /******/\n  /******/\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/\n  __webpack_require__.m = modules;\n  /******/\n  /******/ // expose the module cache\n  /******/\n  __webpack_require__.c = installedModules;\n  /******/\n  /******/ // __webpack_public_path__\n  /******/\n  __webpack_require__.p = \"/dist/\";\n  /******/\n  /******/ // Load entry module and return exports\n  /******/\n  return __webpack_require__(0);\n  /******/\n})\n/************************************************************************/\n/******/\n([\n  /* 0 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    'use strict';\n\n    __webpack_require__(1);\n\n    var _view = __webpack_require__(2);\n\n    var _view2 = _interopRequireDefault(_view);\n\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    var _collection = [];\n    var _count = 0;\n    var searchData;\n\n    function addMask(elem) {\n      var rect = elem.getBoundingClientRect();\n      var style = getComputedStyle(elem, null);\n\n      var mask = document.createElement('i');\n      mask.className = 'icon-film';\n      mask.style.color = '#fff';\n      mask.style.fontSize = '26px';\n      mask.style.position = 'absolute';\n      mask.style.right = '10px';\n      mask.style.bottom = '10px';\n      mask.style.zIndex = 1;\n      elem.parentNode.appendChild(mask);\n    }\n\n    var createVideoIncon = function createVideoIncon() {\n      var $videoImg = document.querySelectorAll('.thumb a[data-type=\"video\"]');\n      for (var i = 0, len = $videoImg.length; i < len; i++) {\n        addMask($videoImg[i]);\n      }\n    };\n    var render = function render(res) {\n      var ulTmpl = \"\";\n      for (var j = 0, len2 = res.list.length; j < len2; j++) {\n        var data = res.list[j].arr;\n        var liTmpl = \"\";\n        for (var i = 0, len = data.link.length; i < len; i++) {\n          var minSrc = 'https://github.com/aikaiqiang/aikq-blog-comments/tree/master/min_photos/' + data.link[i];\n          var src = 'https://github.com/aikaiqiang/aikq-blog-comments/tree/master/photos/' + data.link[i];\n          var type = data.type[i];\n          var target = src + (type === 'video' ? '.mp4' : '.jpg');\n          src += '';\n\n          liTmpl += '<figure class=\"thumb\" itemprop=\"associatedMedia\" itemscope=\"\" itemtype=\"http://schema.org/ImageObject\">\\\n                <a href=\"' + src + '\" itemprop=\"contentUrl\" data-size=\"1080x1080\" data-type=\"' + type + '\" data-target=\"' + src + '\">\\\n                  <img class=\"reward-img\" data-type=\"' + type + '\" data-src=\"' + minSrc + '\" src=\"/assets/img/empty.png\" itemprop=\"thumbnail\" onload=\"lzld(this)\">\\\n                </a>\\\n                <figcaption style=\"display:none\" itemprop=\"caption description\">' + data.text[i] + '</figcaption>\\\n            </figure>';\n        }\n        ulTmpl = ulTmpl + '<section class=\"archives album\"><h1 class=\"year\">' + data.year + '年<em>' + data.month + '月</em></h1>\\\n        <ul class=\"img-box-ul\">' + liTmpl + '</ul>\\\n        </section>';\n      }\n      document.querySelector('.instagram').innerHTML = '<div class=\"photos\" itemscope=\"\" itemtype=\"http://schema.org/ImageGallery\">' + ulTmpl + '</div>';\n      createVideoIncon();\n      _view2.default.init();\n    };\n\n    var replacer = function replacer(str) {\n      var arr = str.split(\"/\");\n      return \"/assets/ins/\" + arr[arr.length - 1];\n    };\n\n    var ctrler = function ctrler(data) {\n      var imgObj = {};\n      for (var i = 0, len = data.length; i < len; i++) {\n        var y = data[i].y;\n        var m = data[i].m;\n        var src = replacer(data[i].src);\n        var text = data[i].text;\n        var key = y + \"\" + ((m + \"\").length == 1 ? \"0\" + m : m);\n        if (imgObj[key]) {\n          imgObj[key].srclist.push(src);\n          imgObj[key].text.push(text);\n        } else {\n          imgObj[key] = {\n            year: y,\n            month: m,\n            srclist: [src],\n            text: [text]\n          };\n        }\n      }\n      render(imgObj);\n    };\n\n    function loadData(success) {\n      if (!searchData) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', './data.json?t=' + +new Date(), true);\n\n        xhr.onload = function() {\n          if (this.status >= 200 && this.status < 300) {\n            var res = JSON.parse(this.response);\n            searchData = res;\n            success(searchData);\n          } else {\n            console.error(this.statusText);\n          }\n        };\n\n        xhr.onerror = function() {\n          console.error(this.statusText);\n        };\n\n        xhr.send();\n      } else {\n        success(searchData);\n      }\n    }\n\n    var Ins = {\n      init: function init() {\n        loadData(function(data) {\n          render(data);\n        });\n      }\n    };\n\n    Ins.init();\n\n    // export default impush;\n\n    /***/\n  },\n  /* 1 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      'use strict';\n\n      var inViewport = __webpack_require__(3);\n      var lazyAttrs = ['data-src'];\n\n      global.lzld = lazyload();\n\n      // Provide libs using getAttribute early to get the good src\n      // and not the fake data-src\n      replaceGetAttribute('Image');\n      replaceGetAttribute('IFrame');\n\n      function registerLazyAttr(attr) {\n        if (indexOf.call(lazyAttrs, attr) === -1) {\n          lazyAttrs.push(attr);\n        }\n      }\n\n      function lazyload(opts) {\n        opts = merge({\n          'offset': 333,\n          'src': 'data-src',\n          'container': false\n        }, opts || {});\n\n        if (typeof opts.src === 'string') {\n          registerLazyAttr(opts.src);\n        }\n\n        var elts = [];\n\n        function show(elt) {\n          var src = findRealSrc(elt);\n\n          if (src) {\n            elt.src = src;\n          }\n\n          elt.setAttribute('data-lzled', true);\n          elts[indexOf.call(elts, elt)] = null;\n        }\n\n        function findRealSrc(elt) {\n          if (typeof opts.src === 'function') {\n            return opts.src(elt);\n          }\n\n          return elt.getAttribute(opts.src);\n        }\n\n        function register(elt) {\n          elt.onload = null;\n          elt.removeAttribute('onload');\n          elt.onerror = null;\n          elt.removeAttribute('onerror');\n\n          if (indexOf.call(elts, elt) === -1) {\n            inViewport(elt, opts, show);\n          }\n        }\n\n        return register;\n      }\n\n      function replaceGetAttribute(elementName) {\n        var fullname = 'HTML' + elementName + 'Element';\n        if (fullname in global === false) {\n          return;\n        }\n\n        var original = global[fullname].prototype.getAttribute;\n        global[fullname].prototype.getAttribute = function(name) {\n          if (name === 'src') {\n            var realSrc;\n            for (var i = 0, max = lazyAttrs.length; i < max; i++) {\n              realSrc = original.call(this, lazyAttrs[i]);\n              if (realSrc) {\n                break;\n              }\n            }\n\n            return realSrc || original.call(this, name);\n          }\n\n          // our own lazyloader will go through theses lines\n          // because we use getAttribute(opts.src)\n          return original.call(this, name);\n        };\n      }\n\n      function merge(defaults, opts) {\n        for (var name in defaults) {\n          if (opts[name] === undefined) {\n            opts[name] = defaults[name];\n          }\n        }\n\n        return opts;\n      }\n\n      // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html\n      function indexOf(value) {\n        for (var i = this.length; i-- && this[i] !== value;) {}\n        return i;\n      }\n\n      module.exports = lazyload;\n\n      // export default impush;\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  },\n  /* 2 */\n  /***/\n  function(module, exports) {\n\n    'use strict';\n\n    var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) {\n\n      // parse slide data (url, title, size ...) from DOM elements \n      // (children of gallerySelector)\n      var parseThumbnailElements = function parseThumbnailElements(el) {\n        el = el.parentNode.parentNode;\n        var thumbElements = el.getElementsByClassName('thumb'),\n          numNodes = thumbElements.length,\n          items = [],\n          figureEl,\n          linkEl,\n          size,\n          type,\n          // video or not\n          target,\n          item;\n\n        for (var i = 0; i < numNodes; i++) {\n\n          figureEl = thumbElements[i]; // \n\n          // include only element nodes \n          if (figureEl.nodeType !== 1) {\n            continue;\n          }\n\n          linkEl = figureEl.children[0]; // \n\n          size = linkEl.getAttribute('data-size').split('x');\n          type = linkEl.getAttribute('data-type');\n          target = linkEl.getAttribute('data-target');\n          // create slide object\n          item = {\n            src: linkEl.getAttribute('href'),\n            w: parseInt(size[0], 10),\n            h: parseInt(size[1], 10)\n          };\n\n          if (figureEl.children.length > 1) {\n            item.title = figureEl.children[1].innerHTML;\n          }\n\n          if (linkEl.children.length > 0) {\n            item.msrc = linkEl.children[0].getAttribute('src');\n            item.type = type;\n            item.target = target;\n            item.html = '<video src=\"' + target + '\" controls=\"controls\" autoplay=\"autoplay\"></video>';\n            if (type === 'video') {\n              //item.src = null;\n            }\n          }\n\n          item.el = figureEl; // save link to element for getThumbBoundsFn\n          items.push(item);\n        }\n\n        return items;\n      };\n\n      // find nearest parent element\n      var closest = function closest(el, fn) {\n        return el && (fn(el) ? el : closest(el.parentNode, fn));\n      };\n\n      // triggers when user clicks on thumbnail\n      var onThumbnailsClick = function onThumbnailsClick(e) {\n        e = e || window.event;\n        e.preventDefault ? e.preventDefault() : e.returnValue = false;\n\n        var eTarget = e.target || e.srcElement;\n\n        // find root element of slide\n        var clickedListItem = closest(eTarget, function(el) {\n          return el.tagName && el.tagName.toUpperCase() === 'FIGURE';\n        });\n\n        if (!clickedListItem) {\n          return;\n        }\n\n        // find index of clicked item by looping through all child nodes\n        // alternatively, you may define index via data- attribute\n        var clickedGallery = clickedListItem.parentNode,\n\n          // childNodes = clickedListItem.parentNode.childNodes,\n          // numChildNodes = childNodes.length,\n          childNodes = document.getElementsByClassName('thumb'),\n          numChildNodes = childNodes.length,\n          nodeIndex = 0,\n          index;\n\n        for (var i = 0; i < numChildNodes; i++) {\n          if (childNodes[i].nodeType !== 1) {\n            continue;\n          }\n\n          if (childNodes[i] === clickedListItem) {\n            index = nodeIndex;\n            break;\n          }\n          nodeIndex++;\n        }\n\n        if (index >= 0) {\n          // open PhotoSwipe if valid index found\n          openPhotoSwipe(index, clickedGallery);\n        }\n        return false;\n      };\n\n      // parse picture index and gallery index from URL (#&pid=1&gid=2)\n      var photoswipeParseHash = function photoswipeParseHash() {\n        var hash = window.location.hash.substring(1),\n          params = {};\n\n        if (hash.length < 5) {\n          return params;\n        }\n\n        var vars = hash.split('&');\n        for (var i = 0; i < vars.length; i++) {\n          if (!vars[i]) {\n            continue;\n          }\n          var pair = vars[i].split('=');\n          if (pair.length < 2) {\n            continue;\n          }\n          params[pair[0]] = pair[1];\n        }\n\n        if (params.gid) {\n          params.gid = parseInt(params.gid, 10);\n        }\n\n        return params;\n      };\n\n      var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) {\n        var pswpElement = document.querySelectorAll('.pswp')[0],\n          gallery,\n          options,\n          items;\n\n        items = parseThumbnailElements(galleryElement);\n        // define options (if needed)\n        options = {\n\n          // define gallery index (for URL)\n          galleryUID: galleryElement.getAttribute('data-pswp-uid'),\n\n          getThumbBoundsFn: function getThumbBoundsFn(index) {\n            // See Options -> getThumbBoundsFn section of documentation for more info\n            var thumbnail = items[index].el.getElementsByTagName('img')[0],\n              // find thumbnail\n              pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n              rect = thumbnail.getBoundingClientRect();\n\n            return {\n              x: rect.left,\n              y: rect.top + pageYScroll,\n              w: rect.width\n            };\n          }\n\n        };\n\n        // PhotoSwipe opened from URL\n        if (fromURL) {\n          if (options.galleryPIDs) {\n            // parse real index when custom PIDs are used \n            // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\n            for (var j = 0; j < items.length; j++) {\n              if (items[j].pid == index) {\n                options.index = j;\n                break;\n              }\n            }\n          } else {\n            // in URL indexes start from 1\n            options.index = parseInt(index, 10) - 1;\n          }\n        } else {\n          options.index = parseInt(index, 10);\n        }\n\n        // exit if index not found\n        if (isNaN(options.index)) {\n          return;\n        }\n\n        if (disableAnimation) {\n          options.showAnimationDuration = 0;\n        }\n\n        // Pass data to PhotoSwipe and initialize it\n        gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\n        gallery.init();\n\n        var $tempVideo;\n        var stopVideoHandle = function stopVideoHandle() {\n          if ($tempVideo) {\n            $tempVideo.remove();\n            $tempVideo = null;\n          }\n        };\n        var changeHandle = function changeHandle() {\n          var item = gallery.currItem;\n          stopVideoHandle();\n          if (item.type === 'video') {\n            var $ctn = item.container;\n            var style = $ctn.getElementsByClassName('pswp__img')[0].style;\n            var $video = document.createElement('video');\n            $video.setAttribute('autoplay', 'autoplay');\n            $video.setAttribute('controls', 'controls');\n            $video.setAttribute('src', item.target);\n            $video.style.width = style.width;\n            $video.style.height = style.height;\n            $video.style.position = 'absolute';\n            $video.style.zIndex = 2;\n            $tempVideo = $video;\n            $ctn.appendChild($video);\n          }\n        };\n        gallery.listen('initialZoomIn', changeHandle);\n        gallery.listen('afterChange', changeHandle);\n        gallery.listen('initialZoomOut', stopVideoHandle);\n      };\n\n      // loop through all gallery elements and bind events\n      var galleryElements = document.querySelectorAll(gallerySelector);\n      for (var i = 0, l = galleryElements.length; i < l; i++) {\n        galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n        galleryElements[i].onclick = onThumbnailsClick;\n      }\n\n      // Parse URL and open gallery if it contains #&pid=3&gid=1\n      var hashData = photoswipeParseHash();\n      if (hashData.pid && hashData.gid) {\n        openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);\n      }\n    };\n\n    var Viewer = function() {\n      function init() {\n        initPhotoSwipeFromDOM('.photos');\n      }\n      return {\n        init: init\n      };\n    }();\n\n    module.exports = Viewer;\n\n    /***/\n  },\n  /* 3 */\n  /***/\n  function(module, exports) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      module.exports = inViewport;\n\n      var instances = [];\n      var supportsMutationObserver = typeof global.MutationObserver === 'function';\n\n      function inViewport(elt, params, cb) {\n        var opts = {\n          container: global.document.body,\n          offset: 0\n        };\n\n        if (params === undefined || typeof params === 'function') {\n          cb = params;\n          params = {};\n        }\n\n        var container = opts.container = params.container || opts.container;\n        var offset = opts.offset = params.offset || opts.offset;\n\n        for (var i = 0; i < instances.length; i++) {\n          if (instances[i].container === container) {\n            return instances[i].isInViewport(elt, offset, cb);\n          }\n        }\n\n        return instances[\n          instances.push(createInViewport(container)) - 1\n        ].isInViewport(elt, offset, cb);\n      }\n\n      function addEvent(el, type, fn) {\n        if (el.attachEvent) {\n          el.attachEvent('on' + type, fn);\n        } else {\n          el.addEventListener(type, fn, false);\n        }\n      }\n\n      function debounce(func, wait, immediate) {\n        var timeout;\n        return function() {\n          var context = this,\n            args = arguments;\n          var callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n          if (callNow) func.apply(context, args);\n\n          function later() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n          }\n        };\n      }\n\n      // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708\n      var contains = function() {\n        if (!global.document) {\n          return true;\n        }\n        return global.document.documentElement.compareDocumentPosition ?\n          function(a, b) {\n            return !!(a.compareDocumentPosition(b) & 16);\n          } :\n          global.document.documentElement.contains ?\n          function(a, b) {\n            return a !== b && (a.contains ? a.contains(b) : false);\n          } :\n          function(a, b) {\n            while (b = b.parentNode) {\n              if (b === a) {\n                return true;\n              }\n            }\n            return false;\n          };\n      }\n\n      function createInViewport(container) {\n        var watches = createWatches();\n\n        var scrollContainer = container === global.document.body ? global : container;\n        var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15);\n\n        addEvent(scrollContainer, 'scroll', debouncedCheck);\n\n        if (scrollContainer === global) {\n          addEvent(global, 'resize', debouncedCheck);\n        }\n\n        if (supportsMutationObserver) {\n          observeDOM(watches, container, debouncedCheck);\n        }\n\n        // failsafe check, every 200ms we check for visible images\n        // usecase: a hidden parent containing eleements\n        // when the parent becomes visible, we have no event that the children\n        // became visible\n        setInterval(debouncedCheck, 150);\n\n        function isInViewport(elt, offset, cb) {\n          if (!cb) {\n            return isVisible(elt, offset);\n          }\n\n          var remote = createRemote(elt, offset, cb);\n          remote.watch();\n          return remote;\n        }\n\n        function createRemote(elt, offset, cb) {\n          function watch() {\n            watches.add(elt, offset, cb);\n          }\n\n          function dispose() {\n            watches.remove(elt);\n          }\n\n          return {\n            watch: watch,\n            dispose: dispose\n          };\n        }\n\n        function watchInViewport(elt, offset, cb) {\n          if (isVisible(elt, offset)) {\n            watches.remove(elt);\n            cb(elt);\n          }\n        }\n\n        function isVisible(elt, offset) {\n          if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) {\n            return false;\n          }\n\n          // Check if the element is visible\n          // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js\n          if (!elt.offsetWidth || !elt.offsetHeight) {\n            return false;\n          }\n\n          var eltRect = elt.getBoundingClientRect();\n          var viewport = {};\n\n          if (container === global.document.body) {\n            viewport = {\n              top: -offset,\n              left: -offset,\n              right: global.document.documentElement.clientWidth + offset,\n              bottom: global.document.documentElement.clientHeight + offset\n            };\n          } else {\n            var containerRect = container.getBoundingClientRect();\n            viewport = {\n              top: containerRect.top - offset,\n              left: containerRect.left - offset,\n              right: containerRect.right + offset,\n              bottom: containerRect.bottom + offset\n            };\n          }\n\n          // The element must overlap with the visible part of the viewport\n          var visible =\n            (\n              (eltRect.right > viewport.left) &&\n              (eltRect.left < viewport.right) &&\n              (eltRect.bottom > viewport.top) &&\n              (eltRect.top < viewport.bottom)\n            );\n\n          return visible;\n        }\n\n        return {\n          container: container,\n          isInViewport: isInViewport\n        };\n      }\n\n      function createWatches() {\n        var watches = [];\n\n        function add(elt, offset, cb) {\n          if (!isWatched(elt)) {\n            watches.push([elt, offset, cb]);\n          }\n        }\n\n        function remove(elt) {\n          var pos = indexOf(elt);\n          if (pos !== -1) {\n            watches.splice(pos, 1);\n          }\n        }\n\n        function indexOf(elt) {\n          for (var i = watches.length - 1; i >= 0; i--) {\n            if (watches[i][0] === elt) {\n              return i;\n            }\n          }\n          return -1;\n        }\n\n        function isWatched(elt) {\n          return indexOf(elt) !== -1;\n        }\n\n        function checkAll(cb) {\n          return function() {\n            for (var i = watches.length - 1; i >= 0; i--) {\n              cb.apply(this, watches[i]);\n            }\n          };\n        }\n\n        return {\n          add: add,\n          remove: remove,\n          isWatched: isWatched,\n          checkAll: checkAll\n        };\n      }\n\n      function observeDOM(watches, container, cb) {\n        var observer = new MutationObserver(watch);\n        var filter = Array.prototype.filter;\n        var concat = Array.prototype.concat;\n\n        observer.observe(container, {\n          childList: true,\n          subtree: true,\n          // changes like style/width/height/display will be catched\n          attributes: true\n        });\n\n        function watch(mutations) {\n          // some new DOM nodes where previously watched\n          // we should check their positions\n          if (mutations.some(knownNodes) === true) {\n            setTimeout(cb, 0);\n          }\n        }\n\n        function knownNodes(mutation) {\n          var nodes = concat.call([],\n            Array.prototype.slice.call(mutation.addedNodes),\n            mutation.target\n          );\n          return filter.call(nodes, watches.isWatched).length > 0;\n        }\n      }\n\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  }\n  /******/\n]);","source":"photos/ins.js","raw":"/******/\n(function(modules) { // webpackBootstrap\n  /******/ // The module cache\n  /******/\n  var installedModules = {};\n  /******/\n  /******/ // The require function\n  /******/\n  function __webpack_require__(moduleId) {\n    /******/\n    /******/ // Check if module is in cache\n    /******/\n    if (installedModules[moduleId])\n    /******/\n      return installedModules[moduleId].exports;\n    /******/\n    /******/ // Create a new module (and put it into the cache)\n    /******/\n    var module = installedModules[moduleId] = {\n      /******/\n      exports: {},\n      /******/\n      id: moduleId,\n      /******/\n      loaded: false\n        /******/\n    };\n    /******/\n    /******/ // Execute the module function\n    /******/\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n    /******/ // Flag the module as loaded\n    /******/\n    module.loaded = true;\n    /******/\n    /******/ // Return the exports of the module\n    /******/\n    return module.exports;\n    /******/\n  }\n  /******/\n  /******/\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/\n  __webpack_require__.m = modules;\n  /******/\n  /******/ // expose the module cache\n  /******/\n  __webpack_require__.c = installedModules;\n  /******/\n  /******/ // __webpack_public_path__\n  /******/\n  __webpack_require__.p = \"/dist/\";\n  /******/\n  /******/ // Load entry module and return exports\n  /******/\n  return __webpack_require__(0);\n  /******/\n})\n/************************************************************************/\n/******/\n([\n  /* 0 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    'use strict';\n\n    __webpack_require__(1);\n\n    var _view = __webpack_require__(2);\n\n    var _view2 = _interopRequireDefault(_view);\n\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    var _collection = [];\n    var _count = 0;\n    var searchData;\n\n    function addMask(elem) {\n      var rect = elem.getBoundingClientRect();\n      var style = getComputedStyle(elem, null);\n\n      var mask = document.createElement('i');\n      mask.className = 'icon-film';\n      mask.style.color = '#fff';\n      mask.style.fontSize = '26px';\n      mask.style.position = 'absolute';\n      mask.style.right = '10px';\n      mask.style.bottom = '10px';\n      mask.style.zIndex = 1;\n      elem.parentNode.appendChild(mask);\n    }\n\n    var createVideoIncon = function createVideoIncon() {\n      var $videoImg = document.querySelectorAll('.thumb a[data-type=\"video\"]');\n      for (var i = 0, len = $videoImg.length; i < len; i++) {\n        addMask($videoImg[i]);\n      }\n    };\n    var render = function render(res) {\n      var ulTmpl = \"\";\n      for (var j = 0, len2 = res.list.length; j < len2; j++) {\n        var data = res.list[j].arr;\n        var liTmpl = \"\";\n        for (var i = 0, len = data.link.length; i < len; i++) {\n          var minSrc = 'https://github.com/aikaiqiang/aikq-blog-comments/tree/master/min_photos/' + data.link[i];\n          var src = 'https://github.com/aikaiqiang/aikq-blog-comments/tree/master/photos/' + data.link[i];\n          var type = data.type[i];\n          var target = src + (type === 'video' ? '.mp4' : '.jpg');\n          src += '';\n\n          liTmpl += '<figure class=\"thumb\" itemprop=\"associatedMedia\" itemscope=\"\" itemtype=\"http://schema.org/ImageObject\">\\\n                <a href=\"' + src + '\" itemprop=\"contentUrl\" data-size=\"1080x1080\" data-type=\"' + type + '\" data-target=\"' + src + '\">\\\n                  <img class=\"reward-img\" data-type=\"' + type + '\" data-src=\"' + minSrc + '\" src=\"/assets/img/empty.png\" itemprop=\"thumbnail\" onload=\"lzld(this)\">\\\n                </a>\\\n                <figcaption style=\"display:none\" itemprop=\"caption description\">' + data.text[i] + '</figcaption>\\\n            </figure>';\n        }\n        ulTmpl = ulTmpl + '<section class=\"archives album\"><h1 class=\"year\">' + data.year + '年<em>' + data.month + '月</em></h1>\\\n        <ul class=\"img-box-ul\">' + liTmpl + '</ul>\\\n        </section>';\n      }\n      document.querySelector('.instagram').innerHTML = '<div class=\"photos\" itemscope=\"\" itemtype=\"http://schema.org/ImageGallery\">' + ulTmpl + '</div>';\n      createVideoIncon();\n      _view2.default.init();\n    };\n\n    var replacer = function replacer(str) {\n      var arr = str.split(\"/\");\n      return \"/assets/ins/\" + arr[arr.length - 1];\n    };\n\n    var ctrler = function ctrler(data) {\n      var imgObj = {};\n      for (var i = 0, len = data.length; i < len; i++) {\n        var y = data[i].y;\n        var m = data[i].m;\n        var src = replacer(data[i].src);\n        var text = data[i].text;\n        var key = y + \"\" + ((m + \"\").length == 1 ? \"0\" + m : m);\n        if (imgObj[key]) {\n          imgObj[key].srclist.push(src);\n          imgObj[key].text.push(text);\n        } else {\n          imgObj[key] = {\n            year: y,\n            month: m,\n            srclist: [src],\n            text: [text]\n          };\n        }\n      }\n      render(imgObj);\n    };\n\n    function loadData(success) {\n      if (!searchData) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', './data.json?t=' + +new Date(), true);\n\n        xhr.onload = function() {\n          if (this.status >= 200 && this.status < 300) {\n            var res = JSON.parse(this.response);\n            searchData = res;\n            success(searchData);\n          } else {\n            console.error(this.statusText);\n          }\n        };\n\n        xhr.onerror = function() {\n          console.error(this.statusText);\n        };\n\n        xhr.send();\n      } else {\n        success(searchData);\n      }\n    }\n\n    var Ins = {\n      init: function init() {\n        loadData(function(data) {\n          render(data);\n        });\n      }\n    };\n\n    Ins.init();\n\n    // export default impush;\n\n    /***/\n  },\n  /* 1 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      'use strict';\n\n      var inViewport = __webpack_require__(3);\n      var lazyAttrs = ['data-src'];\n\n      global.lzld = lazyload();\n\n      // Provide libs using getAttribute early to get the good src\n      // and not the fake data-src\n      replaceGetAttribute('Image');\n      replaceGetAttribute('IFrame');\n\n      function registerLazyAttr(attr) {\n        if (indexOf.call(lazyAttrs, attr) === -1) {\n          lazyAttrs.push(attr);\n        }\n      }\n\n      function lazyload(opts) {\n        opts = merge({\n          'offset': 333,\n          'src': 'data-src',\n          'container': false\n        }, opts || {});\n\n        if (typeof opts.src === 'string') {\n          registerLazyAttr(opts.src);\n        }\n\n        var elts = [];\n\n        function show(elt) {\n          var src = findRealSrc(elt);\n\n          if (src) {\n            elt.src = src;\n          }\n\n          elt.setAttribute('data-lzled', true);\n          elts[indexOf.call(elts, elt)] = null;\n        }\n\n        function findRealSrc(elt) {\n          if (typeof opts.src === 'function') {\n            return opts.src(elt);\n          }\n\n          return elt.getAttribute(opts.src);\n        }\n\n        function register(elt) {\n          elt.onload = null;\n          elt.removeAttribute('onload');\n          elt.onerror = null;\n          elt.removeAttribute('onerror');\n\n          if (indexOf.call(elts, elt) === -1) {\n            inViewport(elt, opts, show);\n          }\n        }\n\n        return register;\n      }\n\n      function replaceGetAttribute(elementName) {\n        var fullname = 'HTML' + elementName + 'Element';\n        if (fullname in global === false) {\n          return;\n        }\n\n        var original = global[fullname].prototype.getAttribute;\n        global[fullname].prototype.getAttribute = function(name) {\n          if (name === 'src') {\n            var realSrc;\n            for (var i = 0, max = lazyAttrs.length; i < max; i++) {\n              realSrc = original.call(this, lazyAttrs[i]);\n              if (realSrc) {\n                break;\n              }\n            }\n\n            return realSrc || original.call(this, name);\n          }\n\n          // our own lazyloader will go through theses lines\n          // because we use getAttribute(opts.src)\n          return original.call(this, name);\n        };\n      }\n\n      function merge(defaults, opts) {\n        for (var name in defaults) {\n          if (opts[name] === undefined) {\n            opts[name] = defaults[name];\n          }\n        }\n\n        return opts;\n      }\n\n      // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html\n      function indexOf(value) {\n        for (var i = this.length; i-- && this[i] !== value;) {}\n        return i;\n      }\n\n      module.exports = lazyload;\n\n      // export default impush;\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  },\n  /* 2 */\n  /***/\n  function(module, exports) {\n\n    'use strict';\n\n    var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) {\n\n      // parse slide data (url, title, size ...) from DOM elements \n      // (children of gallerySelector)\n      var parseThumbnailElements = function parseThumbnailElements(el) {\n        el = el.parentNode.parentNode;\n        var thumbElements = el.getElementsByClassName('thumb'),\n          numNodes = thumbElements.length,\n          items = [],\n          figureEl,\n          linkEl,\n          size,\n          type,\n          // video or not\n          target,\n          item;\n\n        for (var i = 0; i < numNodes; i++) {\n\n          figureEl = thumbElements[i]; // \n\n          // include only element nodes \n          if (figureEl.nodeType !== 1) {\n            continue;\n          }\n\n          linkEl = figureEl.children[0]; // \n\n          size = linkEl.getAttribute('data-size').split('x');\n          type = linkEl.getAttribute('data-type');\n          target = linkEl.getAttribute('data-target');\n          // create slide object\n          item = {\n            src: linkEl.getAttribute('href'),\n            w: parseInt(size[0], 10),\n            h: parseInt(size[1], 10)\n          };\n\n          if (figureEl.children.length > 1) {\n            item.title = figureEl.children[1].innerHTML;\n          }\n\n          if (linkEl.children.length > 0) {\n            item.msrc = linkEl.children[0].getAttribute('src');\n            item.type = type;\n            item.target = target;\n            item.html = '<video src=\"' + target + '\" controls=\"controls\" autoplay=\"autoplay\"></video>';\n            if (type === 'video') {\n              //item.src = null;\n            }\n          }\n\n          item.el = figureEl; // save link to element for getThumbBoundsFn\n          items.push(item);\n        }\n\n        return items;\n      };\n\n      // find nearest parent element\n      var closest = function closest(el, fn) {\n        return el && (fn(el) ? el : closest(el.parentNode, fn));\n      };\n\n      // triggers when user clicks on thumbnail\n      var onThumbnailsClick = function onThumbnailsClick(e) {\n        e = e || window.event;\n        e.preventDefault ? e.preventDefault() : e.returnValue = false;\n\n        var eTarget = e.target || e.srcElement;\n\n        // find root element of slide\n        var clickedListItem = closest(eTarget, function(el) {\n          return el.tagName && el.tagName.toUpperCase() === 'FIGURE';\n        });\n\n        if (!clickedListItem) {\n          return;\n        }\n\n        // find index of clicked item by looping through all child nodes\n        // alternatively, you may define index via data- attribute\n        var clickedGallery = clickedListItem.parentNode,\n\n          // childNodes = clickedListItem.parentNode.childNodes,\n          // numChildNodes = childNodes.length,\n          childNodes = document.getElementsByClassName('thumb'),\n          numChildNodes = childNodes.length,\n          nodeIndex = 0,\n          index;\n\n        for (var i = 0; i < numChildNodes; i++) {\n          if (childNodes[i].nodeType !== 1) {\n            continue;\n          }\n\n          if (childNodes[i] === clickedListItem) {\n            index = nodeIndex;\n            break;\n          }\n          nodeIndex++;\n        }\n\n        if (index >= 0) {\n          // open PhotoSwipe if valid index found\n          openPhotoSwipe(index, clickedGallery);\n        }\n        return false;\n      };\n\n      // parse picture index and gallery index from URL (#&pid=1&gid=2)\n      var photoswipeParseHash = function photoswipeParseHash() {\n        var hash = window.location.hash.substring(1),\n          params = {};\n\n        if (hash.length < 5) {\n          return params;\n        }\n\n        var vars = hash.split('&');\n        for (var i = 0; i < vars.length; i++) {\n          if (!vars[i]) {\n            continue;\n          }\n          var pair = vars[i].split('=');\n          if (pair.length < 2) {\n            continue;\n          }\n          params[pair[0]] = pair[1];\n        }\n\n        if (params.gid) {\n          params.gid = parseInt(params.gid, 10);\n        }\n\n        return params;\n      };\n\n      var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) {\n        var pswpElement = document.querySelectorAll('.pswp')[0],\n          gallery,\n          options,\n          items;\n\n        items = parseThumbnailElements(galleryElement);\n        // define options (if needed)\n        options = {\n\n          // define gallery index (for URL)\n          galleryUID: galleryElement.getAttribute('data-pswp-uid'),\n\n          getThumbBoundsFn: function getThumbBoundsFn(index) {\n            // See Options -> getThumbBoundsFn section of documentation for more info\n            var thumbnail = items[index].el.getElementsByTagName('img')[0],\n              // find thumbnail\n              pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n              rect = thumbnail.getBoundingClientRect();\n\n            return {\n              x: rect.left,\n              y: rect.top + pageYScroll,\n              w: rect.width\n            };\n          }\n\n        };\n\n        // PhotoSwipe opened from URL\n        if (fromURL) {\n          if (options.galleryPIDs) {\n            // parse real index when custom PIDs are used \n            // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\n            for (var j = 0; j < items.length; j++) {\n              if (items[j].pid == index) {\n                options.index = j;\n                break;\n              }\n            }\n          } else {\n            // in URL indexes start from 1\n            options.index = parseInt(index, 10) - 1;\n          }\n        } else {\n          options.index = parseInt(index, 10);\n        }\n\n        // exit if index not found\n        if (isNaN(options.index)) {\n          return;\n        }\n\n        if (disableAnimation) {\n          options.showAnimationDuration = 0;\n        }\n\n        // Pass data to PhotoSwipe and initialize it\n        gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\n        gallery.init();\n\n        var $tempVideo;\n        var stopVideoHandle = function stopVideoHandle() {\n          if ($tempVideo) {\n            $tempVideo.remove();\n            $tempVideo = null;\n          }\n        };\n        var changeHandle = function changeHandle() {\n          var item = gallery.currItem;\n          stopVideoHandle();\n          if (item.type === 'video') {\n            var $ctn = item.container;\n            var style = $ctn.getElementsByClassName('pswp__img')[0].style;\n            var $video = document.createElement('video');\n            $video.setAttribute('autoplay', 'autoplay');\n            $video.setAttribute('controls', 'controls');\n            $video.setAttribute('src', item.target);\n            $video.style.width = style.width;\n            $video.style.height = style.height;\n            $video.style.position = 'absolute';\n            $video.style.zIndex = 2;\n            $tempVideo = $video;\n            $ctn.appendChild($video);\n          }\n        };\n        gallery.listen('initialZoomIn', changeHandle);\n        gallery.listen('afterChange', changeHandle);\n        gallery.listen('initialZoomOut', stopVideoHandle);\n      };\n\n      // loop through all gallery elements and bind events\n      var galleryElements = document.querySelectorAll(gallerySelector);\n      for (var i = 0, l = galleryElements.length; i < l; i++) {\n        galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n        galleryElements[i].onclick = onThumbnailsClick;\n      }\n\n      // Parse URL and open gallery if it contains #&pid=3&gid=1\n      var hashData = photoswipeParseHash();\n      if (hashData.pid && hashData.gid) {\n        openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);\n      }\n    };\n\n    var Viewer = function() {\n      function init() {\n        initPhotoSwipeFromDOM('.photos');\n      }\n      return {\n        init: init\n      };\n    }();\n\n    module.exports = Viewer;\n\n    /***/\n  },\n  /* 3 */\n  /***/\n  function(module, exports) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      module.exports = inViewport;\n\n      var instances = [];\n      var supportsMutationObserver = typeof global.MutationObserver === 'function';\n\n      function inViewport(elt, params, cb) {\n        var opts = {\n          container: global.document.body,\n          offset: 0\n        };\n\n        if (params === undefined || typeof params === 'function') {\n          cb = params;\n          params = {};\n        }\n\n        var container = opts.container = params.container || opts.container;\n        var offset = opts.offset = params.offset || opts.offset;\n\n        for (var i = 0; i < instances.length; i++) {\n          if (instances[i].container === container) {\n            return instances[i].isInViewport(elt, offset, cb);\n          }\n        }\n\n        return instances[\n          instances.push(createInViewport(container)) - 1\n        ].isInViewport(elt, offset, cb);\n      }\n\n      function addEvent(el, type, fn) {\n        if (el.attachEvent) {\n          el.attachEvent('on' + type, fn);\n        } else {\n          el.addEventListener(type, fn, false);\n        }\n      }\n\n      function debounce(func, wait, immediate) {\n        var timeout;\n        return function() {\n          var context = this,\n            args = arguments;\n          var callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n          if (callNow) func.apply(context, args);\n\n          function later() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n          }\n        };\n      }\n\n      // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708\n      var contains = function() {\n        if (!global.document) {\n          return true;\n        }\n        return global.document.documentElement.compareDocumentPosition ?\n          function(a, b) {\n            return !!(a.compareDocumentPosition(b) & 16);\n          } :\n          global.document.documentElement.contains ?\n          function(a, b) {\n            return a !== b && (a.contains ? a.contains(b) : false);\n          } :\n          function(a, b) {\n            while (b = b.parentNode) {\n              if (b === a) {\n                return true;\n              }\n            }\n            return false;\n          };\n      }\n\n      function createInViewport(container) {\n        var watches = createWatches();\n\n        var scrollContainer = container === global.document.body ? global : container;\n        var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15);\n\n        addEvent(scrollContainer, 'scroll', debouncedCheck);\n\n        if (scrollContainer === global) {\n          addEvent(global, 'resize', debouncedCheck);\n        }\n\n        if (supportsMutationObserver) {\n          observeDOM(watches, container, debouncedCheck);\n        }\n\n        // failsafe check, every 200ms we check for visible images\n        // usecase: a hidden parent containing eleements\n        // when the parent becomes visible, we have no event that the children\n        // became visible\n        setInterval(debouncedCheck, 150);\n\n        function isInViewport(elt, offset, cb) {\n          if (!cb) {\n            return isVisible(elt, offset);\n          }\n\n          var remote = createRemote(elt, offset, cb);\n          remote.watch();\n          return remote;\n        }\n\n        function createRemote(elt, offset, cb) {\n          function watch() {\n            watches.add(elt, offset, cb);\n          }\n\n          function dispose() {\n            watches.remove(elt);\n          }\n\n          return {\n            watch: watch,\n            dispose: dispose\n          };\n        }\n\n        function watchInViewport(elt, offset, cb) {\n          if (isVisible(elt, offset)) {\n            watches.remove(elt);\n            cb(elt);\n          }\n        }\n\n        function isVisible(elt, offset) {\n          if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) {\n            return false;\n          }\n\n          // Check if the element is visible\n          // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js\n          if (!elt.offsetWidth || !elt.offsetHeight) {\n            return false;\n          }\n\n          var eltRect = elt.getBoundingClientRect();\n          var viewport = {};\n\n          if (container === global.document.body) {\n            viewport = {\n              top: -offset,\n              left: -offset,\n              right: global.document.documentElement.clientWidth + offset,\n              bottom: global.document.documentElement.clientHeight + offset\n            };\n          } else {\n            var containerRect = container.getBoundingClientRect();\n            viewport = {\n              top: containerRect.top - offset,\n              left: containerRect.left - offset,\n              right: containerRect.right + offset,\n              bottom: containerRect.bottom + offset\n            };\n          }\n\n          // The element must overlap with the visible part of the viewport\n          var visible =\n            (\n              (eltRect.right > viewport.left) &&\n              (eltRect.left < viewport.right) &&\n              (eltRect.bottom > viewport.top) &&\n              (eltRect.top < viewport.bottom)\n            );\n\n          return visible;\n        }\n\n        return {\n          container: container,\n          isInViewport: isInViewport\n        };\n      }\n\n      function createWatches() {\n        var watches = [];\n\n        function add(elt, offset, cb) {\n          if (!isWatched(elt)) {\n            watches.push([elt, offset, cb]);\n          }\n        }\n\n        function remove(elt) {\n          var pos = indexOf(elt);\n          if (pos !== -1) {\n            watches.splice(pos, 1);\n          }\n        }\n\n        function indexOf(elt) {\n          for (var i = watches.length - 1; i >= 0; i--) {\n            if (watches[i][0] === elt) {\n              return i;\n            }\n          }\n          return -1;\n        }\n\n        function isWatched(elt) {\n          return indexOf(elt) !== -1;\n        }\n\n        function checkAll(cb) {\n          return function() {\n            for (var i = watches.length - 1; i >= 0; i--) {\n              cb.apply(this, watches[i]);\n            }\n          };\n        }\n\n        return {\n          add: add,\n          remove: remove,\n          isWatched: isWatched,\n          checkAll: checkAll\n        };\n      }\n\n      function observeDOM(watches, container, cb) {\n        var observer = new MutationObserver(watch);\n        var filter = Array.prototype.filter;\n        var concat = Array.prototype.concat;\n\n        observer.observe(container, {\n          childList: true,\n          subtree: true,\n          // changes like style/width/height/display will be catched\n          attributes: true\n        });\n\n        function watch(mutations) {\n          // some new DOM nodes where previously watched\n          // we should check their positions\n          if (mutations.some(knownNodes) === true) {\n            setTimeout(cb, 0);\n          }\n        }\n\n        function knownNodes(mutation) {\n          var nodes = concat.call([],\n            Array.prototype.slice.call(mutation.addedNodes),\n            mutation.target\n          );\n          return filter.call(nodes, watches.isWatched).length > 0;\n        }\n      }\n\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  }\n  /******/\n]);","date":"2019-02-20T08:13:12.766Z","updated":"2019-02-20T08:13:12.736Z","path":"photos/ins.js","layout":"false","title":"","comments":1,"_id":"ck2vmvraw0029mgu58vm4cu0o","content":"/******/\n(function(modules) { // webpackBootstrap\n  /******/ // The module cache\n  /******/\n  var installedModules = {};\n  /******/\n  /******/ // The require function\n  /******/\n  function __webpack_require__(moduleId) {\n    /******/\n    /******/ // Check if module is in cache\n    /******/\n    if (installedModules[moduleId])\n    /******/\n      return installedModules[moduleId].exports;\n    /******/\n    /******/ // Create a new module (and put it into the cache)\n    /******/\n    var module = installedModules[moduleId] = {\n      /******/\n      exports: {},\n      /******/\n      id: moduleId,\n      /******/\n      loaded: false\n        /******/\n    };\n    /******/\n    /******/ // Execute the module function\n    /******/\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n    /******/ // Flag the module as loaded\n    /******/\n    module.loaded = true;\n    /******/\n    /******/ // Return the exports of the module\n    /******/\n    return module.exports;\n    /******/\n  }\n  /******/\n  /******/\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/\n  __webpack_require__.m = modules;\n  /******/\n  /******/ // expose the module cache\n  /******/\n  __webpack_require__.c = installedModules;\n  /******/\n  /******/ // __webpack_public_path__\n  /******/\n  __webpack_require__.p = \"/dist/\";\n  /******/\n  /******/ // Load entry module and return exports\n  /******/\n  return __webpack_require__(0);\n  /******/\n})\n/************************************************************************/\n/******/\n([\n  /* 0 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    'use strict';\n\n    __webpack_require__(1);\n\n    var _view = __webpack_require__(2);\n\n    var _view2 = _interopRequireDefault(_view);\n\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    var _collection = [];\n    var _count = 0;\n    var searchData;\n\n    function addMask(elem) {\n      var rect = elem.getBoundingClientRect();\n      var style = getComputedStyle(elem, null);\n\n      var mask = document.createElement('i');\n      mask.className = 'icon-film';\n      mask.style.color = '#fff';\n      mask.style.fontSize = '26px';\n      mask.style.position = 'absolute';\n      mask.style.right = '10px';\n      mask.style.bottom = '10px';\n      mask.style.zIndex = 1;\n      elem.parentNode.appendChild(mask);\n    }\n\n    var createVideoIncon = function createVideoIncon() {\n      var $videoImg = document.querySelectorAll('.thumb a[data-type=\"video\"]');\n      for (var i = 0, len = $videoImg.length; i < len; i++) {\n        addMask($videoImg[i]);\n      }\n    };\n    var render = function render(res) {\n      var ulTmpl = \"\";\n      for (var j = 0, len2 = res.list.length; j < len2; j++) {\n        var data = res.list[j].arr;\n        var liTmpl = \"\";\n        for (var i = 0, len = data.link.length; i < len; i++) {\n          var minSrc = 'https://github.com/aikaiqiang/aikq-blog-comments/tree/master/min_photos/' + data.link[i];\n          var src = 'https://github.com/aikaiqiang/aikq-blog-comments/tree/master/photos/' + data.link[i];\n          var type = data.type[i];\n          var target = src + (type === 'video' ? '.mp4' : '.jpg');\n          src += '';\n\n          liTmpl += '<figure class=\"thumb\" itemprop=\"associatedMedia\" itemscope=\"\" itemtype=\"http://schema.org/ImageObject\">\\\n                <a href=\"' + src + '\" itemprop=\"contentUrl\" data-size=\"1080x1080\" data-type=\"' + type + '\" data-target=\"' + src + '\">\\\n                  <img class=\"reward-img\" data-type=\"' + type + '\" data-src=\"' + minSrc + '\" src=\"/assets/img/empty.png\" itemprop=\"thumbnail\" onload=\"lzld(this)\">\\\n                </a>\\\n                <figcaption style=\"display:none\" itemprop=\"caption description\">' + data.text[i] + '</figcaption>\\\n            </figure>';\n        }\n        ulTmpl = ulTmpl + '<section class=\"archives album\"><h1 class=\"year\">' + data.year + '年<em>' + data.month + '月</em></h1>\\\n        <ul class=\"img-box-ul\">' + liTmpl + '</ul>\\\n        </section>';\n      }\n      document.querySelector('.instagram').innerHTML = '<div class=\"photos\" itemscope=\"\" itemtype=\"http://schema.org/ImageGallery\">' + ulTmpl + '</div>';\n      createVideoIncon();\n      _view2.default.init();\n    };\n\n    var replacer = function replacer(str) {\n      var arr = str.split(\"/\");\n      return \"/assets/ins/\" + arr[arr.length - 1];\n    };\n\n    var ctrler = function ctrler(data) {\n      var imgObj = {};\n      for (var i = 0, len = data.length; i < len; i++) {\n        var y = data[i].y;\n        var m = data[i].m;\n        var src = replacer(data[i].src);\n        var text = data[i].text;\n        var key = y + \"\" + ((m + \"\").length == 1 ? \"0\" + m : m);\n        if (imgObj[key]) {\n          imgObj[key].srclist.push(src);\n          imgObj[key].text.push(text);\n        } else {\n          imgObj[key] = {\n            year: y,\n            month: m,\n            srclist: [src],\n            text: [text]\n          };\n        }\n      }\n      render(imgObj);\n    };\n\n    function loadData(success) {\n      if (!searchData) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', './data.json?t=' + +new Date(), true);\n\n        xhr.onload = function() {\n          if (this.status >= 200 && this.status < 300) {\n            var res = JSON.parse(this.response);\n            searchData = res;\n            success(searchData);\n          } else {\n            console.error(this.statusText);\n          }\n        };\n\n        xhr.onerror = function() {\n          console.error(this.statusText);\n        };\n\n        xhr.send();\n      } else {\n        success(searchData);\n      }\n    }\n\n    var Ins = {\n      init: function init() {\n        loadData(function(data) {\n          render(data);\n        });\n      }\n    };\n\n    Ins.init();\n\n    // export default impush;\n\n    /***/\n  },\n  /* 1 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      'use strict';\n\n      var inViewport = __webpack_require__(3);\n      var lazyAttrs = ['data-src'];\n\n      global.lzld = lazyload();\n\n      // Provide libs using getAttribute early to get the good src\n      // and not the fake data-src\n      replaceGetAttribute('Image');\n      replaceGetAttribute('IFrame');\n\n      function registerLazyAttr(attr) {\n        if (indexOf.call(lazyAttrs, attr) === -1) {\n          lazyAttrs.push(attr);\n        }\n      }\n\n      function lazyload(opts) {\n        opts = merge({\n          'offset': 333,\n          'src': 'data-src',\n          'container': false\n        }, opts || {});\n\n        if (typeof opts.src === 'string') {\n          registerLazyAttr(opts.src);\n        }\n\n        var elts = [];\n\n        function show(elt) {\n          var src = findRealSrc(elt);\n\n          if (src) {\n            elt.src = src;\n          }\n\n          elt.setAttribute('data-lzled', true);\n          elts[indexOf.call(elts, elt)] = null;\n        }\n\n        function findRealSrc(elt) {\n          if (typeof opts.src === 'function') {\n            return opts.src(elt);\n          }\n\n          return elt.getAttribute(opts.src);\n        }\n\n        function register(elt) {\n          elt.onload = null;\n          elt.removeAttribute('onload');\n          elt.onerror = null;\n          elt.removeAttribute('onerror');\n\n          if (indexOf.call(elts, elt) === -1) {\n            inViewport(elt, opts, show);\n          }\n        }\n\n        return register;\n      }\n\n      function replaceGetAttribute(elementName) {\n        var fullname = 'HTML' + elementName + 'Element';\n        if (fullname in global === false) {\n          return;\n        }\n\n        var original = global[fullname].prototype.getAttribute;\n        global[fullname].prototype.getAttribute = function(name) {\n          if (name === 'src') {\n            var realSrc;\n            for (var i = 0, max = lazyAttrs.length; i < max; i++) {\n              realSrc = original.call(this, lazyAttrs[i]);\n              if (realSrc) {\n                break;\n              }\n            }\n\n            return realSrc || original.call(this, name);\n          }\n\n          // our own lazyloader will go through theses lines\n          // because we use getAttribute(opts.src)\n          return original.call(this, name);\n        };\n      }\n\n      function merge(defaults, opts) {\n        for (var name in defaults) {\n          if (opts[name] === undefined) {\n            opts[name] = defaults[name];\n          }\n        }\n\n        return opts;\n      }\n\n      // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html\n      function indexOf(value) {\n        for (var i = this.length; i-- && this[i] !== value;) {}\n        return i;\n      }\n\n      module.exports = lazyload;\n\n      // export default impush;\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  },\n  /* 2 */\n  /***/\n  function(module, exports) {\n\n    'use strict';\n\n    var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) {\n\n      // parse slide data (url, title, size ...) from DOM elements \n      // (children of gallerySelector)\n      var parseThumbnailElements = function parseThumbnailElements(el) {\n        el = el.parentNode.parentNode;\n        var thumbElements = el.getElementsByClassName('thumb'),\n          numNodes = thumbElements.length,\n          items = [],\n          figureEl,\n          linkEl,\n          size,\n          type,\n          // video or not\n          target,\n          item;\n\n        for (var i = 0; i < numNodes; i++) {\n\n          figureEl = thumbElements[i]; // \n\n          // include only element nodes \n          if (figureEl.nodeType !== 1) {\n            continue;\n          }\n\n          linkEl = figureEl.children[0]; // \n\n          size = linkEl.getAttribute('data-size').split('x');\n          type = linkEl.getAttribute('data-type');\n          target = linkEl.getAttribute('data-target');\n          // create slide object\n          item = {\n            src: linkEl.getAttribute('href'),\n            w: parseInt(size[0], 10),\n            h: parseInt(size[1], 10)\n          };\n\n          if (figureEl.children.length > 1) {\n            item.title = figureEl.children[1].innerHTML;\n          }\n\n          if (linkEl.children.length > 0) {\n            item.msrc = linkEl.children[0].getAttribute('src');\n            item.type = type;\n            item.target = target;\n            item.html = '<video src=\"' + target + '\" controls=\"controls\" autoplay=\"autoplay\"></video>';\n            if (type === 'video') {\n              //item.src = null;\n            }\n          }\n\n          item.el = figureEl; // save link to element for getThumbBoundsFn\n          items.push(item);\n        }\n\n        return items;\n      };\n\n      // find nearest parent element\n      var closest = function closest(el, fn) {\n        return el && (fn(el) ? el : closest(el.parentNode, fn));\n      };\n\n      // triggers when user clicks on thumbnail\n      var onThumbnailsClick = function onThumbnailsClick(e) {\n        e = e || window.event;\n        e.preventDefault ? e.preventDefault() : e.returnValue = false;\n\n        var eTarget = e.target || e.srcElement;\n\n        // find root element of slide\n        var clickedListItem = closest(eTarget, function(el) {\n          return el.tagName && el.tagName.toUpperCase() === 'FIGURE';\n        });\n\n        if (!clickedListItem) {\n          return;\n        }\n\n        // find index of clicked item by looping through all child nodes\n        // alternatively, you may define index via data- attribute\n        var clickedGallery = clickedListItem.parentNode,\n\n          // childNodes = clickedListItem.parentNode.childNodes,\n          // numChildNodes = childNodes.length,\n          childNodes = document.getElementsByClassName('thumb'),\n          numChildNodes = childNodes.length,\n          nodeIndex = 0,\n          index;\n\n        for (var i = 0; i < numChildNodes; i++) {\n          if (childNodes[i].nodeType !== 1) {\n            continue;\n          }\n\n          if (childNodes[i] === clickedListItem) {\n            index = nodeIndex;\n            break;\n          }\n          nodeIndex++;\n        }\n\n        if (index >= 0) {\n          // open PhotoSwipe if valid index found\n          openPhotoSwipe(index, clickedGallery);\n        }\n        return false;\n      };\n\n      // parse picture index and gallery index from URL (#&pid=1&gid=2)\n      var photoswipeParseHash = function photoswipeParseHash() {\n        var hash = window.location.hash.substring(1),\n          params = {};\n\n        if (hash.length < 5) {\n          return params;\n        }\n\n        var vars = hash.split('&');\n        for (var i = 0; i < vars.length; i++) {\n          if (!vars[i]) {\n            continue;\n          }\n          var pair = vars[i].split('=');\n          if (pair.length < 2) {\n            continue;\n          }\n          params[pair[0]] = pair[1];\n        }\n\n        if (params.gid) {\n          params.gid = parseInt(params.gid, 10);\n        }\n\n        return params;\n      };\n\n      var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) {\n        var pswpElement = document.querySelectorAll('.pswp')[0],\n          gallery,\n          options,\n          items;\n\n        items = parseThumbnailElements(galleryElement);\n        // define options (if needed)\n        options = {\n\n          // define gallery index (for URL)\n          galleryUID: galleryElement.getAttribute('data-pswp-uid'),\n\n          getThumbBoundsFn: function getThumbBoundsFn(index) {\n            // See Options -> getThumbBoundsFn section of documentation for more info\n            var thumbnail = items[index].el.getElementsByTagName('img')[0],\n              // find thumbnail\n              pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n              rect = thumbnail.getBoundingClientRect();\n\n            return {\n              x: rect.left,\n              y: rect.top + pageYScroll,\n              w: rect.width\n            };\n          }\n\n        };\n\n        // PhotoSwipe opened from URL\n        if (fromURL) {\n          if (options.galleryPIDs) {\n            // parse real index when custom PIDs are used \n            // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\n            for (var j = 0; j < items.length; j++) {\n              if (items[j].pid == index) {\n                options.index = j;\n                break;\n              }\n            }\n          } else {\n            // in URL indexes start from 1\n            options.index = parseInt(index, 10) - 1;\n          }\n        } else {\n          options.index = parseInt(index, 10);\n        }\n\n        // exit if index not found\n        if (isNaN(options.index)) {\n          return;\n        }\n\n        if (disableAnimation) {\n          options.showAnimationDuration = 0;\n        }\n\n        // Pass data to PhotoSwipe and initialize it\n        gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\n        gallery.init();\n\n        var $tempVideo;\n        var stopVideoHandle = function stopVideoHandle() {\n          if ($tempVideo) {\n            $tempVideo.remove();\n            $tempVideo = null;\n          }\n        };\n        var changeHandle = function changeHandle() {\n          var item = gallery.currItem;\n          stopVideoHandle();\n          if (item.type === 'video') {\n            var $ctn = item.container;\n            var style = $ctn.getElementsByClassName('pswp__img')[0].style;\n            var $video = document.createElement('video');\n            $video.setAttribute('autoplay', 'autoplay');\n            $video.setAttribute('controls', 'controls');\n            $video.setAttribute('src', item.target);\n            $video.style.width = style.width;\n            $video.style.height = style.height;\n            $video.style.position = 'absolute';\n            $video.style.zIndex = 2;\n            $tempVideo = $video;\n            $ctn.appendChild($video);\n          }\n        };\n        gallery.listen('initialZoomIn', changeHandle);\n        gallery.listen('afterChange', changeHandle);\n        gallery.listen('initialZoomOut', stopVideoHandle);\n      };\n\n      // loop through all gallery elements and bind events\n      var galleryElements = document.querySelectorAll(gallerySelector);\n      for (var i = 0, l = galleryElements.length; i < l; i++) {\n        galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n        galleryElements[i].onclick = onThumbnailsClick;\n      }\n\n      // Parse URL and open gallery if it contains #&pid=3&gid=1\n      var hashData = photoswipeParseHash();\n      if (hashData.pid && hashData.gid) {\n        openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);\n      }\n    };\n\n    var Viewer = function() {\n      function init() {\n        initPhotoSwipeFromDOM('.photos');\n      }\n      return {\n        init: init\n      };\n    }();\n\n    module.exports = Viewer;\n\n    /***/\n  },\n  /* 3 */\n  /***/\n  function(module, exports) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      module.exports = inViewport;\n\n      var instances = [];\n      var supportsMutationObserver = typeof global.MutationObserver === 'function';\n\n      function inViewport(elt, params, cb) {\n        var opts = {\n          container: global.document.body,\n          offset: 0\n        };\n\n        if (params === undefined || typeof params === 'function') {\n          cb = params;\n          params = {};\n        }\n\n        var container = opts.container = params.container || opts.container;\n        var offset = opts.offset = params.offset || opts.offset;\n\n        for (var i = 0; i < instances.length; i++) {\n          if (instances[i].container === container) {\n            return instances[i].isInViewport(elt, offset, cb);\n          }\n        }\n\n        return instances[\n          instances.push(createInViewport(container)) - 1\n        ].isInViewport(elt, offset, cb);\n      }\n\n      function addEvent(el, type, fn) {\n        if (el.attachEvent) {\n          el.attachEvent('on' + type, fn);\n        } else {\n          el.addEventListener(type, fn, false);\n        }\n      }\n\n      function debounce(func, wait, immediate) {\n        var timeout;\n        return function() {\n          var context = this,\n            args = arguments;\n          var callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n          if (callNow) func.apply(context, args);\n\n          function later() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n          }\n        };\n      }\n\n      // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708\n      var contains = function() {\n        if (!global.document) {\n          return true;\n        }\n        return global.document.documentElement.compareDocumentPosition ?\n          function(a, b) {\n            return !!(a.compareDocumentPosition(b) & 16);\n          } :\n          global.document.documentElement.contains ?\n          function(a, b) {\n            return a !== b && (a.contains ? a.contains(b) : false);\n          } :\n          function(a, b) {\n            while (b = b.parentNode) {\n              if (b === a) {\n                return true;\n              }\n            }\n            return false;\n          };\n      }\n\n      function createInViewport(container) {\n        var watches = createWatches();\n\n        var scrollContainer = container === global.document.body ? global : container;\n        var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15);\n\n        addEvent(scrollContainer, 'scroll', debouncedCheck);\n\n        if (scrollContainer === global) {\n          addEvent(global, 'resize', debouncedCheck);\n        }\n\n        if (supportsMutationObserver) {\n          observeDOM(watches, container, debouncedCheck);\n        }\n\n        // failsafe check, every 200ms we check for visible images\n        // usecase: a hidden parent containing eleements\n        // when the parent becomes visible, we have no event that the children\n        // became visible\n        setInterval(debouncedCheck, 150);\n\n        function isInViewport(elt, offset, cb) {\n          if (!cb) {\n            return isVisible(elt, offset);\n          }\n\n          var remote = createRemote(elt, offset, cb);\n          remote.watch();\n          return remote;\n        }\n\n        function createRemote(elt, offset, cb) {\n          function watch() {\n            watches.add(elt, offset, cb);\n          }\n\n          function dispose() {\n            watches.remove(elt);\n          }\n\n          return {\n            watch: watch,\n            dispose: dispose\n          };\n        }\n\n        function watchInViewport(elt, offset, cb) {\n          if (isVisible(elt, offset)) {\n            watches.remove(elt);\n            cb(elt);\n          }\n        }\n\n        function isVisible(elt, offset) {\n          if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) {\n            return false;\n          }\n\n          // Check if the element is visible\n          // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js\n          if (!elt.offsetWidth || !elt.offsetHeight) {\n            return false;\n          }\n\n          var eltRect = elt.getBoundingClientRect();\n          var viewport = {};\n\n          if (container === global.document.body) {\n            viewport = {\n              top: -offset,\n              left: -offset,\n              right: global.document.documentElement.clientWidth + offset,\n              bottom: global.document.documentElement.clientHeight + offset\n            };\n          } else {\n            var containerRect = container.getBoundingClientRect();\n            viewport = {\n              top: containerRect.top - offset,\n              left: containerRect.left - offset,\n              right: containerRect.right + offset,\n              bottom: containerRect.bottom + offset\n            };\n          }\n\n          // The element must overlap with the visible part of the viewport\n          var visible =\n            (\n              (eltRect.right > viewport.left) &&\n              (eltRect.left < viewport.right) &&\n              (eltRect.bottom > viewport.top) &&\n              (eltRect.top < viewport.bottom)\n            );\n\n          return visible;\n        }\n\n        return {\n          container: container,\n          isInViewport: isInViewport\n        };\n      }\n\n      function createWatches() {\n        var watches = [];\n\n        function add(elt, offset, cb) {\n          if (!isWatched(elt)) {\n            watches.push([elt, offset, cb]);\n          }\n        }\n\n        function remove(elt) {\n          var pos = indexOf(elt);\n          if (pos !== -1) {\n            watches.splice(pos, 1);\n          }\n        }\n\n        function indexOf(elt) {\n          for (var i = watches.length - 1; i >= 0; i--) {\n            if (watches[i][0] === elt) {\n              return i;\n            }\n          }\n          return -1;\n        }\n\n        function isWatched(elt) {\n          return indexOf(elt) !== -1;\n        }\n\n        function checkAll(cb) {\n          return function() {\n            for (var i = watches.length - 1; i >= 0; i--) {\n              cb.apply(this, watches[i]);\n            }\n          };\n        }\n\n        return {\n          add: add,\n          remove: remove,\n          isWatched: isWatched,\n          checkAll: checkAll\n        };\n      }\n\n      function observeDOM(watches, container, cb) {\n        var observer = new MutationObserver(watch);\n        var filter = Array.prototype.filter;\n        var concat = Array.prototype.concat;\n\n        observer.observe(container, {\n          childList: true,\n          subtree: true,\n          // changes like style/width/height/display will be catched\n          attributes: true\n        });\n\n        function watch(mutations) {\n          // some new DOM nodes where previously watched\n          // we should check their positions\n          if (mutations.some(knownNodes) === true) {\n            setTimeout(cb, 0);\n          }\n        }\n\n        function knownNodes(mutation) {\n          var nodes = concat.call([],\n            Array.prototype.slice.call(mutation.addedNodes),\n            mutation.target\n          );\n          return filter.call(nodes, watches.isWatched).length > 0;\n        }\n      }\n\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  }\n  /******/\n]);","site":{"data":{}},"excerpt":"","more":"/******/\n(function(modules) { // webpackBootstrap\n  /******/ // The module cache\n  /******/\n  var installedModules = {};\n  /******/\n  /******/ // The require function\n  /******/\n  function __webpack_require__(moduleId) {\n    /******/\n    /******/ // Check if module is in cache\n    /******/\n    if (installedModules[moduleId])\n    /******/\n      return installedModules[moduleId].exports;\n    /******/\n    /******/ // Create a new module (and put it into the cache)\n    /******/\n    var module = installedModules[moduleId] = {\n      /******/\n      exports: {},\n      /******/\n      id: moduleId,\n      /******/\n      loaded: false\n        /******/\n    };\n    /******/\n    /******/ // Execute the module function\n    /******/\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n    /******/ // Flag the module as loaded\n    /******/\n    module.loaded = true;\n    /******/\n    /******/ // Return the exports of the module\n    /******/\n    return module.exports;\n    /******/\n  }\n  /******/\n  /******/\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/\n  __webpack_require__.m = modules;\n  /******/\n  /******/ // expose the module cache\n  /******/\n  __webpack_require__.c = installedModules;\n  /******/\n  /******/ // __webpack_public_path__\n  /******/\n  __webpack_require__.p = \"/dist/\";\n  /******/\n  /******/ // Load entry module and return exports\n  /******/\n  return __webpack_require__(0);\n  /******/\n})\n/************************************************************************/\n/******/\n([\n  /* 0 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    'use strict';\n\n    __webpack_require__(1);\n\n    var _view = __webpack_require__(2);\n\n    var _view2 = _interopRequireDefault(_view);\n\n    function _interopRequireDefault(obj) {\n      return obj && obj.__esModule ? obj : {\n        default: obj\n      };\n    }\n    var _collection = [];\n    var _count = 0;\n    var searchData;\n\n    function addMask(elem) {\n      var rect = elem.getBoundingClientRect();\n      var style = getComputedStyle(elem, null);\n\n      var mask = document.createElement('i');\n      mask.className = 'icon-film';\n      mask.style.color = '#fff';\n      mask.style.fontSize = '26px';\n      mask.style.position = 'absolute';\n      mask.style.right = '10px';\n      mask.style.bottom = '10px';\n      mask.style.zIndex = 1;\n      elem.parentNode.appendChild(mask);\n    }\n\n    var createVideoIncon = function createVideoIncon() {\n      var $videoImg = document.querySelectorAll('.thumb a[data-type=\"video\"]');\n      for (var i = 0, len = $videoImg.length; i < len; i++) {\n        addMask($videoImg[i]);\n      }\n    };\n    var render = function render(res) {\n      var ulTmpl = \"\";\n      for (var j = 0, len2 = res.list.length; j < len2; j++) {\n        var data = res.list[j].arr;\n        var liTmpl = \"\";\n        for (var i = 0, len = data.link.length; i < len; i++) {\n          var minSrc = 'https://github.com/aikaiqiang/aikq-blog-comments/tree/master/min_photos/' + data.link[i];\n          var src = 'https://github.com/aikaiqiang/aikq-blog-comments/tree/master/photos/' + data.link[i];\n          var type = data.type[i];\n          var target = src + (type === 'video' ? '.mp4' : '.jpg');\n          src += '';\n\n          liTmpl += '<figure class=\"thumb\" itemprop=\"associatedMedia\" itemscope=\"\" itemtype=\"http://schema.org/ImageObject\">\\\n                <a href=\"' + src + '\" itemprop=\"contentUrl\" data-size=\"1080x1080\" data-type=\"' + type + '\" data-target=\"' + src + '\">\\\n                  <img class=\"reward-img\" data-type=\"' + type + '\" data-src=\"' + minSrc + '\" src=\"/assets/img/empty.png\" itemprop=\"thumbnail\" onload=\"lzld(this)\">\\\n                </a>\\\n                <figcaption style=\"display:none\" itemprop=\"caption description\">' + data.text[i] + '</figcaption>\\\n            </figure>';\n        }\n        ulTmpl = ulTmpl + '<section class=\"archives album\"><h1 class=\"year\">' + data.year + '年<em>' + data.month + '月</em></h1>\\\n        <ul class=\"img-box-ul\">' + liTmpl + '</ul>\\\n        </section>';\n      }\n      document.querySelector('.instagram').innerHTML = '<div class=\"photos\" itemscope=\"\" itemtype=\"http://schema.org/ImageGallery\">' + ulTmpl + '</div>';\n      createVideoIncon();\n      _view2.default.init();\n    };\n\n    var replacer = function replacer(str) {\n      var arr = str.split(\"/\");\n      return \"/assets/ins/\" + arr[arr.length - 1];\n    };\n\n    var ctrler = function ctrler(data) {\n      var imgObj = {};\n      for (var i = 0, len = data.length; i < len; i++) {\n        var y = data[i].y;\n        var m = data[i].m;\n        var src = replacer(data[i].src);\n        var text = data[i].text;\n        var key = y + \"\" + ((m + \"\").length == 1 ? \"0\" + m : m);\n        if (imgObj[key]) {\n          imgObj[key].srclist.push(src);\n          imgObj[key].text.push(text);\n        } else {\n          imgObj[key] = {\n            year: y,\n            month: m,\n            srclist: [src],\n            text: [text]\n          };\n        }\n      }\n      render(imgObj);\n    };\n\n    function loadData(success) {\n      if (!searchData) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', './data.json?t=' + +new Date(), true);\n\n        xhr.onload = function() {\n          if (this.status >= 200 && this.status < 300) {\n            var res = JSON.parse(this.response);\n            searchData = res;\n            success(searchData);\n          } else {\n            console.error(this.statusText);\n          }\n        };\n\n        xhr.onerror = function() {\n          console.error(this.statusText);\n        };\n\n        xhr.send();\n      } else {\n        success(searchData);\n      }\n    }\n\n    var Ins = {\n      init: function init() {\n        loadData(function(data) {\n          render(data);\n        });\n      }\n    };\n\n    Ins.init();\n\n    // export default impush;\n\n    /***/\n  },\n  /* 1 */\n  /***/\n  function(module, exports, __webpack_require__) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      'use strict';\n\n      var inViewport = __webpack_require__(3);\n      var lazyAttrs = ['data-src'];\n\n      global.lzld = lazyload();\n\n      // Provide libs using getAttribute early to get the good src\n      // and not the fake data-src\n      replaceGetAttribute('Image');\n      replaceGetAttribute('IFrame');\n\n      function registerLazyAttr(attr) {\n        if (indexOf.call(lazyAttrs, attr) === -1) {\n          lazyAttrs.push(attr);\n        }\n      }\n\n      function lazyload(opts) {\n        opts = merge({\n          'offset': 333,\n          'src': 'data-src',\n          'container': false\n        }, opts || {});\n\n        if (typeof opts.src === 'string') {\n          registerLazyAttr(opts.src);\n        }\n\n        var elts = [];\n\n        function show(elt) {\n          var src = findRealSrc(elt);\n\n          if (src) {\n            elt.src = src;\n          }\n\n          elt.setAttribute('data-lzled', true);\n          elts[indexOf.call(elts, elt)] = null;\n        }\n\n        function findRealSrc(elt) {\n          if (typeof opts.src === 'function') {\n            return opts.src(elt);\n          }\n\n          return elt.getAttribute(opts.src);\n        }\n\n        function register(elt) {\n          elt.onload = null;\n          elt.removeAttribute('onload');\n          elt.onerror = null;\n          elt.removeAttribute('onerror');\n\n          if (indexOf.call(elts, elt) === -1) {\n            inViewport(elt, opts, show);\n          }\n        }\n\n        return register;\n      }\n\n      function replaceGetAttribute(elementName) {\n        var fullname = 'HTML' + elementName + 'Element';\n        if (fullname in global === false) {\n          return;\n        }\n\n        var original = global[fullname].prototype.getAttribute;\n        global[fullname].prototype.getAttribute = function(name) {\n          if (name === 'src') {\n            var realSrc;\n            for (var i = 0, max = lazyAttrs.length; i < max; i++) {\n              realSrc = original.call(this, lazyAttrs[i]);\n              if (realSrc) {\n                break;\n              }\n            }\n\n            return realSrc || original.call(this, name);\n          }\n\n          // our own lazyloader will go through theses lines\n          // because we use getAttribute(opts.src)\n          return original.call(this, name);\n        };\n      }\n\n      function merge(defaults, opts) {\n        for (var name in defaults) {\n          if (opts[name] === undefined) {\n            opts[name] = defaults[name];\n          }\n        }\n\n        return opts;\n      }\n\n      // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html\n      function indexOf(value) {\n        for (var i = this.length; i-- && this[i] !== value;) {}\n        return i;\n      }\n\n      module.exports = lazyload;\n\n      // export default impush;\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  },\n  /* 2 */\n  /***/\n  function(module, exports) {\n\n    'use strict';\n\n    var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) {\n\n      // parse slide data (url, title, size ...) from DOM elements \n      // (children of gallerySelector)\n      var parseThumbnailElements = function parseThumbnailElements(el) {\n        el = el.parentNode.parentNode;\n        var thumbElements = el.getElementsByClassName('thumb'),\n          numNodes = thumbElements.length,\n          items = [],\n          figureEl,\n          linkEl,\n          size,\n          type,\n          // video or not\n          target,\n          item;\n\n        for (var i = 0; i < numNodes; i++) {\n\n          figureEl = thumbElements[i]; // \n\n          // include only element nodes \n          if (figureEl.nodeType !== 1) {\n            continue;\n          }\n\n          linkEl = figureEl.children[0]; // \n\n          size = linkEl.getAttribute('data-size').split('x');\n          type = linkEl.getAttribute('data-type');\n          target = linkEl.getAttribute('data-target');\n          // create slide object\n          item = {\n            src: linkEl.getAttribute('href'),\n            w: parseInt(size[0], 10),\n            h: parseInt(size[1], 10)\n          };\n\n          if (figureEl.children.length > 1) {\n            item.title = figureEl.children[1].innerHTML;\n          }\n\n          if (linkEl.children.length > 0) {\n            item.msrc = linkEl.children[0].getAttribute('src');\n            item.type = type;\n            item.target = target;\n            item.html = '<video src=\"' + target + '\" controls=\"controls\" autoplay=\"autoplay\"></video>';\n            if (type === 'video') {\n              //item.src = null;\n            }\n          }\n\n          item.el = figureEl; // save link to element for getThumbBoundsFn\n          items.push(item);\n        }\n\n        return items;\n      };\n\n      // find nearest parent element\n      var closest = function closest(el, fn) {\n        return el && (fn(el) ? el : closest(el.parentNode, fn));\n      };\n\n      // triggers when user clicks on thumbnail\n      var onThumbnailsClick = function onThumbnailsClick(e) {\n        e = e || window.event;\n        e.preventDefault ? e.preventDefault() : e.returnValue = false;\n\n        var eTarget = e.target || e.srcElement;\n\n        // find root element of slide\n        var clickedListItem = closest(eTarget, function(el) {\n          return el.tagName && el.tagName.toUpperCase() === 'FIGURE';\n        });\n\n        if (!clickedListItem) {\n          return;\n        }\n\n        // find index of clicked item by looping through all child nodes\n        // alternatively, you may define index via data- attribute\n        var clickedGallery = clickedListItem.parentNode,\n\n          // childNodes = clickedListItem.parentNode.childNodes,\n          // numChildNodes = childNodes.length,\n          childNodes = document.getElementsByClassName('thumb'),\n          numChildNodes = childNodes.length,\n          nodeIndex = 0,\n          index;\n\n        for (var i = 0; i < numChildNodes; i++) {\n          if (childNodes[i].nodeType !== 1) {\n            continue;\n          }\n\n          if (childNodes[i] === clickedListItem) {\n            index = nodeIndex;\n            break;\n          }\n          nodeIndex++;\n        }\n\n        if (index >= 0) {\n          // open PhotoSwipe if valid index found\n          openPhotoSwipe(index, clickedGallery);\n        }\n        return false;\n      };\n\n      // parse picture index and gallery index from URL (#&pid=1&gid=2)\n      var photoswipeParseHash = function photoswipeParseHash() {\n        var hash = window.location.hash.substring(1),\n          params = {};\n\n        if (hash.length < 5) {\n          return params;\n        }\n\n        var vars = hash.split('&');\n        for (var i = 0; i < vars.length; i++) {\n          if (!vars[i]) {\n            continue;\n          }\n          var pair = vars[i].split('=');\n          if (pair.length < 2) {\n            continue;\n          }\n          params[pair[0]] = pair[1];\n        }\n\n        if (params.gid) {\n          params.gid = parseInt(params.gid, 10);\n        }\n\n        return params;\n      };\n\n      var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) {\n        var pswpElement = document.querySelectorAll('.pswp')[0],\n          gallery,\n          options,\n          items;\n\n        items = parseThumbnailElements(galleryElement);\n        // define options (if needed)\n        options = {\n\n          // define gallery index (for URL)\n          galleryUID: galleryElement.getAttribute('data-pswp-uid'),\n\n          getThumbBoundsFn: function getThumbBoundsFn(index) {\n            // See Options -> getThumbBoundsFn section of documentation for more info\n            var thumbnail = items[index].el.getElementsByTagName('img')[0],\n              // find thumbnail\n              pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n              rect = thumbnail.getBoundingClientRect();\n\n            return {\n              x: rect.left,\n              y: rect.top + pageYScroll,\n              w: rect.width\n            };\n          }\n\n        };\n\n        // PhotoSwipe opened from URL\n        if (fromURL) {\n          if (options.galleryPIDs) {\n            // parse real index when custom PIDs are used \n            // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\n            for (var j = 0; j < items.length; j++) {\n              if (items[j].pid == index) {\n                options.index = j;\n                break;\n              }\n            }\n          } else {\n            // in URL indexes start from 1\n            options.index = parseInt(index, 10) - 1;\n          }\n        } else {\n          options.index = parseInt(index, 10);\n        }\n\n        // exit if index not found\n        if (isNaN(options.index)) {\n          return;\n        }\n\n        if (disableAnimation) {\n          options.showAnimationDuration = 0;\n        }\n\n        // Pass data to PhotoSwipe and initialize it\n        gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\n        gallery.init();\n\n        var $tempVideo;\n        var stopVideoHandle = function stopVideoHandle() {\n          if ($tempVideo) {\n            $tempVideo.remove();\n            $tempVideo = null;\n          }\n        };\n        var changeHandle = function changeHandle() {\n          var item = gallery.currItem;\n          stopVideoHandle();\n          if (item.type === 'video') {\n            var $ctn = item.container;\n            var style = $ctn.getElementsByClassName('pswp__img')[0].style;\n            var $video = document.createElement('video');\n            $video.setAttribute('autoplay', 'autoplay');\n            $video.setAttribute('controls', 'controls');\n            $video.setAttribute('src', item.target);\n            $video.style.width = style.width;\n            $video.style.height = style.height;\n            $video.style.position = 'absolute';\n            $video.style.zIndex = 2;\n            $tempVideo = $video;\n            $ctn.appendChild($video);\n          }\n        };\n        gallery.listen('initialZoomIn', changeHandle);\n        gallery.listen('afterChange', changeHandle);\n        gallery.listen('initialZoomOut', stopVideoHandle);\n      };\n\n      // loop through all gallery elements and bind events\n      var galleryElements = document.querySelectorAll(gallerySelector);\n      for (var i = 0, l = galleryElements.length; i < l; i++) {\n        galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n        galleryElements[i].onclick = onThumbnailsClick;\n      }\n\n      // Parse URL and open gallery if it contains #&pid=3&gid=1\n      var hashData = photoswipeParseHash();\n      if (hashData.pid && hashData.gid) {\n        openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);\n      }\n    };\n\n    var Viewer = function() {\n      function init() {\n        initPhotoSwipeFromDOM('.photos');\n      }\n      return {\n        init: init\n      };\n    }();\n\n    module.exports = Viewer;\n\n    /***/\n  },\n  /* 3 */\n  /***/\n  function(module, exports) {\n\n    /* WEBPACK VAR INJECTION */\n    (function(global) {\n      module.exports = inViewport;\n\n      var instances = [];\n      var supportsMutationObserver = typeof global.MutationObserver === 'function';\n\n      function inViewport(elt, params, cb) {\n        var opts = {\n          container: global.document.body,\n          offset: 0\n        };\n\n        if (params === undefined || typeof params === 'function') {\n          cb = params;\n          params = {};\n        }\n\n        var container = opts.container = params.container || opts.container;\n        var offset = opts.offset = params.offset || opts.offset;\n\n        for (var i = 0; i < instances.length; i++) {\n          if (instances[i].container === container) {\n            return instances[i].isInViewport(elt, offset, cb);\n          }\n        }\n\n        return instances[\n          instances.push(createInViewport(container)) - 1\n        ].isInViewport(elt, offset, cb);\n      }\n\n      function addEvent(el, type, fn) {\n        if (el.attachEvent) {\n          el.attachEvent('on' + type, fn);\n        } else {\n          el.addEventListener(type, fn, false);\n        }\n      }\n\n      function debounce(func, wait, immediate) {\n        var timeout;\n        return function() {\n          var context = this,\n            args = arguments;\n          var callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n          if (callNow) func.apply(context, args);\n\n          function later() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n          }\n        };\n      }\n\n      // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708\n      var contains = function() {\n        if (!global.document) {\n          return true;\n        }\n        return global.document.documentElement.compareDocumentPosition ?\n          function(a, b) {\n            return !!(a.compareDocumentPosition(b) & 16);\n          } :\n          global.document.documentElement.contains ?\n          function(a, b) {\n            return a !== b && (a.contains ? a.contains(b) : false);\n          } :\n          function(a, b) {\n            while (b = b.parentNode) {\n              if (b === a) {\n                return true;\n              }\n            }\n            return false;\n          };\n      }\n\n      function createInViewport(container) {\n        var watches = createWatches();\n\n        var scrollContainer = container === global.document.body ? global : container;\n        var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15);\n\n        addEvent(scrollContainer, 'scroll', debouncedCheck);\n\n        if (scrollContainer === global) {\n          addEvent(global, 'resize', debouncedCheck);\n        }\n\n        if (supportsMutationObserver) {\n          observeDOM(watches, container, debouncedCheck);\n        }\n\n        // failsafe check, every 200ms we check for visible images\n        // usecase: a hidden parent containing eleements\n        // when the parent becomes visible, we have no event that the children\n        // became visible\n        setInterval(debouncedCheck, 150);\n\n        function isInViewport(elt, offset, cb) {\n          if (!cb) {\n            return isVisible(elt, offset);\n          }\n\n          var remote = createRemote(elt, offset, cb);\n          remote.watch();\n          return remote;\n        }\n\n        function createRemote(elt, offset, cb) {\n          function watch() {\n            watches.add(elt, offset, cb);\n          }\n\n          function dispose() {\n            watches.remove(elt);\n          }\n\n          return {\n            watch: watch,\n            dispose: dispose\n          };\n        }\n\n        function watchInViewport(elt, offset, cb) {\n          if (isVisible(elt, offset)) {\n            watches.remove(elt);\n            cb(elt);\n          }\n        }\n\n        function isVisible(elt, offset) {\n          if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) {\n            return false;\n          }\n\n          // Check if the element is visible\n          // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js\n          if (!elt.offsetWidth || !elt.offsetHeight) {\n            return false;\n          }\n\n          var eltRect = elt.getBoundingClientRect();\n          var viewport = {};\n\n          if (container === global.document.body) {\n            viewport = {\n              top: -offset,\n              left: -offset,\n              right: global.document.documentElement.clientWidth + offset,\n              bottom: global.document.documentElement.clientHeight + offset\n            };\n          } else {\n            var containerRect = container.getBoundingClientRect();\n            viewport = {\n              top: containerRect.top - offset,\n              left: containerRect.left - offset,\n              right: containerRect.right + offset,\n              bottom: containerRect.bottom + offset\n            };\n          }\n\n          // The element must overlap with the visible part of the viewport\n          var visible =\n            (\n              (eltRect.right > viewport.left) &&\n              (eltRect.left < viewport.right) &&\n              (eltRect.bottom > viewport.top) &&\n              (eltRect.top < viewport.bottom)\n            );\n\n          return visible;\n        }\n\n        return {\n          container: container,\n          isInViewport: isInViewport\n        };\n      }\n\n      function createWatches() {\n        var watches = [];\n\n        function add(elt, offset, cb) {\n          if (!isWatched(elt)) {\n            watches.push([elt, offset, cb]);\n          }\n        }\n\n        function remove(elt) {\n          var pos = indexOf(elt);\n          if (pos !== -1) {\n            watches.splice(pos, 1);\n          }\n        }\n\n        function indexOf(elt) {\n          for (var i = watches.length - 1; i >= 0; i--) {\n            if (watches[i][0] === elt) {\n              return i;\n            }\n          }\n          return -1;\n        }\n\n        function isWatched(elt) {\n          return indexOf(elt) !== -1;\n        }\n\n        function checkAll(cb) {\n          return function() {\n            for (var i = watches.length - 1; i >= 0; i--) {\n              cb.apply(this, watches[i]);\n            }\n          };\n        }\n\n        return {\n          add: add,\n          remove: remove,\n          isWatched: isWatched,\n          checkAll: checkAll\n        };\n      }\n\n      function observeDOM(watches, container, cb) {\n        var observer = new MutationObserver(watch);\n        var filter = Array.prototype.filter;\n        var concat = Array.prototype.concat;\n\n        observer.observe(container, {\n          childList: true,\n          subtree: true,\n          // changes like style/width/height/display will be catched\n          attributes: true\n        });\n\n        function watch(mutations) {\n          // some new DOM nodes where previously watched\n          // we should check their positions\n          if (mutations.some(knownNodes) === true) {\n            setTimeout(cb, 0);\n          }\n        }\n\n        function knownNodes(mutation) {\n          var nodes = concat.call([],\n            Array.prototype.slice.call(mutation.addedNodes),\n            mutation.target\n          );\n          return filter.call(nodes, watches.isWatched).length > 0;\n        }\n      }\n\n      /* WEBPACK VAR INJECTION */\n    }.call(exports, (function() {\n      return this;\n    }())))\n\n    /***/\n  }\n  /******/\n]);"}],"Post":[{"title":"Canal数据同步","date":"2019-03-04T07:33:01.000Z","toc":true,"declare":true,"_content":"\n> 背景：阿里巴巴B2B公司存在杭州和美国双机房部署，存在跨机房同步的业务需求，当时早期的数据同步业务， 主要是基于trigger的方式获取增量变更数据；\n> 2010开始，阿里开始逐步尝试基于数据库的日志解析，获取增量变更进行同步，由此衍生出增量订阅&消费的业务；\n> 定位：基于数据库增量日志准实时解析，提供增量数据订阅&消费（目前主要支持mysql）\n<!-- more -->\n\n## Mysql主从同步原理\n- 架构图：\n![图1](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/%E5%9B%BE%E7%89%871.jpg)\nMysql Slave同步原理：\na. I/O thread接受binlog\nb. SQL thread执行变更\n\n- Binlog Dump交互\n![图2](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/%E5%9B%BE%E7%89%872.png)\n![图3](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/%E5%9B%BE%E7%89%873.png)\n\n\n* Mysql 的binlog [官链](https://dev.mysql.com/doc/internals/en/binary-log.html)\n## Canal 使用\n> canal的原理是基于mysql binlog技术，所以这里一定需要开启mysql的binlog写入功能，建议配置binlog模式为row;\n### 安装Canal Server\n- 下载安装包，解压到自定义目录即可；[下载地址](https://github.com/alibaba/canal/releases)\n- 修改配置文件，进入canal目录下：\n![图4](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190304150020.png)\n应用参数：`vi conf/example/instance.properties`\n```\n#################################################\n## mysql serverId , v1.0.26+ will autoGen\n# canal.instance.mysql.slaveId=0\n\n# enable gtid use true/false\ncanal.instance.gtidon=false\n\n# position info / 需要改成自己的数据库信息\ncanal.instance.master.address=127.0.0.1:3306\ncanal.instance.master.journal.name=\ncanal.instance.master.position=\ncanal.instance.master.timestamp=\ncanal.instance.master.gtid=\n\n# rds oss binlog\ncanal.instance.rds.accesskey=\ncanal.instance.rds.secretkey=\ncanal.instance.rds.instanceId=\n\n# table meta tsdb info\ncanal.instance.tsdb.enable=true\n#canal.instance.tsdb.url=jdbc:mysql://127.0.0.1:3306/canal_tsdb\n#canal.instance.tsdb.dbUsername=canal\n#canal.instance.tsdb.dbPassword=canal\n\n#canal.instance.standby.address =\n#canal.instance.standby.journal.name =\n#canal.instance.standby.position =\n#canal.instance.standby.timestamp =\n#canal.instance.standby.gtid=\n\n# username/password, 需要改成自己的数据库信息\ncanal.instance.dbUsername=canal\ncanal.instance.dbPassword=canal\ncanal.instance.connectionCharset = UTF-8\ncanal.instance.defaultDatabaseName =test\n# enable druid Decrypt database password\ncanal.instance.enableDruid=false\n#canal.instance.pwdPublicKey=MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBALK4BUxdDltRRE5/zXpVEVPUgunvscYFtEip3pmLlhrWpacX7y7GCMo2/JM6LeHmiiNdH1FWgGCpUfircSwlWKUCAwEAAQ==\n\n# table regex\ncanal.instance.filter.regex=.*\\\\..*\n# table black regex\ncanal.instance.filter.black.regex=\n\n# mq config\ncanal.mq.topic=example\n# dynamic topic route by table regex\n#canal.mq.dynamicTopic=.*,mytest\\\\..*,mytest2.user\ncanal.mq.partition=0\n# hash partition config\n#canal.mq.partitionsNum=3\n#canal.mq.partitionHash=test.table:id^name,.*\\\\..*\n#################################################\n```\n\n- 启动canal\n命令：`sh bin/startup.sh` #启动  `sh bin/stop.sh`# 停止\n\n- 查看日志\n命令：`tail -f logs/example/example.log`\n\n### Canal 客户端使用\n[参考地址](https://github.com/alibaba/canal/wiki/ClientExample)\n\n\n## Canal HA模式\n- Canal的ha分为两部分，canal server和canal client分别有对应的ha实现：\n1. canal server:  为了减少对mysql dump的请求，不同server上的instance要求同一时间只能有一个处于running，其他的处于standby状态;\n2. canal client: 为了保证有序性，一份instance同一时间只能由一个canal client进行get/ack/rollback操作，否则客户端接收无法保证有序\n- HA机制的控制主要是依赖了zookeeper的几个特性，watcher和EPHEMERAL节点(和session生命周期绑定)\n## Canal Kafka RocketMQ QuickStart\n\n\n## 资料文件\nCanal介绍PPT：[下载地址](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/canal%E4%BA%A7%E5%93%81%E4%BB%8B%E7%BB%8D.pptx)\n","source":"_posts/Canal-study-01.md","raw":"---\ntitle: Canal数据同步\ndate: 2019-03-04 15:33:01\ntags:\n   - Canal\n   - Mysql\ncategories:\n   - Canal\ntoc: true\ndeclare: true\n---\n\n> 背景：阿里巴巴B2B公司存在杭州和美国双机房部署，存在跨机房同步的业务需求，当时早期的数据同步业务， 主要是基于trigger的方式获取增量变更数据；\n> 2010开始，阿里开始逐步尝试基于数据库的日志解析，获取增量变更进行同步，由此衍生出增量订阅&消费的业务；\n> 定位：基于数据库增量日志准实时解析，提供增量数据订阅&消费（目前主要支持mysql）\n<!-- more -->\n\n## Mysql主从同步原理\n- 架构图：\n![图1](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/%E5%9B%BE%E7%89%871.jpg)\nMysql Slave同步原理：\na. I/O thread接受binlog\nb. SQL thread执行变更\n\n- Binlog Dump交互\n![图2](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/%E5%9B%BE%E7%89%872.png)\n![图3](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/%E5%9B%BE%E7%89%873.png)\n\n\n* Mysql 的binlog [官链](https://dev.mysql.com/doc/internals/en/binary-log.html)\n## Canal 使用\n> canal的原理是基于mysql binlog技术，所以这里一定需要开启mysql的binlog写入功能，建议配置binlog模式为row;\n### 安装Canal Server\n- 下载安装包，解压到自定义目录即可；[下载地址](https://github.com/alibaba/canal/releases)\n- 修改配置文件，进入canal目录下：\n![图4](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190304150020.png)\n应用参数：`vi conf/example/instance.properties`\n```\n#################################################\n## mysql serverId , v1.0.26+ will autoGen\n# canal.instance.mysql.slaveId=0\n\n# enable gtid use true/false\ncanal.instance.gtidon=false\n\n# position info / 需要改成自己的数据库信息\ncanal.instance.master.address=127.0.0.1:3306\ncanal.instance.master.journal.name=\ncanal.instance.master.position=\ncanal.instance.master.timestamp=\ncanal.instance.master.gtid=\n\n# rds oss binlog\ncanal.instance.rds.accesskey=\ncanal.instance.rds.secretkey=\ncanal.instance.rds.instanceId=\n\n# table meta tsdb info\ncanal.instance.tsdb.enable=true\n#canal.instance.tsdb.url=jdbc:mysql://127.0.0.1:3306/canal_tsdb\n#canal.instance.tsdb.dbUsername=canal\n#canal.instance.tsdb.dbPassword=canal\n\n#canal.instance.standby.address =\n#canal.instance.standby.journal.name =\n#canal.instance.standby.position =\n#canal.instance.standby.timestamp =\n#canal.instance.standby.gtid=\n\n# username/password, 需要改成自己的数据库信息\ncanal.instance.dbUsername=canal\ncanal.instance.dbPassword=canal\ncanal.instance.connectionCharset = UTF-8\ncanal.instance.defaultDatabaseName =test\n# enable druid Decrypt database password\ncanal.instance.enableDruid=false\n#canal.instance.pwdPublicKey=MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBALK4BUxdDltRRE5/zXpVEVPUgunvscYFtEip3pmLlhrWpacX7y7GCMo2/JM6LeHmiiNdH1FWgGCpUfircSwlWKUCAwEAAQ==\n\n# table regex\ncanal.instance.filter.regex=.*\\\\..*\n# table black regex\ncanal.instance.filter.black.regex=\n\n# mq config\ncanal.mq.topic=example\n# dynamic topic route by table regex\n#canal.mq.dynamicTopic=.*,mytest\\\\..*,mytest2.user\ncanal.mq.partition=0\n# hash partition config\n#canal.mq.partitionsNum=3\n#canal.mq.partitionHash=test.table:id^name,.*\\\\..*\n#################################################\n```\n\n- 启动canal\n命令：`sh bin/startup.sh` #启动  `sh bin/stop.sh`# 停止\n\n- 查看日志\n命令：`tail -f logs/example/example.log`\n\n### Canal 客户端使用\n[参考地址](https://github.com/alibaba/canal/wiki/ClientExample)\n\n\n## Canal HA模式\n- Canal的ha分为两部分，canal server和canal client分别有对应的ha实现：\n1. canal server:  为了减少对mysql dump的请求，不同server上的instance要求同一时间只能有一个处于running，其他的处于standby状态;\n2. canal client: 为了保证有序性，一份instance同一时间只能由一个canal client进行get/ack/rollback操作，否则客户端接收无法保证有序\n- HA机制的控制主要是依赖了zookeeper的几个特性，watcher和EPHEMERAL节点(和session生命周期绑定)\n## Canal Kafka RocketMQ QuickStart\n\n\n## 资料文件\nCanal介绍PPT：[下载地址](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/canal%E4%BA%A7%E5%93%81%E4%BB%8B%E7%BB%8D.pptx)\n","slug":"Canal-study-01","published":1,"updated":"2019-03-05T02:28:39.996Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck2vmvr810000mgu5c57xged2","content":"<blockquote>\n<p>背景：阿里巴巴B2B公司存在杭州和美国双机房部署，存在跨机房同步的业务需求，当时早期的数据同步业务， 主要是基于trigger的方式获取增量变更数据；<br>2010开始，阿里开始逐步尝试基于数据库的日志解析，获取增量变更进行同步，由此衍生出增量订阅&amp;消费的业务；<br>定位：基于数据库增量日志准实时解析，提供增量数据订阅&amp;消费（目前主要支持mysql）<br><a id=\"more\"></a></p>\n</blockquote>\n<h2 id=\"Mysql主从同步原理\"><a href=\"#Mysql主从同步原理\" class=\"headerlink\" title=\"Mysql主从同步原理\"></a>Mysql主从同步原理</h2><ul>\n<li><p>架构图：<br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/%E5%9B%BE%E7%89%871.jpg\" alt=\"图1\"><br>Mysql Slave同步原理：<br>a. I/O thread接受binlog<br>b. SQL thread执行变更</p>\n</li>\n<li><p>Binlog Dump交互<br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/%E5%9B%BE%E7%89%872.png\" alt=\"图2\"><br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/%E5%9B%BE%E7%89%873.png\" alt=\"图3\"></p>\n</li>\n</ul>\n<ul>\n<li>Mysql 的binlog <a href=\"https://dev.mysql.com/doc/internals/en/binary-log.html\" target=\"_blank\" rel=\"noopener\">官链</a><h2 id=\"Canal-使用\"><a href=\"#Canal-使用\" class=\"headerlink\" title=\"Canal 使用\"></a>Canal 使用</h2><blockquote>\n<p>canal的原理是基于mysql binlog技术，所以这里一定需要开启mysql的binlog写入功能，建议配置binlog模式为row;</p>\n</blockquote>\n<h3 id=\"安装Canal-Server\"><a href=\"#安装Canal-Server\" class=\"headerlink\" title=\"安装Canal Server\"></a>安装Canal Server</h3></li>\n</ul>\n<ul>\n<li>下载安装包，解压到自定义目录即可；<a href=\"https://github.com/alibaba/canal/releases\" target=\"_blank\" rel=\"noopener\">下载地址</a></li>\n<li><p>修改配置文件，进入canal目录下：<br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190304150020.png\" alt=\"图4\"><br>应用参数：<code>vi conf/example/instance.properties</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#################################################</span><br><span class=\"line\">## mysql serverId , v1.0.26+ will autoGen</span><br><span class=\"line\"># canal.instance.mysql.slaveId=0</span><br><span class=\"line\"></span><br><span class=\"line\"># enable gtid use true/false</span><br><span class=\"line\">canal.instance.gtidon=false</span><br><span class=\"line\"></span><br><span class=\"line\"># position info / 需要改成自己的数据库信息</span><br><span class=\"line\">canal.instance.master.address=127.0.0.1:3306</span><br><span class=\"line\">canal.instance.master.journal.name=</span><br><span class=\"line\">canal.instance.master.position=</span><br><span class=\"line\">canal.instance.master.timestamp=</span><br><span class=\"line\">canal.instance.master.gtid=</span><br><span class=\"line\"></span><br><span class=\"line\"># rds oss binlog</span><br><span class=\"line\">canal.instance.rds.accesskey=</span><br><span class=\"line\">canal.instance.rds.secretkey=</span><br><span class=\"line\">canal.instance.rds.instanceId=</span><br><span class=\"line\"></span><br><span class=\"line\"># table meta tsdb info</span><br><span class=\"line\">canal.instance.tsdb.enable=true</span><br><span class=\"line\">#canal.instance.tsdb.url=jdbc:mysql://127.0.0.1:3306/canal_tsdb</span><br><span class=\"line\">#canal.instance.tsdb.dbUsername=canal</span><br><span class=\"line\">#canal.instance.tsdb.dbPassword=canal</span><br><span class=\"line\"></span><br><span class=\"line\">#canal.instance.standby.address =</span><br><span class=\"line\">#canal.instance.standby.journal.name =</span><br><span class=\"line\">#canal.instance.standby.position =</span><br><span class=\"line\">#canal.instance.standby.timestamp =</span><br><span class=\"line\">#canal.instance.standby.gtid=</span><br><span class=\"line\"></span><br><span class=\"line\"># username/password, 需要改成自己的数据库信息</span><br><span class=\"line\">canal.instance.dbUsername=canal</span><br><span class=\"line\">canal.instance.dbPassword=canal</span><br><span class=\"line\">canal.instance.connectionCharset = UTF-8</span><br><span class=\"line\">canal.instance.defaultDatabaseName =test</span><br><span class=\"line\"># enable druid Decrypt database password</span><br><span class=\"line\">canal.instance.enableDruid=false</span><br><span class=\"line\">#canal.instance.pwdPublicKey=MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBALK4BUxdDltRRE5/zXpVEVPUgunvscYFtEip3pmLlhrWpacX7y7GCMo2/JM6LeHmiiNdH1FWgGCpUfircSwlWKUCAwEAAQ==</span><br><span class=\"line\"></span><br><span class=\"line\"># table regex</span><br><span class=\"line\">canal.instance.filter.regex=.*\\\\..*</span><br><span class=\"line\"># table black regex</span><br><span class=\"line\">canal.instance.filter.black.regex=</span><br><span class=\"line\"></span><br><span class=\"line\"># mq config</span><br><span class=\"line\">canal.mq.topic=example</span><br><span class=\"line\"># dynamic topic route by table regex</span><br><span class=\"line\">#canal.mq.dynamicTopic=.*,mytest\\\\..*,mytest2.user</span><br><span class=\"line\">canal.mq.partition=0</span><br><span class=\"line\"># hash partition config</span><br><span class=\"line\">#canal.mq.partitionsNum=3</span><br><span class=\"line\">#canal.mq.partitionHash=test.table:id^name,.*\\\\..*</span><br><span class=\"line\">#################################################</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>启动canal<br>命令：<code>sh bin/startup.sh</code> #启动  <code>sh bin/stop.sh</code># 停止</p>\n</li>\n<li><p>查看日志<br>命令：<code>tail -f logs/example/example.log</code></p>\n</li>\n</ul>\n<h3 id=\"Canal-客户端使用\"><a href=\"#Canal-客户端使用\" class=\"headerlink\" title=\"Canal 客户端使用\"></a>Canal 客户端使用</h3><p><a href=\"https://github.com/alibaba/canal/wiki/ClientExample\" target=\"_blank\" rel=\"noopener\">参考地址</a></p>\n<h2 id=\"Canal-HA模式\"><a href=\"#Canal-HA模式\" class=\"headerlink\" title=\"Canal HA模式\"></a>Canal HA模式</h2><ul>\n<li>Canal的ha分为两部分，canal server和canal client分别有对应的ha实现：</li>\n</ul>\n<ol>\n<li>canal server:  为了减少对mysql dump的请求，不同server上的instance要求同一时间只能有一个处于running，其他的处于standby状态;</li>\n<li>canal client: 为了保证有序性，一份instance同一时间只能由一个canal client进行get/ack/rollback操作，否则客户端接收无法保证有序</li>\n</ol>\n<ul>\n<li>HA机制的控制主要是依赖了zookeeper的几个特性，watcher和EPHEMERAL节点(和session生命周期绑定)<h2 id=\"Canal-Kafka-RocketMQ-QuickStart\"><a href=\"#Canal-Kafka-RocketMQ-QuickStart\" class=\"headerlink\" title=\"Canal Kafka RocketMQ QuickStart\"></a>Canal Kafka RocketMQ QuickStart</h2></li>\n</ul>\n<h2 id=\"资料文件\"><a href=\"#资料文件\" class=\"headerlink\" title=\"资料文件\"></a>资料文件</h2><p>Canal介绍PPT：<a href=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/canal%E4%BA%A7%E5%93%81%E4%BB%8B%E7%BB%8D.pptx\" target=\"_blank\" rel=\"noopener\">下载地址</a></p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>背景：阿里巴巴B2B公司存在杭州和美国双机房部署，存在跨机房同步的业务需求，当时早期的数据同步业务， 主要是基于trigger的方式获取增量变更数据；<br>2010开始，阿里开始逐步尝试基于数据库的日志解析，获取增量变更进行同步，由此衍生出增量订阅&amp;消费的业务；<br>定位：基于数据库增量日志准实时解析，提供增量数据订阅&amp;消费（目前主要支持mysql）<br>","more":"</p>\n</blockquote>\n<h2 id=\"Mysql主从同步原理\"><a href=\"#Mysql主从同步原理\" class=\"headerlink\" title=\"Mysql主从同步原理\"></a>Mysql主从同步原理</h2><ul>\n<li><p>架构图：<br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/%E5%9B%BE%E7%89%871.jpg\" alt=\"图1\"><br>Mysql Slave同步原理：<br>a. I/O thread接受binlog<br>b. SQL thread执行变更</p>\n</li>\n<li><p>Binlog Dump交互<br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/%E5%9B%BE%E7%89%872.png\" alt=\"图2\"><br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/%E5%9B%BE%E7%89%873.png\" alt=\"图3\"></p>\n</li>\n</ul>\n<ul>\n<li>Mysql 的binlog <a href=\"https://dev.mysql.com/doc/internals/en/binary-log.html\" target=\"_blank\" rel=\"noopener\">官链</a><h2 id=\"Canal-使用\"><a href=\"#Canal-使用\" class=\"headerlink\" title=\"Canal 使用\"></a>Canal 使用</h2><blockquote>\n<p>canal的原理是基于mysql binlog技术，所以这里一定需要开启mysql的binlog写入功能，建议配置binlog模式为row;</p>\n</blockquote>\n<h3 id=\"安装Canal-Server\"><a href=\"#安装Canal-Server\" class=\"headerlink\" title=\"安装Canal Server\"></a>安装Canal Server</h3></li>\n</ul>\n<ul>\n<li>下载安装包，解压到自定义目录即可；<a href=\"https://github.com/alibaba/canal/releases\" target=\"_blank\" rel=\"noopener\">下载地址</a></li>\n<li><p>修改配置文件，进入canal目录下：<br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190304150020.png\" alt=\"图4\"><br>应用参数：<code>vi conf/example/instance.properties</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#################################################</span><br><span class=\"line\">## mysql serverId , v1.0.26+ will autoGen</span><br><span class=\"line\"># canal.instance.mysql.slaveId=0</span><br><span class=\"line\"></span><br><span class=\"line\"># enable gtid use true/false</span><br><span class=\"line\">canal.instance.gtidon=false</span><br><span class=\"line\"></span><br><span class=\"line\"># position info / 需要改成自己的数据库信息</span><br><span class=\"line\">canal.instance.master.address=127.0.0.1:3306</span><br><span class=\"line\">canal.instance.master.journal.name=</span><br><span class=\"line\">canal.instance.master.position=</span><br><span class=\"line\">canal.instance.master.timestamp=</span><br><span class=\"line\">canal.instance.master.gtid=</span><br><span class=\"line\"></span><br><span class=\"line\"># rds oss binlog</span><br><span class=\"line\">canal.instance.rds.accesskey=</span><br><span class=\"line\">canal.instance.rds.secretkey=</span><br><span class=\"line\">canal.instance.rds.instanceId=</span><br><span class=\"line\"></span><br><span class=\"line\"># table meta tsdb info</span><br><span class=\"line\">canal.instance.tsdb.enable=true</span><br><span class=\"line\">#canal.instance.tsdb.url=jdbc:mysql://127.0.0.1:3306/canal_tsdb</span><br><span class=\"line\">#canal.instance.tsdb.dbUsername=canal</span><br><span class=\"line\">#canal.instance.tsdb.dbPassword=canal</span><br><span class=\"line\"></span><br><span class=\"line\">#canal.instance.standby.address =</span><br><span class=\"line\">#canal.instance.standby.journal.name =</span><br><span class=\"line\">#canal.instance.standby.position =</span><br><span class=\"line\">#canal.instance.standby.timestamp =</span><br><span class=\"line\">#canal.instance.standby.gtid=</span><br><span class=\"line\"></span><br><span class=\"line\"># username/password, 需要改成自己的数据库信息</span><br><span class=\"line\">canal.instance.dbUsername=canal</span><br><span class=\"line\">canal.instance.dbPassword=canal</span><br><span class=\"line\">canal.instance.connectionCharset = UTF-8</span><br><span class=\"line\">canal.instance.defaultDatabaseName =test</span><br><span class=\"line\"># enable druid Decrypt database password</span><br><span class=\"line\">canal.instance.enableDruid=false</span><br><span class=\"line\">#canal.instance.pwdPublicKey=MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBALK4BUxdDltRRE5/zXpVEVPUgunvscYFtEip3pmLlhrWpacX7y7GCMo2/JM6LeHmiiNdH1FWgGCpUfircSwlWKUCAwEAAQ==</span><br><span class=\"line\"></span><br><span class=\"line\"># table regex</span><br><span class=\"line\">canal.instance.filter.regex=.*\\\\..*</span><br><span class=\"line\"># table black regex</span><br><span class=\"line\">canal.instance.filter.black.regex=</span><br><span class=\"line\"></span><br><span class=\"line\"># mq config</span><br><span class=\"line\">canal.mq.topic=example</span><br><span class=\"line\"># dynamic topic route by table regex</span><br><span class=\"line\">#canal.mq.dynamicTopic=.*,mytest\\\\..*,mytest2.user</span><br><span class=\"line\">canal.mq.partition=0</span><br><span class=\"line\"># hash partition config</span><br><span class=\"line\">#canal.mq.partitionsNum=3</span><br><span class=\"line\">#canal.mq.partitionHash=test.table:id^name,.*\\\\..*</span><br><span class=\"line\">#################################################</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>启动canal<br>命令：<code>sh bin/startup.sh</code> #启动  <code>sh bin/stop.sh</code># 停止</p>\n</li>\n<li><p>查看日志<br>命令：<code>tail -f logs/example/example.log</code></p>\n</li>\n</ul>\n<h3 id=\"Canal-客户端使用\"><a href=\"#Canal-客户端使用\" class=\"headerlink\" title=\"Canal 客户端使用\"></a>Canal 客户端使用</h3><p><a href=\"https://github.com/alibaba/canal/wiki/ClientExample\" target=\"_blank\" rel=\"noopener\">参考地址</a></p>\n<h2 id=\"Canal-HA模式\"><a href=\"#Canal-HA模式\" class=\"headerlink\" title=\"Canal HA模式\"></a>Canal HA模式</h2><ul>\n<li>Canal的ha分为两部分，canal server和canal client分别有对应的ha实现：</li>\n</ul>\n<ol>\n<li>canal server:  为了减少对mysql dump的请求，不同server上的instance要求同一时间只能有一个处于running，其他的处于standby状态;</li>\n<li>canal client: 为了保证有序性，一份instance同一时间只能由一个canal client进行get/ack/rollback操作，否则客户端接收无法保证有序</li>\n</ol>\n<ul>\n<li>HA机制的控制主要是依赖了zookeeper的几个特性，watcher和EPHEMERAL节点(和session生命周期绑定)<h2 id=\"Canal-Kafka-RocketMQ-QuickStart\"><a href=\"#Canal-Kafka-RocketMQ-QuickStart\" class=\"headerlink\" title=\"Canal Kafka RocketMQ QuickStart\"></a>Canal Kafka RocketMQ QuickStart</h2></li>\n</ul>\n<h2 id=\"资料文件\"><a href=\"#资料文件\" class=\"headerlink\" title=\"资料文件\"></a>资料文件</h2><p>Canal介绍PPT：<a href=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/canal%E4%BA%A7%E5%93%81%E4%BB%8B%E7%BB%8D.pptx\" target=\"_blank\" rel=\"noopener\">下载地址</a></p>"},{"title":"Maven 构建 scope 详解","date":"2019-10-30T01:39:20.000Z","toc":true,"declare":true,"_content":"\n使用Maven构建项目已经很久了，但是经常使用的默认配置向；默认的依赖配置项中，scope的默认值是compile；还有很多其他值都不太清楚具体作用，今天详细学习下 scope 不同值的作用；\n\n<!-- more -->\n\n## Maven 构建中 scope 详解\n\n- Maven 的哲学思想是，约定优于配置（Convention Over Configuration），Maven 依赖中 scope 的默认值是compile\n- Scope 指定了依赖（第三方jar包）的 作用范围\n- 作用范围包括，所在项目的测试、编译、运行、打包等生命周期\n- 其中，编译和运行还分为\n  - 测试代码的编译和运行\n  - 非测试代码的编译和运行\n\n### scope 的分类\n\n#### test 测试范围\n\n测试范围的依赖（第三方jar包），针对测试相关代码的编译和运行，在通常代码的编译和运行时都不需要，只有在有关测试的代码编译和运行测试代码阶段可用\n\n#### compile 编译范围\n\n依赖默认范围，该依赖需要参与当前项目的编译、测试、运行、打包\n\n#### runntime\n\n- 表示依赖无需参与当前项目的编译，但是后期的运行和测试需要参与\n- 与 compile 相比，跳过编译而已\n- 比如，你可能在编译的时候需要 JDBC API JAR，只有在 运行时才需要 JDBC\n- 貌似是编译时该包不参与，运行时参与\n\n#### provided\n\n>打包的时候可以不用包进去，别的设施会提供。事实上该依赖理论上可以参与编译，测试，运行等周期。相当于compile，但是打包阶段做了exclude操作\n\n- 应用场景是你定义了一个Servlet，此刻得需要Servlet-api.jar 才能编译成功，但是当你达成war 包时，你并不想将 Servlet-api.jar 包进去，因为Tomcat等容器会提供\n- 跟compile 类似，说明JDK、容器或使用者会提供这个依赖，如Servlet.jar\n- 这个依赖只作用在** 编译和测试，该依赖会由系统组件提供，不需手动添加，只存在编译、运行、测试阶段，打包是不用包进去，打包阶段做了exclude 动作\n- 没有传递性\n\n#### system\n\n被依赖项不会从maven仓库下载，而是从本地系统指定路径下寻找，需要 systemPath 属性\n\n-----\n\n### scope 的依赖传递\n\n> A -> B -> C, 当前项目 A，A 依赖于 B，B 依赖于 C，知道 B 在 A 中的 scope，怎么知道 C 在 A 中的 scope\n\n- A 需不需要 C 的问题，本质由 C 在 B 中的 scope 决定\n- 当 C 在 B 中的 scope 是 test 或 provided 时，C **直接被丢弃，A 不依赖 C**\n- 否则 A 依赖 C，C 的 scope 继承与 B 的 scope\n\n-----\n\n### 参考\n\n[Maven 依赖中 scope 详解](https://www.jianshu.com/p/a9bd44a83dc5)","source":"_posts/Maven-scope.md","raw":"---\ntitle: Maven 构建 scope 详解\ndate: 2019-10-30 09:39:20\ntags:\n   - Maven\ncategories:\n   - Maven\ntoc: true\ndeclare: true\n---\n\n使用Maven构建项目已经很久了，但是经常使用的默认配置向；默认的依赖配置项中，scope的默认值是compile；还有很多其他值都不太清楚具体作用，今天详细学习下 scope 不同值的作用；\n\n<!-- more -->\n\n## Maven 构建中 scope 详解\n\n- Maven 的哲学思想是，约定优于配置（Convention Over Configuration），Maven 依赖中 scope 的默认值是compile\n- Scope 指定了依赖（第三方jar包）的 作用范围\n- 作用范围包括，所在项目的测试、编译、运行、打包等生命周期\n- 其中，编译和运行还分为\n  - 测试代码的编译和运行\n  - 非测试代码的编译和运行\n\n### scope 的分类\n\n#### test 测试范围\n\n测试范围的依赖（第三方jar包），针对测试相关代码的编译和运行，在通常代码的编译和运行时都不需要，只有在有关测试的代码编译和运行测试代码阶段可用\n\n#### compile 编译范围\n\n依赖默认范围，该依赖需要参与当前项目的编译、测试、运行、打包\n\n#### runntime\n\n- 表示依赖无需参与当前项目的编译，但是后期的运行和测试需要参与\n- 与 compile 相比，跳过编译而已\n- 比如，你可能在编译的时候需要 JDBC API JAR，只有在 运行时才需要 JDBC\n- 貌似是编译时该包不参与，运行时参与\n\n#### provided\n\n>打包的时候可以不用包进去，别的设施会提供。事实上该依赖理论上可以参与编译，测试，运行等周期。相当于compile，但是打包阶段做了exclude操作\n\n- 应用场景是你定义了一个Servlet，此刻得需要Servlet-api.jar 才能编译成功，但是当你达成war 包时，你并不想将 Servlet-api.jar 包进去，因为Tomcat等容器会提供\n- 跟compile 类似，说明JDK、容器或使用者会提供这个依赖，如Servlet.jar\n- 这个依赖只作用在** 编译和测试，该依赖会由系统组件提供，不需手动添加，只存在编译、运行、测试阶段，打包是不用包进去，打包阶段做了exclude 动作\n- 没有传递性\n\n#### system\n\n被依赖项不会从maven仓库下载，而是从本地系统指定路径下寻找，需要 systemPath 属性\n\n-----\n\n### scope 的依赖传递\n\n> A -> B -> C, 当前项目 A，A 依赖于 B，B 依赖于 C，知道 B 在 A 中的 scope，怎么知道 C 在 A 中的 scope\n\n- A 需不需要 C 的问题，本质由 C 在 B 中的 scope 决定\n- 当 C 在 B 中的 scope 是 test 或 provided 时，C **直接被丢弃，A 不依赖 C**\n- 否则 A 依赖 C，C 的 scope 继承与 B 的 scope\n\n-----\n\n### 参考\n\n[Maven 依赖中 scope 详解](https://www.jianshu.com/p/a9bd44a83dc5)","slug":"Maven-scope","published":1,"updated":"2019-10-30T02:16:17.347Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck2vmvr890001mgu59u8ybxci","content":"<p>使用Maven构建项目已经很久了，但是经常使用的默认配置向；默认的依赖配置项中，scope的默认值是compile；还有很多其他值都不太清楚具体作用，今天详细学习下 scope 不同值的作用；</p>\n<a id=\"more\"></a>\n<h2 id=\"Maven-构建中-scope-详解\"><a href=\"#Maven-构建中-scope-详解\" class=\"headerlink\" title=\"Maven 构建中 scope 详解\"></a>Maven 构建中 scope 详解</h2><ul>\n<li>Maven 的哲学思想是，约定优于配置（Convention Over Configuration），Maven 依赖中 scope 的默认值是compile</li>\n<li>Scope 指定了依赖（第三方jar包）的 作用范围</li>\n<li>作用范围包括，所在项目的测试、编译、运行、打包等生命周期</li>\n<li>其中，编译和运行还分为<ul>\n<li>测试代码的编译和运行</li>\n<li>非测试代码的编译和运行</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"scope-的分类\"><a href=\"#scope-的分类\" class=\"headerlink\" title=\"scope 的分类\"></a>scope 的分类</h3><h4 id=\"test-测试范围\"><a href=\"#test-测试范围\" class=\"headerlink\" title=\"test 测试范围\"></a>test 测试范围</h4><p>测试范围的依赖（第三方jar包），针对测试相关代码的编译和运行，在通常代码的编译和运行时都不需要，只有在有关测试的代码编译和运行测试代码阶段可用</p>\n<h4 id=\"compile-编译范围\"><a href=\"#compile-编译范围\" class=\"headerlink\" title=\"compile 编译范围\"></a>compile 编译范围</h4><p>依赖默认范围，该依赖需要参与当前项目的编译、测试、运行、打包</p>\n<h4 id=\"runntime\"><a href=\"#runntime\" class=\"headerlink\" title=\"runntime\"></a>runntime</h4><ul>\n<li>表示依赖无需参与当前项目的编译，但是后期的运行和测试需要参与</li>\n<li>与 compile 相比，跳过编译而已</li>\n<li>比如，你可能在编译的时候需要 JDBC API JAR，只有在 运行时才需要 JDBC</li>\n<li>貌似是编译时该包不参与，运行时参与</li>\n</ul>\n<h4 id=\"provided\"><a href=\"#provided\" class=\"headerlink\" title=\"provided\"></a>provided</h4><blockquote>\n<p>打包的时候可以不用包进去，别的设施会提供。事实上该依赖理论上可以参与编译，测试，运行等周期。相当于compile，但是打包阶段做了exclude操作</p>\n</blockquote>\n<ul>\n<li>应用场景是你定义了一个Servlet，此刻得需要Servlet-api.jar 才能编译成功，但是当你达成war 包时，你并不想将 Servlet-api.jar 包进去，因为Tomcat等容器会提供</li>\n<li>跟compile 类似，说明JDK、容器或使用者会提供这个依赖，如Servlet.jar</li>\n<li>这个依赖只作用在** 编译和测试，该依赖会由系统组件提供，不需手动添加，只存在编译、运行、测试阶段，打包是不用包进去，打包阶段做了exclude 动作</li>\n<li>没有传递性</li>\n</ul>\n<h4 id=\"system\"><a href=\"#system\" class=\"headerlink\" title=\"system\"></a>system</h4><p>被依赖项不会从maven仓库下载，而是从本地系统指定路径下寻找，需要 systemPath 属性</p>\n<hr>\n<h3 id=\"scope-的依赖传递\"><a href=\"#scope-的依赖传递\" class=\"headerlink\" title=\"scope 的依赖传递\"></a>scope 的依赖传递</h3><blockquote>\n<p>A -&gt; B -&gt; C, 当前项目 A，A 依赖于 B，B 依赖于 C，知道 B 在 A 中的 scope，怎么知道 C 在 A 中的 scope</p>\n</blockquote>\n<ul>\n<li>A 需不需要 C 的问题，本质由 C 在 B 中的 scope 决定</li>\n<li>当 C 在 B 中的 scope 是 test 或 provided 时，C <strong>直接被丢弃，A 不依赖 C</strong></li>\n<li>否则 A 依赖 C，C 的 scope 继承与 B 的 scope</li>\n</ul>\n<hr>\n<h3 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h3><p><a href=\"https://www.jianshu.com/p/a9bd44a83dc5\" target=\"_blank\" rel=\"noopener\">Maven 依赖中 scope 详解</a></p>\n","site":{"data":{}},"excerpt":"<p>使用Maven构建项目已经很久了，但是经常使用的默认配置向；默认的依赖配置项中，scope的默认值是compile；还有很多其他值都不太清楚具体作用，今天详细学习下 scope 不同值的作用；</p>","more":"<h2 id=\"Maven-构建中-scope-详解\"><a href=\"#Maven-构建中-scope-详解\" class=\"headerlink\" title=\"Maven 构建中 scope 详解\"></a>Maven 构建中 scope 详解</h2><ul>\n<li>Maven 的哲学思想是，约定优于配置（Convention Over Configuration），Maven 依赖中 scope 的默认值是compile</li>\n<li>Scope 指定了依赖（第三方jar包）的 作用范围</li>\n<li>作用范围包括，所在项目的测试、编译、运行、打包等生命周期</li>\n<li>其中，编译和运行还分为<ul>\n<li>测试代码的编译和运行</li>\n<li>非测试代码的编译和运行</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"scope-的分类\"><a href=\"#scope-的分类\" class=\"headerlink\" title=\"scope 的分类\"></a>scope 的分类</h3><h4 id=\"test-测试范围\"><a href=\"#test-测试范围\" class=\"headerlink\" title=\"test 测试范围\"></a>test 测试范围</h4><p>测试范围的依赖（第三方jar包），针对测试相关代码的编译和运行，在通常代码的编译和运行时都不需要，只有在有关测试的代码编译和运行测试代码阶段可用</p>\n<h4 id=\"compile-编译范围\"><a href=\"#compile-编译范围\" class=\"headerlink\" title=\"compile 编译范围\"></a>compile 编译范围</h4><p>依赖默认范围，该依赖需要参与当前项目的编译、测试、运行、打包</p>\n<h4 id=\"runntime\"><a href=\"#runntime\" class=\"headerlink\" title=\"runntime\"></a>runntime</h4><ul>\n<li>表示依赖无需参与当前项目的编译，但是后期的运行和测试需要参与</li>\n<li>与 compile 相比，跳过编译而已</li>\n<li>比如，你可能在编译的时候需要 JDBC API JAR，只有在 运行时才需要 JDBC</li>\n<li>貌似是编译时该包不参与，运行时参与</li>\n</ul>\n<h4 id=\"provided\"><a href=\"#provided\" class=\"headerlink\" title=\"provided\"></a>provided</h4><blockquote>\n<p>打包的时候可以不用包进去，别的设施会提供。事实上该依赖理论上可以参与编译，测试，运行等周期。相当于compile，但是打包阶段做了exclude操作</p>\n</blockquote>\n<ul>\n<li>应用场景是你定义了一个Servlet，此刻得需要Servlet-api.jar 才能编译成功，但是当你达成war 包时，你并不想将 Servlet-api.jar 包进去，因为Tomcat等容器会提供</li>\n<li>跟compile 类似，说明JDK、容器或使用者会提供这个依赖，如Servlet.jar</li>\n<li>这个依赖只作用在** 编译和测试，该依赖会由系统组件提供，不需手动添加，只存在编译、运行、测试阶段，打包是不用包进去，打包阶段做了exclude 动作</li>\n<li>没有传递性</li>\n</ul>\n<h4 id=\"system\"><a href=\"#system\" class=\"headerlink\" title=\"system\"></a>system</h4><p>被依赖项不会从maven仓库下载，而是从本地系统指定路径下寻找，需要 systemPath 属性</p>\n<hr>\n<h3 id=\"scope-的依赖传递\"><a href=\"#scope-的依赖传递\" class=\"headerlink\" title=\"scope 的依赖传递\"></a>scope 的依赖传递</h3><blockquote>\n<p>A -&gt; B -&gt; C, 当前项目 A，A 依赖于 B，B 依赖于 C，知道 B 在 A 中的 scope，怎么知道 C 在 A 中的 scope</p>\n</blockquote>\n<ul>\n<li>A 需不需要 C 的问题，本质由 C 在 B 中的 scope 决定</li>\n<li>当 C 在 B 中的 scope 是 test 或 provided 时，C <strong>直接被丢弃，A 不依赖 C</strong></li>\n<li>否则 A 依赖 C，C 的 scope 继承与 B 的 scope</li>\n</ul>\n<hr>\n<h3 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h3><p><a href=\"https://www.jianshu.com/p/a9bd44a83dc5\" target=\"_blank\" rel=\"noopener\">Maven 依赖中 scope 详解</a></p>"},{"title":"Hello World","date":"2018-09-10T09:15:39.000Z","toc":true,"_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n<!-- more -->\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","source":"_posts/Hello-world.md","raw":"---\ntitle: Hello World\ndate: 2018-09-10 17:15:39\ntags:\n   - Hexo\ncategories:\n   - Hexo\ntoc: true\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n<!-- more -->\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","slug":"Hello-world","published":1,"updated":"2019-02-20T06:50:27.679Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck2vmvr8f0004mgu5p96a2huy","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<a id=\"more\"></a>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>","more":"<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>"},{"title":"Git上传本地项目到远程仓库","date":"2019-02-19T09:07:46.000Z","toc":true,"declare":true,"_content":"\n### 初始化本地仓库\n- 初始化目录\n```bash\n# 初始化目录\ngit init\n# 查看你当前目录下文件状态\ngit status\n# git add把项目添加到仓库\ngit add .\n# git commit 提交文件到本地仓库\ngit commit -m \"提交备注\"\n```\n\n<!-- more -->\n\n### 创建SSH KEY 链接远程仓库\n\n- 本地生成ssh key\n```bash\nssh-keygen -t rsa -C \"youremail@example.com\"\n```\n当前用户.ssh目录里找到id_rsa和id_rsa.pub这两个文件，将id_rsa.pub文件内容添加到gitHub的Settings下SSH KEY\n\n\n### 在远程仓库创建一个用来存储代码的仓库\n- 本地关联远程仓库\n```bash\ngit remote add origin https://github.com/aikaiqiang/myLittleApp.git\n```\n- 本地仓库内容推到远程仓库\n```bash\n# 由于新建的远程仓库是空的，所以要加上-u这个参数，等远程仓库里面有了内容之后；\ngit push -u origin master\n# 下次再从本地库上传内容的时候只需下面命令：\ngit push origin master\n```\n\n如果push失败，==可能是远程仓库有文件readme.md==，建议先合并远程仓库内容到本地再push\n```bash\ngit pull --rebase origin master\n```","source":"_posts/Git-push-remote.md","raw":"---\ntitle: Git上传本地项目到远程仓库\ndate: 2019-02-19 17:07:46\ntags:\n   - Git\ncategories:\n   - Git\ntoc: true\ndeclare: true\n---\n\n### 初始化本地仓库\n- 初始化目录\n```bash\n# 初始化目录\ngit init\n# 查看你当前目录下文件状态\ngit status\n# git add把项目添加到仓库\ngit add .\n# git commit 提交文件到本地仓库\ngit commit -m \"提交备注\"\n```\n\n<!-- more -->\n\n### 创建SSH KEY 链接远程仓库\n\n- 本地生成ssh key\n```bash\nssh-keygen -t rsa -C \"youremail@example.com\"\n```\n当前用户.ssh目录里找到id_rsa和id_rsa.pub这两个文件，将id_rsa.pub文件内容添加到gitHub的Settings下SSH KEY\n\n\n### 在远程仓库创建一个用来存储代码的仓库\n- 本地关联远程仓库\n```bash\ngit remote add origin https://github.com/aikaiqiang/myLittleApp.git\n```\n- 本地仓库内容推到远程仓库\n```bash\n# 由于新建的远程仓库是空的，所以要加上-u这个参数，等远程仓库里面有了内容之后；\ngit push -u origin master\n# 下次再从本地库上传内容的时候只需下面命令：\ngit push origin master\n```\n\n如果push失败，==可能是远程仓库有文件readme.md==，建议先合并远程仓库内容到本地再push\n```bash\ngit pull --rebase origin master\n```","slug":"Git-push-remote","published":1,"updated":"2019-02-20T06:48:40.862Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck2vmvr8h0005mgu554cyhblj","content":"<h3 id=\"初始化本地仓库\"><a href=\"#初始化本地仓库\" class=\"headerlink\" title=\"初始化本地仓库\"></a>初始化本地仓库</h3><ul>\n<li>初始化目录<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 初始化目录</span></span><br><span class=\"line\">git init</span><br><span class=\"line\"><span class=\"comment\"># 查看你当前目录下文件状态</span></span><br><span class=\"line\">git status</span><br><span class=\"line\"><span class=\"comment\"># git add把项目添加到仓库</span></span><br><span class=\"line\">git add .</span><br><span class=\"line\"><span class=\"comment\"># git commit 提交文件到本地仓库</span></span><br><span class=\"line\">git commit -m <span class=\"string\">\"提交备注\"</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<a id=\"more\"></a>\n<h3 id=\"创建SSH-KEY-链接远程仓库\"><a href=\"#创建SSH-KEY-链接远程仓库\" class=\"headerlink\" title=\"创建SSH KEY 链接远程仓库\"></a>创建SSH KEY 链接远程仓库</h3><ul>\n<li>本地生成ssh key<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -C <span class=\"string\">\"youremail@example.com\"</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>当前用户.ssh目录里找到id_rsa和id_rsa.pub这两个文件，将id_rsa.pub文件内容添加到gitHub的Settings下SSH KEY</p>\n<h3 id=\"在远程仓库创建一个用来存储代码的仓库\"><a href=\"#在远程仓库创建一个用来存储代码的仓库\" class=\"headerlink\" title=\"在远程仓库创建一个用来存储代码的仓库\"></a>在远程仓库创建一个用来存储代码的仓库</h3><ul>\n<li><p>本地关联远程仓库</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add origin https://github.com/aikaiqiang/myLittleApp.git</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>本地仓库内容推到远程仓库</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 由于新建的远程仓库是空的，所以要加上-u这个参数，等远程仓库里面有了内容之后；</span></span><br><span class=\"line\">git push -u origin master</span><br><span class=\"line\"><span class=\"comment\"># 下次再从本地库上传内容的时候只需下面命令：</span></span><br><span class=\"line\">git push origin master</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>如果push失败，==可能是远程仓库有文件readme.md==，建议先合并远程仓库内容到本地再push<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git pull --rebase origin master</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"初始化本地仓库\"><a href=\"#初始化本地仓库\" class=\"headerlink\" title=\"初始化本地仓库\"></a>初始化本地仓库</h3><ul>\n<li>初始化目录<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 初始化目录</span></span><br><span class=\"line\">git init</span><br><span class=\"line\"><span class=\"comment\"># 查看你当前目录下文件状态</span></span><br><span class=\"line\">git status</span><br><span class=\"line\"><span class=\"comment\"># git add把项目添加到仓库</span></span><br><span class=\"line\">git add .</span><br><span class=\"line\"><span class=\"comment\"># git commit 提交文件到本地仓库</span></span><br><span class=\"line\">git commit -m <span class=\"string\">\"提交备注\"</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>","more":"<h3 id=\"创建SSH-KEY-链接远程仓库\"><a href=\"#创建SSH-KEY-链接远程仓库\" class=\"headerlink\" title=\"创建SSH KEY 链接远程仓库\"></a>创建SSH KEY 链接远程仓库</h3><ul>\n<li>本地生成ssh key<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -C <span class=\"string\">\"youremail@example.com\"</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>当前用户.ssh目录里找到id_rsa和id_rsa.pub这两个文件，将id_rsa.pub文件内容添加到gitHub的Settings下SSH KEY</p>\n<h3 id=\"在远程仓库创建一个用来存储代码的仓库\"><a href=\"#在远程仓库创建一个用来存储代码的仓库\" class=\"headerlink\" title=\"在远程仓库创建一个用来存储代码的仓库\"></a>在远程仓库创建一个用来存储代码的仓库</h3><ul>\n<li><p>本地关联远程仓库</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add origin https://github.com/aikaiqiang/myLittleApp.git</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>本地仓库内容推到远程仓库</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 由于新建的远程仓库是空的，所以要加上-u这个参数，等远程仓库里面有了内容之后；</span></span><br><span class=\"line\">git push -u origin master</span><br><span class=\"line\"><span class=\"comment\"># 下次再从本地库上传内容的时候只需下面命令：</span></span><br><span class=\"line\">git push origin master</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>如果push失败，==可能是远程仓库有文件readme.md==，建议先合并远程仓库内容到本地再push<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git pull --rebase origin master</span><br></pre></td></tr></table></figure></p>"},{"title":"Harbor修改端口号","date":"2018-10-12T09:15:39.000Z","toc":true,"declare":true,"_content":"\n背景：之前安装Harbor时默认安装的，服务端口默认占用80和443，后来有同事要用到80端口，为了满足同时的需求，不得不麻烦自己修改端口了。\n\n### 修改docker-compose.yml文件端口映射为1180 > 80:\n\n在Harbor路径下找到文件 docker-compose.yml，我本地路径是 /usr/local/harbor\n\n<!-- more -->\n\n{% asset_img harbor_dir.png  %}\n\n编辑文件：\n```bash\n# vim docker-compose.yml\nproxy:\n    image: vmware/nginx-photon:1.11.13\n    container_name: nginx\n    restart: always\n    volumes:\n      - ./common/config/nginx:/etc/nginx:z\n    networks:\n      - harbor\n    ports:\n      - 8088:80\n      - 443:443\n      - 4443:4443\n    depends_on:\n      - mysql\n      - registry\n      - ui\n      - log\n    logging:\n      driver: \"syslog\"\n      options:\n        syslog-address: \"tcp://127.0.0.1:1514\"\n        tag: \"proxy\"\n```\n### 修改common/templates/registry/config.yml文件仓库地址\n```bash\n# vim common/templates/registry/config.yml\n# 找到如下地方，添加端口号\nauth:\n  token:\n    issuer: harbor-token-issuer\n    realm: $ui_url:8088/service/token\n    rootcertbundle: /etc/registry/root.crt\n    service: harbor-registry\n```\n\n### 停止harbor，重新启动并生成配置文件\n```bash\n# docker-compose stop\n# ./install.sh\n```\n\n### 遇到问题：\n1. 停止服务后，在生成配置文件的时候，无法删除容器，提示“磁盘在忙”，由于容器挂载数据卷，无法直接删除。\n>解决：先查出进程ID 进行杀掉，然后再删除：\n\n{% asset_img harbor_kill.png %}\n\n代码：（example）\n```bash\ngrep c413f59ac6f0395634567891119784ad3ec61aad98892624395b57388beb3dae /proc/*/mountinfo\nkill -9 进程ID\n```\n\n重新运行 `install.sh`\n\n参考地址：\n\n- https://www.cnblogs.com/huangjc/p/6420355.html\n- https://www.cnblogs.com/zhink/p/9244917.html","source":"_posts/Harbor-setting.md","raw":"---\ntitle: Harbor修改端口号\ndate: 2018-10-12 17:15:39\ntags:\n   - Docker\n   - Harbor\n   - Docker Registry\ncategories:\n   - Docker\ntoc: true\ndeclare: true\n---\n\n背景：之前安装Harbor时默认安装的，服务端口默认占用80和443，后来有同事要用到80端口，为了满足同时的需求，不得不麻烦自己修改端口了。\n\n### 修改docker-compose.yml文件端口映射为1180 > 80:\n\n在Harbor路径下找到文件 docker-compose.yml，我本地路径是 /usr/local/harbor\n\n<!-- more -->\n\n{% asset_img harbor_dir.png  %}\n\n编辑文件：\n```bash\n# vim docker-compose.yml\nproxy:\n    image: vmware/nginx-photon:1.11.13\n    container_name: nginx\n    restart: always\n    volumes:\n      - ./common/config/nginx:/etc/nginx:z\n    networks:\n      - harbor\n    ports:\n      - 8088:80\n      - 443:443\n      - 4443:4443\n    depends_on:\n      - mysql\n      - registry\n      - ui\n      - log\n    logging:\n      driver: \"syslog\"\n      options:\n        syslog-address: \"tcp://127.0.0.1:1514\"\n        tag: \"proxy\"\n```\n### 修改common/templates/registry/config.yml文件仓库地址\n```bash\n# vim common/templates/registry/config.yml\n# 找到如下地方，添加端口号\nauth:\n  token:\n    issuer: harbor-token-issuer\n    realm: $ui_url:8088/service/token\n    rootcertbundle: /etc/registry/root.crt\n    service: harbor-registry\n```\n\n### 停止harbor，重新启动并生成配置文件\n```bash\n# docker-compose stop\n# ./install.sh\n```\n\n### 遇到问题：\n1. 停止服务后，在生成配置文件的时候，无法删除容器，提示“磁盘在忙”，由于容器挂载数据卷，无法直接删除。\n>解决：先查出进程ID 进行杀掉，然后再删除：\n\n{% asset_img harbor_kill.png %}\n\n代码：（example）\n```bash\ngrep c413f59ac6f0395634567891119784ad3ec61aad98892624395b57388beb3dae /proc/*/mountinfo\nkill -9 进程ID\n```\n\n重新运行 `install.sh`\n\n参考地址：\n\n- https://www.cnblogs.com/huangjc/p/6420355.html\n- https://www.cnblogs.com/zhink/p/9244917.html","slug":"Harbor-setting","published":1,"updated":"2019-02-20T06:52:12.113Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck2vmvr8i0006mgu5dd7z9fwt","content":"<p>背景：之前安装Harbor时默认安装的，服务端口默认占用80和443，后来有同事要用到80端口，为了满足同时的需求，不得不麻烦自己修改端口了。</p>\n<h3 id=\"修改docker-compose-yml文件端口映射为1180-gt-80\"><a href=\"#修改docker-compose-yml文件端口映射为1180-gt-80\" class=\"headerlink\" title=\"修改docker-compose.yml文件端口映射为1180 &gt; 80:\"></a>修改docker-compose.yml文件端口映射为1180 &gt; 80:</h3><p>在Harbor路径下找到文件 docker-compose.yml，我本地路径是 /usr/local/harbor</p>\n<a id=\"more\"></a>\n\n<p>编辑文件：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim docker-compose.yml</span></span><br><span class=\"line\">proxy:</span><br><span class=\"line\">    image: vmware/nginx-photon:1.11.13</span><br><span class=\"line\">    container_name: nginx</span><br><span class=\"line\">    restart: always</span><br><span class=\"line\">    volumes:</span><br><span class=\"line\">      - ./common/config/nginx:/etc/nginx:z</span><br><span class=\"line\">    networks:</span><br><span class=\"line\">      - harbor</span><br><span class=\"line\">    ports:</span><br><span class=\"line\">      - 8088:80</span><br><span class=\"line\">      - 443:443</span><br><span class=\"line\">      - 4443:4443</span><br><span class=\"line\">    depends_on:</span><br><span class=\"line\">      - mysql</span><br><span class=\"line\">      - registry</span><br><span class=\"line\">      - ui</span><br><span class=\"line\">      - <span class=\"built_in\">log</span></span><br><span class=\"line\">    logging:</span><br><span class=\"line\">      driver: <span class=\"string\">\"syslog\"</span></span><br><span class=\"line\">      options:</span><br><span class=\"line\">        syslog-address: <span class=\"string\">\"tcp://127.0.0.1:1514\"</span></span><br><span class=\"line\">        tag: <span class=\"string\">\"proxy\"</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"修改common-templates-registry-config-yml文件仓库地址\"><a href=\"#修改common-templates-registry-config-yml文件仓库地址\" class=\"headerlink\" title=\"修改common/templates/registry/config.yml文件仓库地址\"></a>修改common/templates/registry/config.yml文件仓库地址</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim common/templates/registry/config.yml</span></span><br><span class=\"line\"><span class=\"comment\"># 找到如下地方，添加端口号</span></span><br><span class=\"line\">auth:</span><br><span class=\"line\">  token:</span><br><span class=\"line\">    issuer: harbor-token-issuer</span><br><span class=\"line\">    realm: <span class=\"variable\">$ui_url</span>:8088/service/token</span><br><span class=\"line\">    rootcertbundle: /etc/registry/root.crt</span><br><span class=\"line\">    service: harbor-registry</span><br></pre></td></tr></table></figure>\n<h3 id=\"停止harbor，重新启动并生成配置文件\"><a href=\"#停止harbor，重新启动并生成配置文件\" class=\"headerlink\" title=\"停止harbor，重新启动并生成配置文件\"></a>停止harbor，重新启动并生成配置文件</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># docker-compose stop</span></span><br><span class=\"line\"><span class=\"comment\"># ./install.sh</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"遇到问题：\"><a href=\"#遇到问题：\" class=\"headerlink\" title=\"遇到问题：\"></a>遇到问题：</h3><ol>\n<li>停止服务后，在生成配置文件的时候，无法删除容器，提示“磁盘在忙”，由于容器挂载数据卷，无法直接删除。<blockquote>\n<p>解决：先查出进程ID 进行杀掉，然后再删除：</p>\n</blockquote>\n</li>\n</ol>\n\n<p>代码：（example）<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep c413f59ac6f0395634567891119784ad3ec61aad98892624395b57388beb3dae /proc/*/mountinfo</span><br><span class=\"line\"><span class=\"built_in\">kill</span> -9 进程ID</span><br></pre></td></tr></table></figure></p>\n<p>重新运行 <code>install.sh</code></p>\n<p>参考地址：</p>\n<ul>\n<li><a href=\"https://www.cnblogs.com/huangjc/p/6420355.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/huangjc/p/6420355.html</a></li>\n<li><a href=\"https://www.cnblogs.com/zhink/p/9244917.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/zhink/p/9244917.html</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>背景：之前安装Harbor时默认安装的，服务端口默认占用80和443，后来有同事要用到80端口，为了满足同时的需求，不得不麻烦自己修改端口了。</p>\n<h3 id=\"修改docker-compose-yml文件端口映射为1180-gt-80\"><a href=\"#修改docker-compose-yml文件端口映射为1180-gt-80\" class=\"headerlink\" title=\"修改docker-compose.yml文件端口映射为1180 &gt; 80:\"></a>修改docker-compose.yml文件端口映射为1180 &gt; 80:</h3><p>在Harbor路径下找到文件 docker-compose.yml，我本地路径是 /usr/local/harbor</p>","more":"<p>编辑文件：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim docker-compose.yml</span></span><br><span class=\"line\">proxy:</span><br><span class=\"line\">    image: vmware/nginx-photon:1.11.13</span><br><span class=\"line\">    container_name: nginx</span><br><span class=\"line\">    restart: always</span><br><span class=\"line\">    volumes:</span><br><span class=\"line\">      - ./common/config/nginx:/etc/nginx:z</span><br><span class=\"line\">    networks:</span><br><span class=\"line\">      - harbor</span><br><span class=\"line\">    ports:</span><br><span class=\"line\">      - 8088:80</span><br><span class=\"line\">      - 443:443</span><br><span class=\"line\">      - 4443:4443</span><br><span class=\"line\">    depends_on:</span><br><span class=\"line\">      - mysql</span><br><span class=\"line\">      - registry</span><br><span class=\"line\">      - ui</span><br><span class=\"line\">      - <span class=\"built_in\">log</span></span><br><span class=\"line\">    logging:</span><br><span class=\"line\">      driver: <span class=\"string\">\"syslog\"</span></span><br><span class=\"line\">      options:</span><br><span class=\"line\">        syslog-address: <span class=\"string\">\"tcp://127.0.0.1:1514\"</span></span><br><span class=\"line\">        tag: <span class=\"string\">\"proxy\"</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"修改common-templates-registry-config-yml文件仓库地址\"><a href=\"#修改common-templates-registry-config-yml文件仓库地址\" class=\"headerlink\" title=\"修改common/templates/registry/config.yml文件仓库地址\"></a>修改common/templates/registry/config.yml文件仓库地址</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim common/templates/registry/config.yml</span></span><br><span class=\"line\"><span class=\"comment\"># 找到如下地方，添加端口号</span></span><br><span class=\"line\">auth:</span><br><span class=\"line\">  token:</span><br><span class=\"line\">    issuer: harbor-token-issuer</span><br><span class=\"line\">    realm: <span class=\"variable\">$ui_url</span>:8088/service/token</span><br><span class=\"line\">    rootcertbundle: /etc/registry/root.crt</span><br><span class=\"line\">    service: harbor-registry</span><br></pre></td></tr></table></figure>\n<h3 id=\"停止harbor，重新启动并生成配置文件\"><a href=\"#停止harbor，重新启动并生成配置文件\" class=\"headerlink\" title=\"停止harbor，重新启动并生成配置文件\"></a>停止harbor，重新启动并生成配置文件</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># docker-compose stop</span></span><br><span class=\"line\"><span class=\"comment\"># ./install.sh</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"遇到问题：\"><a href=\"#遇到问题：\" class=\"headerlink\" title=\"遇到问题：\"></a>遇到问题：</h3><ol>\n<li>停止服务后，在生成配置文件的时候，无法删除容器，提示“磁盘在忙”，由于容器挂载数据卷，无法直接删除。<blockquote>\n<p>解决：先查出进程ID 进行杀掉，然后再删除：</p>\n</blockquote>\n</li>\n</ol>\n\n<p>代码：（example）<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep c413f59ac6f0395634567891119784ad3ec61aad98892624395b57388beb3dae /proc/*/mountinfo</span><br><span class=\"line\"><span class=\"built_in\">kill</span> -9 进程ID</span><br></pre></td></tr></table></figure></p>\n<p>重新运行 <code>install.sh</code></p>\n<p>参考地址：</p>\n<ul>\n<li><a href=\"https://www.cnblogs.com/huangjc/p/6420355.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/huangjc/p/6420355.html</a></li>\n<li><a href=\"https://www.cnblogs.com/zhink/p/9244917.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/zhink/p/9244917.html</a></li>\n</ul>"},{"title":"Knowledge-overview","date":"2019-02-22T05:06:28.000Z","toc":true,"_content":"\n> [知识总览来源](http://www.iocoder.cn/)\n\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/wallpaper/alone-boulders-idyllic-426893.jpg)\n\n<!-- more -->\n\n### API网关\n#### Spring Cloud Gateway\n#### Zuul\n#### Kong\n\n### 服务调用\n#### Dubbo\n#### SOFA RPC\n#### Motan\n#### Ribbon\n\n### 消息队列\n#### RocketMQ\n#### Kafka\n#### RabbitMQ\n#### ActiveMQ\n\n### 作业调度（Job）\n#### Elastic Job Lite\n#### Elastic Job Cloud\n#### Quartz\n#### XXL-Job\n\n### 注册中心\n#### Eureka\n#### Zookeeper\n#### Nacos\n#### Consul Etcd\n\n### 配置中心\n#### Apollo\n#### Nacos\n#### Spring Cloud Config\n###  Disconf\n\n### 链路追踪\n#### SkyWalking\n#### Zipkin\n#### Pinpoint\n#### CAT\n\n### 服务保障（熔断/降级）\n#### Hystrix\n#### Sentinel\n#### Resilience4j\n\n### 服务器\n#### Netty\n#### Tomcat\n#### Jetty\n#### Nginx\n\n### Java\n#### JDK（JUC）\n#### Java并发\n#### Java多线程\n#### JVM\n\n### J2EE\n#### Spring\n#### Spring Boot\n#### Spring Cloud\n\n### Web框架\n#### Spring MVC\n#### Spring Security\n#### Spring Webflux\n#### Shiro\n\n### ORM框架\n#### Mybatis\n#### Hibernate\n#### Spring Data JPA\n\n### 数据库连接池\n#### Druid\n#### HikariCP\n\n### 数据库中间件\n#### Sharding JDBC\n#### Sharding Sphere\n#### MyCAT\n#### Canal\n\n### 分布式事务\n#### TCC Transaction\n#### Fescar\n#### Happylifeplat TCC\n#### Myth\n\n### 数据库（含NoSql）\n#### Mysql\n#### Redis\n#### MongoDB\n#### TiDB\n\n### 搜索引擎\n#### Lucene\n#### Elasticsearch\n#### Solr\n\n### 工具类\n#### Guava\n#### RxJava\n\n### 容器服务\n#### Linux\n#### Docker\n#### Kubernetes\n#### Swarm\n\n### 集群管理工具\n#### Racher\n#### OpenStack\n\n### DevOps\n#### Jenkins\n#### Travis CI\n#### Coding\n#### Azure DevOps\n\n### 开发\n#### Git\n#### Maven\n#### Jenkins（CI/CD持续集成）\n#### IDE(idea,eclipse)\n\n### 前端框架\n#### React\n#### Vue\n#### Angular\n\n### 大数据\n#### HBase\n#### Hive\n#### Spark\n#### Flink\n\n### 其他语言\n#### Go\n#### Python\n\n\n\n","source":"_posts/Knowledge-overview.md","raw":"---\ntitle: Knowledge-overview\ndate: 2019-02-22 13:06:28\ntags:\n   - technology\ntoc: true\n---\n\n> [知识总览来源](http://www.iocoder.cn/)\n\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/wallpaper/alone-boulders-idyllic-426893.jpg)\n\n<!-- more -->\n\n### API网关\n#### Spring Cloud Gateway\n#### Zuul\n#### Kong\n\n### 服务调用\n#### Dubbo\n#### SOFA RPC\n#### Motan\n#### Ribbon\n\n### 消息队列\n#### RocketMQ\n#### Kafka\n#### RabbitMQ\n#### ActiveMQ\n\n### 作业调度（Job）\n#### Elastic Job Lite\n#### Elastic Job Cloud\n#### Quartz\n#### XXL-Job\n\n### 注册中心\n#### Eureka\n#### Zookeeper\n#### Nacos\n#### Consul Etcd\n\n### 配置中心\n#### Apollo\n#### Nacos\n#### Spring Cloud Config\n###  Disconf\n\n### 链路追踪\n#### SkyWalking\n#### Zipkin\n#### Pinpoint\n#### CAT\n\n### 服务保障（熔断/降级）\n#### Hystrix\n#### Sentinel\n#### Resilience4j\n\n### 服务器\n#### Netty\n#### Tomcat\n#### Jetty\n#### Nginx\n\n### Java\n#### JDK（JUC）\n#### Java并发\n#### Java多线程\n#### JVM\n\n### J2EE\n#### Spring\n#### Spring Boot\n#### Spring Cloud\n\n### Web框架\n#### Spring MVC\n#### Spring Security\n#### Spring Webflux\n#### Shiro\n\n### ORM框架\n#### Mybatis\n#### Hibernate\n#### Spring Data JPA\n\n### 数据库连接池\n#### Druid\n#### HikariCP\n\n### 数据库中间件\n#### Sharding JDBC\n#### Sharding Sphere\n#### MyCAT\n#### Canal\n\n### 分布式事务\n#### TCC Transaction\n#### Fescar\n#### Happylifeplat TCC\n#### Myth\n\n### 数据库（含NoSql）\n#### Mysql\n#### Redis\n#### MongoDB\n#### TiDB\n\n### 搜索引擎\n#### Lucene\n#### Elasticsearch\n#### Solr\n\n### 工具类\n#### Guava\n#### RxJava\n\n### 容器服务\n#### Linux\n#### Docker\n#### Kubernetes\n#### Swarm\n\n### 集群管理工具\n#### Racher\n#### OpenStack\n\n### DevOps\n#### Jenkins\n#### Travis CI\n#### Coding\n#### Azure DevOps\n\n### 开发\n#### Git\n#### Maven\n#### Jenkins（CI/CD持续集成）\n#### IDE(idea,eclipse)\n\n### 前端框架\n#### React\n#### Vue\n#### Angular\n\n### 大数据\n#### HBase\n#### Hive\n#### Spark\n#### Flink\n\n### 其他语言\n#### Go\n#### Python\n\n\n\n","slug":"Knowledge-overview","published":1,"updated":"2019-02-26T08:15:45.040Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck2vmvr8k0009mgu5pudx3jgt","content":"<blockquote>\n<p><a href=\"http://www.iocoder.cn/\" target=\"_blank\" rel=\"noopener\">知识总览来源</a></p>\n</blockquote>\n<p><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/wallpaper/alone-boulders-idyllic-426893.jpg\" alt=\"\"></p>\n<a id=\"more\"></a>\n<h3 id=\"API网关\"><a href=\"#API网关\" class=\"headerlink\" title=\"API网关\"></a>API网关</h3><h4 id=\"Spring-Cloud-Gateway\"><a href=\"#Spring-Cloud-Gateway\" class=\"headerlink\" title=\"Spring Cloud Gateway\"></a>Spring Cloud Gateway</h4><h4 id=\"Zuul\"><a href=\"#Zuul\" class=\"headerlink\" title=\"Zuul\"></a>Zuul</h4><h4 id=\"Kong\"><a href=\"#Kong\" class=\"headerlink\" title=\"Kong\"></a>Kong</h4><h3 id=\"服务调用\"><a href=\"#服务调用\" class=\"headerlink\" title=\"服务调用\"></a>服务调用</h3><h4 id=\"Dubbo\"><a href=\"#Dubbo\" class=\"headerlink\" title=\"Dubbo\"></a>Dubbo</h4><h4 id=\"SOFA-RPC\"><a href=\"#SOFA-RPC\" class=\"headerlink\" title=\"SOFA RPC\"></a>SOFA RPC</h4><h4 id=\"Motan\"><a href=\"#Motan\" class=\"headerlink\" title=\"Motan\"></a>Motan</h4><h4 id=\"Ribbon\"><a href=\"#Ribbon\" class=\"headerlink\" title=\"Ribbon\"></a>Ribbon</h4><h3 id=\"消息队列\"><a href=\"#消息队列\" class=\"headerlink\" title=\"消息队列\"></a>消息队列</h3><h4 id=\"RocketMQ\"><a href=\"#RocketMQ\" class=\"headerlink\" title=\"RocketMQ\"></a>RocketMQ</h4><h4 id=\"Kafka\"><a href=\"#Kafka\" class=\"headerlink\" title=\"Kafka\"></a>Kafka</h4><h4 id=\"RabbitMQ\"><a href=\"#RabbitMQ\" class=\"headerlink\" title=\"RabbitMQ\"></a>RabbitMQ</h4><h4 id=\"ActiveMQ\"><a href=\"#ActiveMQ\" class=\"headerlink\" title=\"ActiveMQ\"></a>ActiveMQ</h4><h3 id=\"作业调度（Job）\"><a href=\"#作业调度（Job）\" class=\"headerlink\" title=\"作业调度（Job）\"></a>作业调度（Job）</h3><h4 id=\"Elastic-Job-Lite\"><a href=\"#Elastic-Job-Lite\" class=\"headerlink\" title=\"Elastic Job Lite\"></a>Elastic Job Lite</h4><h4 id=\"Elastic-Job-Cloud\"><a href=\"#Elastic-Job-Cloud\" class=\"headerlink\" title=\"Elastic Job Cloud\"></a>Elastic Job Cloud</h4><h4 id=\"Quartz\"><a href=\"#Quartz\" class=\"headerlink\" title=\"Quartz\"></a>Quartz</h4><h4 id=\"XXL-Job\"><a href=\"#XXL-Job\" class=\"headerlink\" title=\"XXL-Job\"></a>XXL-Job</h4><h3 id=\"注册中心\"><a href=\"#注册中心\" class=\"headerlink\" title=\"注册中心\"></a>注册中心</h3><h4 id=\"Eureka\"><a href=\"#Eureka\" class=\"headerlink\" title=\"Eureka\"></a>Eureka</h4><h4 id=\"Zookeeper\"><a href=\"#Zookeeper\" class=\"headerlink\" title=\"Zookeeper\"></a>Zookeeper</h4><h4 id=\"Nacos\"><a href=\"#Nacos\" class=\"headerlink\" title=\"Nacos\"></a>Nacos</h4><h4 id=\"Consul-Etcd\"><a href=\"#Consul-Etcd\" class=\"headerlink\" title=\"Consul Etcd\"></a>Consul Etcd</h4><h3 id=\"配置中心\"><a href=\"#配置中心\" class=\"headerlink\" title=\"配置中心\"></a>配置中心</h3><h4 id=\"Apollo\"><a href=\"#Apollo\" class=\"headerlink\" title=\"Apollo\"></a>Apollo</h4><h4 id=\"Nacos-1\"><a href=\"#Nacos-1\" class=\"headerlink\" title=\"Nacos\"></a>Nacos</h4><h4 id=\"Spring-Cloud-Config\"><a href=\"#Spring-Cloud-Config\" class=\"headerlink\" title=\"Spring Cloud Config\"></a>Spring Cloud Config</h4><h3 id=\"Disconf\"><a href=\"#Disconf\" class=\"headerlink\" title=\"Disconf\"></a>Disconf</h3><h3 id=\"链路追踪\"><a href=\"#链路追踪\" class=\"headerlink\" title=\"链路追踪\"></a>链路追踪</h3><h4 id=\"SkyWalking\"><a href=\"#SkyWalking\" class=\"headerlink\" title=\"SkyWalking\"></a>SkyWalking</h4><h4 id=\"Zipkin\"><a href=\"#Zipkin\" class=\"headerlink\" title=\"Zipkin\"></a>Zipkin</h4><h4 id=\"Pinpoint\"><a href=\"#Pinpoint\" class=\"headerlink\" title=\"Pinpoint\"></a>Pinpoint</h4><h4 id=\"CAT\"><a href=\"#CAT\" class=\"headerlink\" title=\"CAT\"></a>CAT</h4><h3 id=\"服务保障（熔断-降级）\"><a href=\"#服务保障（熔断-降级）\" class=\"headerlink\" title=\"服务保障（熔断/降级）\"></a>服务保障（熔断/降级）</h3><h4 id=\"Hystrix\"><a href=\"#Hystrix\" class=\"headerlink\" title=\"Hystrix\"></a>Hystrix</h4><h4 id=\"Sentinel\"><a href=\"#Sentinel\" class=\"headerlink\" title=\"Sentinel\"></a>Sentinel</h4><h4 id=\"Resilience4j\"><a href=\"#Resilience4j\" class=\"headerlink\" title=\"Resilience4j\"></a>Resilience4j</h4><h3 id=\"服务器\"><a href=\"#服务器\" class=\"headerlink\" title=\"服务器\"></a>服务器</h3><h4 id=\"Netty\"><a href=\"#Netty\" class=\"headerlink\" title=\"Netty\"></a>Netty</h4><h4 id=\"Tomcat\"><a href=\"#Tomcat\" class=\"headerlink\" title=\"Tomcat\"></a>Tomcat</h4><h4 id=\"Jetty\"><a href=\"#Jetty\" class=\"headerlink\" title=\"Jetty\"></a>Jetty</h4><h4 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h4><h3 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h3><h4 id=\"JDK（JUC）\"><a href=\"#JDK（JUC）\" class=\"headerlink\" title=\"JDK（JUC）\"></a>JDK（JUC）</h4><h4 id=\"Java并发\"><a href=\"#Java并发\" class=\"headerlink\" title=\"Java并发\"></a>Java并发</h4><h4 id=\"Java多线程\"><a href=\"#Java多线程\" class=\"headerlink\" title=\"Java多线程\"></a>Java多线程</h4><h4 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h4><h3 id=\"J2EE\"><a href=\"#J2EE\" class=\"headerlink\" title=\"J2EE\"></a>J2EE</h3><h4 id=\"Spring\"><a href=\"#Spring\" class=\"headerlink\" title=\"Spring\"></a>Spring</h4><h4 id=\"Spring-Boot\"><a href=\"#Spring-Boot\" class=\"headerlink\" title=\"Spring Boot\"></a>Spring Boot</h4><h4 id=\"Spring-Cloud\"><a href=\"#Spring-Cloud\" class=\"headerlink\" title=\"Spring Cloud\"></a>Spring Cloud</h4><h3 id=\"Web框架\"><a href=\"#Web框架\" class=\"headerlink\" title=\"Web框架\"></a>Web框架</h3><h4 id=\"Spring-MVC\"><a href=\"#Spring-MVC\" class=\"headerlink\" title=\"Spring MVC\"></a>Spring MVC</h4><h4 id=\"Spring-Security\"><a href=\"#Spring-Security\" class=\"headerlink\" title=\"Spring Security\"></a>Spring Security</h4><h4 id=\"Spring-Webflux\"><a href=\"#Spring-Webflux\" class=\"headerlink\" title=\"Spring Webflux\"></a>Spring Webflux</h4><h4 id=\"Shiro\"><a href=\"#Shiro\" class=\"headerlink\" title=\"Shiro\"></a>Shiro</h4><h3 id=\"ORM框架\"><a href=\"#ORM框架\" class=\"headerlink\" title=\"ORM框架\"></a>ORM框架</h3><h4 id=\"Mybatis\"><a href=\"#Mybatis\" class=\"headerlink\" title=\"Mybatis\"></a>Mybatis</h4><h4 id=\"Hibernate\"><a href=\"#Hibernate\" class=\"headerlink\" title=\"Hibernate\"></a>Hibernate</h4><h4 id=\"Spring-Data-JPA\"><a href=\"#Spring-Data-JPA\" class=\"headerlink\" title=\"Spring Data JPA\"></a>Spring Data JPA</h4><h3 id=\"数据库连接池\"><a href=\"#数据库连接池\" class=\"headerlink\" title=\"数据库连接池\"></a>数据库连接池</h3><h4 id=\"Druid\"><a href=\"#Druid\" class=\"headerlink\" title=\"Druid\"></a>Druid</h4><h4 id=\"HikariCP\"><a href=\"#HikariCP\" class=\"headerlink\" title=\"HikariCP\"></a>HikariCP</h4><h3 id=\"数据库中间件\"><a href=\"#数据库中间件\" class=\"headerlink\" title=\"数据库中间件\"></a>数据库中间件</h3><h4 id=\"Sharding-JDBC\"><a href=\"#Sharding-JDBC\" class=\"headerlink\" title=\"Sharding JDBC\"></a>Sharding JDBC</h4><h4 id=\"Sharding-Sphere\"><a href=\"#Sharding-Sphere\" class=\"headerlink\" title=\"Sharding Sphere\"></a>Sharding Sphere</h4><h4 id=\"MyCAT\"><a href=\"#MyCAT\" class=\"headerlink\" title=\"MyCAT\"></a>MyCAT</h4><h4 id=\"Canal\"><a href=\"#Canal\" class=\"headerlink\" title=\"Canal\"></a>Canal</h4><h3 id=\"分布式事务\"><a href=\"#分布式事务\" class=\"headerlink\" title=\"分布式事务\"></a>分布式事务</h3><h4 id=\"TCC-Transaction\"><a href=\"#TCC-Transaction\" class=\"headerlink\" title=\"TCC Transaction\"></a>TCC Transaction</h4><h4 id=\"Fescar\"><a href=\"#Fescar\" class=\"headerlink\" title=\"Fescar\"></a>Fescar</h4><h4 id=\"Happylifeplat-TCC\"><a href=\"#Happylifeplat-TCC\" class=\"headerlink\" title=\"Happylifeplat TCC\"></a>Happylifeplat TCC</h4><h4 id=\"Myth\"><a href=\"#Myth\" class=\"headerlink\" title=\"Myth\"></a>Myth</h4><h3 id=\"数据库（含NoSql）\"><a href=\"#数据库（含NoSql）\" class=\"headerlink\" title=\"数据库（含NoSql）\"></a>数据库（含NoSql）</h3><h4 id=\"Mysql\"><a href=\"#Mysql\" class=\"headerlink\" title=\"Mysql\"></a>Mysql</h4><h4 id=\"Redis\"><a href=\"#Redis\" class=\"headerlink\" title=\"Redis\"></a>Redis</h4><h4 id=\"MongoDB\"><a href=\"#MongoDB\" class=\"headerlink\" title=\"MongoDB\"></a>MongoDB</h4><h4 id=\"TiDB\"><a href=\"#TiDB\" class=\"headerlink\" title=\"TiDB\"></a>TiDB</h4><h3 id=\"搜索引擎\"><a href=\"#搜索引擎\" class=\"headerlink\" title=\"搜索引擎\"></a>搜索引擎</h3><h4 id=\"Lucene\"><a href=\"#Lucene\" class=\"headerlink\" title=\"Lucene\"></a>Lucene</h4><h4 id=\"Elasticsearch\"><a href=\"#Elasticsearch\" class=\"headerlink\" title=\"Elasticsearch\"></a>Elasticsearch</h4><h4 id=\"Solr\"><a href=\"#Solr\" class=\"headerlink\" title=\"Solr\"></a>Solr</h4><h3 id=\"工具类\"><a href=\"#工具类\" class=\"headerlink\" title=\"工具类\"></a>工具类</h3><h4 id=\"Guava\"><a href=\"#Guava\" class=\"headerlink\" title=\"Guava\"></a>Guava</h4><h4 id=\"RxJava\"><a href=\"#RxJava\" class=\"headerlink\" title=\"RxJava\"></a>RxJava</h4><h3 id=\"容器服务\"><a href=\"#容器服务\" class=\"headerlink\" title=\"容器服务\"></a>容器服务</h3><h4 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux\"></a>Linux</h4><h4 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h4><h4 id=\"Kubernetes\"><a href=\"#Kubernetes\" class=\"headerlink\" title=\"Kubernetes\"></a>Kubernetes</h4><h4 id=\"Swarm\"><a href=\"#Swarm\" class=\"headerlink\" title=\"Swarm\"></a>Swarm</h4><h3 id=\"集群管理工具\"><a href=\"#集群管理工具\" class=\"headerlink\" title=\"集群管理工具\"></a>集群管理工具</h3><h4 id=\"Racher\"><a href=\"#Racher\" class=\"headerlink\" title=\"Racher\"></a>Racher</h4><h4 id=\"OpenStack\"><a href=\"#OpenStack\" class=\"headerlink\" title=\"OpenStack\"></a>OpenStack</h4><h3 id=\"DevOps\"><a href=\"#DevOps\" class=\"headerlink\" title=\"DevOps\"></a>DevOps</h3><h4 id=\"Jenkins\"><a href=\"#Jenkins\" class=\"headerlink\" title=\"Jenkins\"></a>Jenkins</h4><h4 id=\"Travis-CI\"><a href=\"#Travis-CI\" class=\"headerlink\" title=\"Travis CI\"></a>Travis CI</h4><h4 id=\"Coding\"><a href=\"#Coding\" class=\"headerlink\" title=\"Coding\"></a>Coding</h4><h4 id=\"Azure-DevOps\"><a href=\"#Azure-DevOps\" class=\"headerlink\" title=\"Azure DevOps\"></a>Azure DevOps</h4><h3 id=\"开发\"><a href=\"#开发\" class=\"headerlink\" title=\"开发\"></a>开发</h3><h4 id=\"Git\"><a href=\"#Git\" class=\"headerlink\" title=\"Git\"></a>Git</h4><h4 id=\"Maven\"><a href=\"#Maven\" class=\"headerlink\" title=\"Maven\"></a>Maven</h4><h4 id=\"Jenkins（CI-CD持续集成）\"><a href=\"#Jenkins（CI-CD持续集成）\" class=\"headerlink\" title=\"Jenkins（CI/CD持续集成）\"></a>Jenkins（CI/CD持续集成）</h4><h4 id=\"IDE-idea-eclipse\"><a href=\"#IDE-idea-eclipse\" class=\"headerlink\" title=\"IDE(idea,eclipse)\"></a>IDE(idea,eclipse)</h4><h3 id=\"前端框架\"><a href=\"#前端框架\" class=\"headerlink\" title=\"前端框架\"></a>前端框架</h3><h4 id=\"React\"><a href=\"#React\" class=\"headerlink\" title=\"React\"></a>React</h4><h4 id=\"Vue\"><a href=\"#Vue\" class=\"headerlink\" title=\"Vue\"></a>Vue</h4><h4 id=\"Angular\"><a href=\"#Angular\" class=\"headerlink\" title=\"Angular\"></a>Angular</h4><h3 id=\"大数据\"><a href=\"#大数据\" class=\"headerlink\" title=\"大数据\"></a>大数据</h3><h4 id=\"HBase\"><a href=\"#HBase\" class=\"headerlink\" title=\"HBase\"></a>HBase</h4><h4 id=\"Hive\"><a href=\"#Hive\" class=\"headerlink\" title=\"Hive\"></a>Hive</h4><h4 id=\"Spark\"><a href=\"#Spark\" class=\"headerlink\" title=\"Spark\"></a>Spark</h4><h4 id=\"Flink\"><a href=\"#Flink\" class=\"headerlink\" title=\"Flink\"></a>Flink</h4><h3 id=\"其他语言\"><a href=\"#其他语言\" class=\"headerlink\" title=\"其他语言\"></a>其他语言</h3><h4 id=\"Go\"><a href=\"#Go\" class=\"headerlink\" title=\"Go\"></a>Go</h4><h4 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h4>","site":{"data":{}},"excerpt":"<blockquote>\n<p><a href=\"http://www.iocoder.cn/\" target=\"_blank\" rel=\"noopener\">知识总览来源</a></p>\n</blockquote>\n<p><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/wallpaper/alone-boulders-idyllic-426893.jpg\" alt=\"\"></p>","more":"<h3 id=\"API网关\"><a href=\"#API网关\" class=\"headerlink\" title=\"API网关\"></a>API网关</h3><h4 id=\"Spring-Cloud-Gateway\"><a href=\"#Spring-Cloud-Gateway\" class=\"headerlink\" title=\"Spring Cloud Gateway\"></a>Spring Cloud Gateway</h4><h4 id=\"Zuul\"><a href=\"#Zuul\" class=\"headerlink\" title=\"Zuul\"></a>Zuul</h4><h4 id=\"Kong\"><a href=\"#Kong\" class=\"headerlink\" title=\"Kong\"></a>Kong</h4><h3 id=\"服务调用\"><a href=\"#服务调用\" class=\"headerlink\" title=\"服务调用\"></a>服务调用</h3><h4 id=\"Dubbo\"><a href=\"#Dubbo\" class=\"headerlink\" title=\"Dubbo\"></a>Dubbo</h4><h4 id=\"SOFA-RPC\"><a href=\"#SOFA-RPC\" class=\"headerlink\" title=\"SOFA RPC\"></a>SOFA RPC</h4><h4 id=\"Motan\"><a href=\"#Motan\" class=\"headerlink\" title=\"Motan\"></a>Motan</h4><h4 id=\"Ribbon\"><a href=\"#Ribbon\" class=\"headerlink\" title=\"Ribbon\"></a>Ribbon</h4><h3 id=\"消息队列\"><a href=\"#消息队列\" class=\"headerlink\" title=\"消息队列\"></a>消息队列</h3><h4 id=\"RocketMQ\"><a href=\"#RocketMQ\" class=\"headerlink\" title=\"RocketMQ\"></a>RocketMQ</h4><h4 id=\"Kafka\"><a href=\"#Kafka\" class=\"headerlink\" title=\"Kafka\"></a>Kafka</h4><h4 id=\"RabbitMQ\"><a href=\"#RabbitMQ\" class=\"headerlink\" title=\"RabbitMQ\"></a>RabbitMQ</h4><h4 id=\"ActiveMQ\"><a href=\"#ActiveMQ\" class=\"headerlink\" title=\"ActiveMQ\"></a>ActiveMQ</h4><h3 id=\"作业调度（Job）\"><a href=\"#作业调度（Job）\" class=\"headerlink\" title=\"作业调度（Job）\"></a>作业调度（Job）</h3><h4 id=\"Elastic-Job-Lite\"><a href=\"#Elastic-Job-Lite\" class=\"headerlink\" title=\"Elastic Job Lite\"></a>Elastic Job Lite</h4><h4 id=\"Elastic-Job-Cloud\"><a href=\"#Elastic-Job-Cloud\" class=\"headerlink\" title=\"Elastic Job Cloud\"></a>Elastic Job Cloud</h4><h4 id=\"Quartz\"><a href=\"#Quartz\" class=\"headerlink\" title=\"Quartz\"></a>Quartz</h4><h4 id=\"XXL-Job\"><a href=\"#XXL-Job\" class=\"headerlink\" title=\"XXL-Job\"></a>XXL-Job</h4><h3 id=\"注册中心\"><a href=\"#注册中心\" class=\"headerlink\" title=\"注册中心\"></a>注册中心</h3><h4 id=\"Eureka\"><a href=\"#Eureka\" class=\"headerlink\" title=\"Eureka\"></a>Eureka</h4><h4 id=\"Zookeeper\"><a href=\"#Zookeeper\" class=\"headerlink\" title=\"Zookeeper\"></a>Zookeeper</h4><h4 id=\"Nacos\"><a href=\"#Nacos\" class=\"headerlink\" title=\"Nacos\"></a>Nacos</h4><h4 id=\"Consul-Etcd\"><a href=\"#Consul-Etcd\" class=\"headerlink\" title=\"Consul Etcd\"></a>Consul Etcd</h4><h3 id=\"配置中心\"><a href=\"#配置中心\" class=\"headerlink\" title=\"配置中心\"></a>配置中心</h3><h4 id=\"Apollo\"><a href=\"#Apollo\" class=\"headerlink\" title=\"Apollo\"></a>Apollo</h4><h4 id=\"Nacos-1\"><a href=\"#Nacos-1\" class=\"headerlink\" title=\"Nacos\"></a>Nacos</h4><h4 id=\"Spring-Cloud-Config\"><a href=\"#Spring-Cloud-Config\" class=\"headerlink\" title=\"Spring Cloud Config\"></a>Spring Cloud Config</h4><h3 id=\"Disconf\"><a href=\"#Disconf\" class=\"headerlink\" title=\"Disconf\"></a>Disconf</h3><h3 id=\"链路追踪\"><a href=\"#链路追踪\" class=\"headerlink\" title=\"链路追踪\"></a>链路追踪</h3><h4 id=\"SkyWalking\"><a href=\"#SkyWalking\" class=\"headerlink\" title=\"SkyWalking\"></a>SkyWalking</h4><h4 id=\"Zipkin\"><a href=\"#Zipkin\" class=\"headerlink\" title=\"Zipkin\"></a>Zipkin</h4><h4 id=\"Pinpoint\"><a href=\"#Pinpoint\" class=\"headerlink\" title=\"Pinpoint\"></a>Pinpoint</h4><h4 id=\"CAT\"><a href=\"#CAT\" class=\"headerlink\" title=\"CAT\"></a>CAT</h4><h3 id=\"服务保障（熔断-降级）\"><a href=\"#服务保障（熔断-降级）\" class=\"headerlink\" title=\"服务保障（熔断/降级）\"></a>服务保障（熔断/降级）</h3><h4 id=\"Hystrix\"><a href=\"#Hystrix\" class=\"headerlink\" title=\"Hystrix\"></a>Hystrix</h4><h4 id=\"Sentinel\"><a href=\"#Sentinel\" class=\"headerlink\" title=\"Sentinel\"></a>Sentinel</h4><h4 id=\"Resilience4j\"><a href=\"#Resilience4j\" class=\"headerlink\" title=\"Resilience4j\"></a>Resilience4j</h4><h3 id=\"服务器\"><a href=\"#服务器\" class=\"headerlink\" title=\"服务器\"></a>服务器</h3><h4 id=\"Netty\"><a href=\"#Netty\" class=\"headerlink\" title=\"Netty\"></a>Netty</h4><h4 id=\"Tomcat\"><a href=\"#Tomcat\" class=\"headerlink\" title=\"Tomcat\"></a>Tomcat</h4><h4 id=\"Jetty\"><a href=\"#Jetty\" class=\"headerlink\" title=\"Jetty\"></a>Jetty</h4><h4 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h4><h3 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h3><h4 id=\"JDK（JUC）\"><a href=\"#JDK（JUC）\" class=\"headerlink\" title=\"JDK（JUC）\"></a>JDK（JUC）</h4><h4 id=\"Java并发\"><a href=\"#Java并发\" class=\"headerlink\" title=\"Java并发\"></a>Java并发</h4><h4 id=\"Java多线程\"><a href=\"#Java多线程\" class=\"headerlink\" title=\"Java多线程\"></a>Java多线程</h4><h4 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h4><h3 id=\"J2EE\"><a href=\"#J2EE\" class=\"headerlink\" title=\"J2EE\"></a>J2EE</h3><h4 id=\"Spring\"><a href=\"#Spring\" class=\"headerlink\" title=\"Spring\"></a>Spring</h4><h4 id=\"Spring-Boot\"><a href=\"#Spring-Boot\" class=\"headerlink\" title=\"Spring Boot\"></a>Spring Boot</h4><h4 id=\"Spring-Cloud\"><a href=\"#Spring-Cloud\" class=\"headerlink\" title=\"Spring Cloud\"></a>Spring Cloud</h4><h3 id=\"Web框架\"><a href=\"#Web框架\" class=\"headerlink\" title=\"Web框架\"></a>Web框架</h3><h4 id=\"Spring-MVC\"><a href=\"#Spring-MVC\" class=\"headerlink\" title=\"Spring MVC\"></a>Spring MVC</h4><h4 id=\"Spring-Security\"><a href=\"#Spring-Security\" class=\"headerlink\" title=\"Spring Security\"></a>Spring Security</h4><h4 id=\"Spring-Webflux\"><a href=\"#Spring-Webflux\" class=\"headerlink\" title=\"Spring Webflux\"></a>Spring Webflux</h4><h4 id=\"Shiro\"><a href=\"#Shiro\" class=\"headerlink\" title=\"Shiro\"></a>Shiro</h4><h3 id=\"ORM框架\"><a href=\"#ORM框架\" class=\"headerlink\" title=\"ORM框架\"></a>ORM框架</h3><h4 id=\"Mybatis\"><a href=\"#Mybatis\" class=\"headerlink\" title=\"Mybatis\"></a>Mybatis</h4><h4 id=\"Hibernate\"><a href=\"#Hibernate\" class=\"headerlink\" title=\"Hibernate\"></a>Hibernate</h4><h4 id=\"Spring-Data-JPA\"><a href=\"#Spring-Data-JPA\" class=\"headerlink\" title=\"Spring Data JPA\"></a>Spring Data JPA</h4><h3 id=\"数据库连接池\"><a href=\"#数据库连接池\" class=\"headerlink\" title=\"数据库连接池\"></a>数据库连接池</h3><h4 id=\"Druid\"><a href=\"#Druid\" class=\"headerlink\" title=\"Druid\"></a>Druid</h4><h4 id=\"HikariCP\"><a href=\"#HikariCP\" class=\"headerlink\" title=\"HikariCP\"></a>HikariCP</h4><h3 id=\"数据库中间件\"><a href=\"#数据库中间件\" class=\"headerlink\" title=\"数据库中间件\"></a>数据库中间件</h3><h4 id=\"Sharding-JDBC\"><a href=\"#Sharding-JDBC\" class=\"headerlink\" title=\"Sharding JDBC\"></a>Sharding JDBC</h4><h4 id=\"Sharding-Sphere\"><a href=\"#Sharding-Sphere\" class=\"headerlink\" title=\"Sharding Sphere\"></a>Sharding Sphere</h4><h4 id=\"MyCAT\"><a href=\"#MyCAT\" class=\"headerlink\" title=\"MyCAT\"></a>MyCAT</h4><h4 id=\"Canal\"><a href=\"#Canal\" class=\"headerlink\" title=\"Canal\"></a>Canal</h4><h3 id=\"分布式事务\"><a href=\"#分布式事务\" class=\"headerlink\" title=\"分布式事务\"></a>分布式事务</h3><h4 id=\"TCC-Transaction\"><a href=\"#TCC-Transaction\" class=\"headerlink\" title=\"TCC Transaction\"></a>TCC Transaction</h4><h4 id=\"Fescar\"><a href=\"#Fescar\" class=\"headerlink\" title=\"Fescar\"></a>Fescar</h4><h4 id=\"Happylifeplat-TCC\"><a href=\"#Happylifeplat-TCC\" class=\"headerlink\" title=\"Happylifeplat TCC\"></a>Happylifeplat TCC</h4><h4 id=\"Myth\"><a href=\"#Myth\" class=\"headerlink\" title=\"Myth\"></a>Myth</h4><h3 id=\"数据库（含NoSql）\"><a href=\"#数据库（含NoSql）\" class=\"headerlink\" title=\"数据库（含NoSql）\"></a>数据库（含NoSql）</h3><h4 id=\"Mysql\"><a href=\"#Mysql\" class=\"headerlink\" title=\"Mysql\"></a>Mysql</h4><h4 id=\"Redis\"><a href=\"#Redis\" class=\"headerlink\" title=\"Redis\"></a>Redis</h4><h4 id=\"MongoDB\"><a href=\"#MongoDB\" class=\"headerlink\" title=\"MongoDB\"></a>MongoDB</h4><h4 id=\"TiDB\"><a href=\"#TiDB\" class=\"headerlink\" title=\"TiDB\"></a>TiDB</h4><h3 id=\"搜索引擎\"><a href=\"#搜索引擎\" class=\"headerlink\" title=\"搜索引擎\"></a>搜索引擎</h3><h4 id=\"Lucene\"><a href=\"#Lucene\" class=\"headerlink\" title=\"Lucene\"></a>Lucene</h4><h4 id=\"Elasticsearch\"><a href=\"#Elasticsearch\" class=\"headerlink\" title=\"Elasticsearch\"></a>Elasticsearch</h4><h4 id=\"Solr\"><a href=\"#Solr\" class=\"headerlink\" title=\"Solr\"></a>Solr</h4><h3 id=\"工具类\"><a href=\"#工具类\" class=\"headerlink\" title=\"工具类\"></a>工具类</h3><h4 id=\"Guava\"><a href=\"#Guava\" class=\"headerlink\" title=\"Guava\"></a>Guava</h4><h4 id=\"RxJava\"><a href=\"#RxJava\" class=\"headerlink\" title=\"RxJava\"></a>RxJava</h4><h3 id=\"容器服务\"><a href=\"#容器服务\" class=\"headerlink\" title=\"容器服务\"></a>容器服务</h3><h4 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux\"></a>Linux</h4><h4 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h4><h4 id=\"Kubernetes\"><a href=\"#Kubernetes\" class=\"headerlink\" title=\"Kubernetes\"></a>Kubernetes</h4><h4 id=\"Swarm\"><a href=\"#Swarm\" class=\"headerlink\" title=\"Swarm\"></a>Swarm</h4><h3 id=\"集群管理工具\"><a href=\"#集群管理工具\" class=\"headerlink\" title=\"集群管理工具\"></a>集群管理工具</h3><h4 id=\"Racher\"><a href=\"#Racher\" class=\"headerlink\" title=\"Racher\"></a>Racher</h4><h4 id=\"OpenStack\"><a href=\"#OpenStack\" class=\"headerlink\" title=\"OpenStack\"></a>OpenStack</h4><h3 id=\"DevOps\"><a href=\"#DevOps\" class=\"headerlink\" title=\"DevOps\"></a>DevOps</h3><h4 id=\"Jenkins\"><a href=\"#Jenkins\" class=\"headerlink\" title=\"Jenkins\"></a>Jenkins</h4><h4 id=\"Travis-CI\"><a href=\"#Travis-CI\" class=\"headerlink\" title=\"Travis CI\"></a>Travis CI</h4><h4 id=\"Coding\"><a href=\"#Coding\" class=\"headerlink\" title=\"Coding\"></a>Coding</h4><h4 id=\"Azure-DevOps\"><a href=\"#Azure-DevOps\" class=\"headerlink\" title=\"Azure DevOps\"></a>Azure DevOps</h4><h3 id=\"开发\"><a href=\"#开发\" class=\"headerlink\" title=\"开发\"></a>开发</h3><h4 id=\"Git\"><a href=\"#Git\" class=\"headerlink\" title=\"Git\"></a>Git</h4><h4 id=\"Maven\"><a href=\"#Maven\" class=\"headerlink\" title=\"Maven\"></a>Maven</h4><h4 id=\"Jenkins（CI-CD持续集成）\"><a href=\"#Jenkins（CI-CD持续集成）\" class=\"headerlink\" title=\"Jenkins（CI/CD持续集成）\"></a>Jenkins（CI/CD持续集成）</h4><h4 id=\"IDE-idea-eclipse\"><a href=\"#IDE-idea-eclipse\" class=\"headerlink\" title=\"IDE(idea,eclipse)\"></a>IDE(idea,eclipse)</h4><h3 id=\"前端框架\"><a href=\"#前端框架\" class=\"headerlink\" title=\"前端框架\"></a>前端框架</h3><h4 id=\"React\"><a href=\"#React\" class=\"headerlink\" title=\"React\"></a>React</h4><h4 id=\"Vue\"><a href=\"#Vue\" class=\"headerlink\" title=\"Vue\"></a>Vue</h4><h4 id=\"Angular\"><a href=\"#Angular\" class=\"headerlink\" title=\"Angular\"></a>Angular</h4><h3 id=\"大数据\"><a href=\"#大数据\" class=\"headerlink\" title=\"大数据\"></a>大数据</h3><h4 id=\"HBase\"><a href=\"#HBase\" class=\"headerlink\" title=\"HBase\"></a>HBase</h4><h4 id=\"Hive\"><a href=\"#Hive\" class=\"headerlink\" title=\"Hive\"></a>Hive</h4><h4 id=\"Spark\"><a href=\"#Spark\" class=\"headerlink\" title=\"Spark\"></a>Spark</h4><h4 id=\"Flink\"><a href=\"#Flink\" class=\"headerlink\" title=\"Flink\"></a>Flink</h4><h3 id=\"其他语言\"><a href=\"#其他语言\" class=\"headerlink\" title=\"其他语言\"></a>其他语言</h3><h4 id=\"Go\"><a href=\"#Go\" class=\"headerlink\" title=\"Go\"></a>Go</h4><h4 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h4>"},{"title":"Linux 系统管理 firewalld 命令","date":"2019-05-17T04:57:59.000Z","toc":true,"declare":true,"_content":"\n> 摘要: Linux 系统 firewalld 防火墙\n\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/christopher-gower-291246-unsplash.jpg)\n\n<!-- more -->\n# Linux 系统管理 firewalld 命令;\n基于系统：CentOS7\n\n## systemctl 管理 firewalld 服务\n\n```bash\n# 启用\nsystemctl start firewalld\n     \n# 查看状态\nsystemctl status firewalld\n     \n# 停止\nsystemctl disable firewalld\n     \n# 禁用\nsystemctl stop firewalld\n     \n```\n\n### systemctl 管理\nsystemctl 是CentOS7的服务管理工具，融合之前的service和chkconfig的功能于一体\n```bash\n# 启动一个服务：\nsystemctl start firewalld.service\n# 关闭一个服务：\nsystemctl stop firewalld.service\n# 重启一个服务：\nsystemctl restart firewalld.service\n# 显示一个服务的状态：\nsystemctl status firewalld.service\n# 在开机时启用一个服务：\nsystemctl enable firewalld.service\n# 在开机时禁用一个服务：\nsystemctl disable firewalld.service\n# 查看服务是否开机启动：s\nystemctlis-enabled firewalld.service\n# 查看已启动的服务列表：\nsystemctllist-unit-files | grep enabled\n# 查看启动失败的服务列表：\nsystemctl--failed\n```\n\n## 配置firewalld-cmd   \n```bash\n# 查看版本\nfirewall-cmd --version\n\n# 查看帮助 \nfirewall-cmd --help\n\n# 显示状态： \nfirewall-cmd --state\n\n# 查看所有打开的端口： \nfirewall-cmd --zone=public --list-ports\n\n# 更新防火墙规则： \nfirewall-cmd --reload\n\n# 查看区域信息:  \nfirewall-cmd--get-active-zones\n\n# 查看指定接口所属区域： \nfirewall-cmd--get-zone-of-interface=eth0\n\n# 拒绝所有包：\nfirewall-cmd --panic-on\n\n# 取消拒绝状态： \nfirewall-cmd --panic-off\n\n#查看是否拒绝： \nfirewall-cmd --query-panic\n```\n\n## 常用命令\n```bash\n# a.添加一个端口 （--permanent永久生效，没有此参数重启后失效）\nfirewall-cmd --zone=public --add-port=80/tcp --permanent\n\n# b.重新载入\nfirewall-cmd --reload\n\n# c.删除端口\nfirewall-cmd --zone=public --remove-port=6379/tcp --permanent\n\n# 查看当前开了哪些端口(其实一个服务对应一个端口，每个服务对应/usr/lib/firewalld/services下面一个xml文件)\nfirewall-cmd --list-services\n\n# 查看所有打开的端口： \nfirewall-cmd --zone=public --list-ports\n\n# 更新防火墙规则： \nfirewall-cmd --reload\n\n# 查看还有哪些服务可以打开：\nfirewall-cmd --get-services\n```","source":"_posts/Linux-manage-firewalld.md","raw":"---\ntitle: Linux 系统管理 firewalld 命令\ndate: 2019-05-17 12:57:59\ntags:\n   - Linux\n   - firewalld\ncategories:\n   - Linux\ntoc: true\ndeclare: true\n---\n\n> 摘要: Linux 系统 firewalld 防火墙\n\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/christopher-gower-291246-unsplash.jpg)\n\n<!-- more -->\n# Linux 系统管理 firewalld 命令;\n基于系统：CentOS7\n\n## systemctl 管理 firewalld 服务\n\n```bash\n# 启用\nsystemctl start firewalld\n     \n# 查看状态\nsystemctl status firewalld\n     \n# 停止\nsystemctl disable firewalld\n     \n# 禁用\nsystemctl stop firewalld\n     \n```\n\n### systemctl 管理\nsystemctl 是CentOS7的服务管理工具，融合之前的service和chkconfig的功能于一体\n```bash\n# 启动一个服务：\nsystemctl start firewalld.service\n# 关闭一个服务：\nsystemctl stop firewalld.service\n# 重启一个服务：\nsystemctl restart firewalld.service\n# 显示一个服务的状态：\nsystemctl status firewalld.service\n# 在开机时启用一个服务：\nsystemctl enable firewalld.service\n# 在开机时禁用一个服务：\nsystemctl disable firewalld.service\n# 查看服务是否开机启动：s\nystemctlis-enabled firewalld.service\n# 查看已启动的服务列表：\nsystemctllist-unit-files | grep enabled\n# 查看启动失败的服务列表：\nsystemctl--failed\n```\n\n## 配置firewalld-cmd   \n```bash\n# 查看版本\nfirewall-cmd --version\n\n# 查看帮助 \nfirewall-cmd --help\n\n# 显示状态： \nfirewall-cmd --state\n\n# 查看所有打开的端口： \nfirewall-cmd --zone=public --list-ports\n\n# 更新防火墙规则： \nfirewall-cmd --reload\n\n# 查看区域信息:  \nfirewall-cmd--get-active-zones\n\n# 查看指定接口所属区域： \nfirewall-cmd--get-zone-of-interface=eth0\n\n# 拒绝所有包：\nfirewall-cmd --panic-on\n\n# 取消拒绝状态： \nfirewall-cmd --panic-off\n\n#查看是否拒绝： \nfirewall-cmd --query-panic\n```\n\n## 常用命令\n```bash\n# a.添加一个端口 （--permanent永久生效，没有此参数重启后失效）\nfirewall-cmd --zone=public --add-port=80/tcp --permanent\n\n# b.重新载入\nfirewall-cmd --reload\n\n# c.删除端口\nfirewall-cmd --zone=public --remove-port=6379/tcp --permanent\n\n# 查看当前开了哪些端口(其实一个服务对应一个端口，每个服务对应/usr/lib/firewalld/services下面一个xml文件)\nfirewall-cmd --list-services\n\n# 查看所有打开的端口： \nfirewall-cmd --zone=public --list-ports\n\n# 更新防火墙规则： \nfirewall-cmd --reload\n\n# 查看还有哪些服务可以打开：\nfirewall-cmd --get-services\n```","slug":"Linux-manage-firewalld","published":1,"updated":"2019-05-17T04:58:22.561Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck2vmvr9c000zmgu5heebd3mz","content":"<blockquote>\n<p>摘要: Linux 系统 firewalld 防火墙</p>\n</blockquote>\n<p><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/christopher-gower-291246-unsplash.jpg\" alt=\"\"></p>\n<a id=\"more\"></a>\n<h1 id=\"Linux-系统管理-firewalld-命令\"><a href=\"#Linux-系统管理-firewalld-命令\" class=\"headerlink\" title=\"Linux 系统管理 firewalld 命令;\"></a>Linux 系统管理 firewalld 命令;</h1><p>基于系统：CentOS7</p>\n<h2 id=\"systemctl-管理-firewalld-服务\"><a href=\"#systemctl-管理-firewalld-服务\" class=\"headerlink\" title=\"systemctl 管理 firewalld 服务\"></a>systemctl 管理 firewalld 服务</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 启用</span></span><br><span class=\"line\">systemctl start firewalld</span><br><span class=\"line\">     </span><br><span class=\"line\"><span class=\"comment\"># 查看状态</span></span><br><span class=\"line\">systemctl status firewalld</span><br><span class=\"line\">     </span><br><span class=\"line\"><span class=\"comment\"># 停止</span></span><br><span class=\"line\">systemctl <span class=\"built_in\">disable</span> firewalld</span><br><span class=\"line\">     </span><br><span class=\"line\"><span class=\"comment\"># 禁用</span></span><br><span class=\"line\">systemctl stop firewalld</span><br></pre></td></tr></table></figure>\n<h3 id=\"systemctl-管理\"><a href=\"#systemctl-管理\" class=\"headerlink\" title=\"systemctl 管理\"></a>systemctl 管理</h3><p>systemctl 是CentOS7的服务管理工具，融合之前的service和chkconfig的功能于一体<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 启动一个服务：</span></span><br><span class=\"line\">systemctl start firewalld.service</span><br><span class=\"line\"><span class=\"comment\"># 关闭一个服务：</span></span><br><span class=\"line\">systemctl stop firewalld.service</span><br><span class=\"line\"><span class=\"comment\"># 重启一个服务：</span></span><br><span class=\"line\">systemctl restart firewalld.service</span><br><span class=\"line\"><span class=\"comment\"># 显示一个服务的状态：</span></span><br><span class=\"line\">systemctl status firewalld.service</span><br><span class=\"line\"><span class=\"comment\"># 在开机时启用一个服务：</span></span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> firewalld.service</span><br><span class=\"line\"><span class=\"comment\"># 在开机时禁用一个服务：</span></span><br><span class=\"line\">systemctl <span class=\"built_in\">disable</span> firewalld.service</span><br><span class=\"line\"><span class=\"comment\"># 查看服务是否开机启动：s</span></span><br><span class=\"line\">ystemctlis-enabled firewalld.service</span><br><span class=\"line\"><span class=\"comment\"># 查看已启动的服务列表：</span></span><br><span class=\"line\">systemctllist-unit-files | grep enabled</span><br><span class=\"line\"><span class=\"comment\"># 查看启动失败的服务列表：</span></span><br><span class=\"line\">systemctl--failed</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"配置firewalld-cmd\"><a href=\"#配置firewalld-cmd\" class=\"headerlink\" title=\"配置firewalld-cmd\"></a>配置firewalld-cmd</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查看版本</span></span><br><span class=\"line\">firewall-cmd --version</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看帮助 </span></span><br><span class=\"line\">firewall-cmd --<span class=\"built_in\">help</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 显示状态： </span></span><br><span class=\"line\">firewall-cmd --state</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看所有打开的端口： </span></span><br><span class=\"line\">firewall-cmd --zone=public --list-ports</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 更新防火墙规则： </span></span><br><span class=\"line\">firewall-cmd --reload</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看区域信息:  </span></span><br><span class=\"line\">firewall-cmd--get-active-zones</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看指定接口所属区域： </span></span><br><span class=\"line\">firewall-cmd--get-zone-of-interface=eth0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 拒绝所有包：</span></span><br><span class=\"line\">firewall-cmd --panic-on</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 取消拒绝状态： </span></span><br><span class=\"line\">firewall-cmd --panic-off</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#查看是否拒绝： </span></span><br><span class=\"line\">firewall-cmd --query-panic</span><br></pre></td></tr></table></figure>\n<h2 id=\"常用命令\"><a href=\"#常用命令\" class=\"headerlink\" title=\"常用命令\"></a>常用命令</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># a.添加一个端口 （--permanent永久生效，没有此参数重启后失效）</span></span><br><span class=\"line\">firewall-cmd --zone=public --add-port=80/tcp --permanent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># b.重新载入</span></span><br><span class=\"line\">firewall-cmd --reload</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># c.删除端口</span></span><br><span class=\"line\">firewall-cmd --zone=public --remove-port=6379/tcp --permanent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看当前开了哪些端口(其实一个服务对应一个端口，每个服务对应/usr/lib/firewalld/services下面一个xml文件)</span></span><br><span class=\"line\">firewall-cmd --list-services</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看所有打开的端口： </span></span><br><span class=\"line\">firewall-cmd --zone=public --list-ports</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 更新防火墙规则： </span></span><br><span class=\"line\">firewall-cmd --reload</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看还有哪些服务可以打开：</span></span><br><span class=\"line\">firewall-cmd --get-services</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<blockquote>\n<p>摘要: Linux 系统 firewalld 防火墙</p>\n</blockquote>\n<p><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/christopher-gower-291246-unsplash.jpg\" alt=\"\"></p>","more":"<h1 id=\"Linux-系统管理-firewalld-命令\"><a href=\"#Linux-系统管理-firewalld-命令\" class=\"headerlink\" title=\"Linux 系统管理 firewalld 命令;\"></a>Linux 系统管理 firewalld 命令;</h1><p>基于系统：CentOS7</p>\n<h2 id=\"systemctl-管理-firewalld-服务\"><a href=\"#systemctl-管理-firewalld-服务\" class=\"headerlink\" title=\"systemctl 管理 firewalld 服务\"></a>systemctl 管理 firewalld 服务</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 启用</span></span><br><span class=\"line\">systemctl start firewalld</span><br><span class=\"line\">     </span><br><span class=\"line\"><span class=\"comment\"># 查看状态</span></span><br><span class=\"line\">systemctl status firewalld</span><br><span class=\"line\">     </span><br><span class=\"line\"><span class=\"comment\"># 停止</span></span><br><span class=\"line\">systemctl <span class=\"built_in\">disable</span> firewalld</span><br><span class=\"line\">     </span><br><span class=\"line\"><span class=\"comment\"># 禁用</span></span><br><span class=\"line\">systemctl stop firewalld</span><br></pre></td></tr></table></figure>\n<h3 id=\"systemctl-管理\"><a href=\"#systemctl-管理\" class=\"headerlink\" title=\"systemctl 管理\"></a>systemctl 管理</h3><p>systemctl 是CentOS7的服务管理工具，融合之前的service和chkconfig的功能于一体<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 启动一个服务：</span></span><br><span class=\"line\">systemctl start firewalld.service</span><br><span class=\"line\"><span class=\"comment\"># 关闭一个服务：</span></span><br><span class=\"line\">systemctl stop firewalld.service</span><br><span class=\"line\"><span class=\"comment\"># 重启一个服务：</span></span><br><span class=\"line\">systemctl restart firewalld.service</span><br><span class=\"line\"><span class=\"comment\"># 显示一个服务的状态：</span></span><br><span class=\"line\">systemctl status firewalld.service</span><br><span class=\"line\"><span class=\"comment\"># 在开机时启用一个服务：</span></span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> firewalld.service</span><br><span class=\"line\"><span class=\"comment\"># 在开机时禁用一个服务：</span></span><br><span class=\"line\">systemctl <span class=\"built_in\">disable</span> firewalld.service</span><br><span class=\"line\"><span class=\"comment\"># 查看服务是否开机启动：s</span></span><br><span class=\"line\">ystemctlis-enabled firewalld.service</span><br><span class=\"line\"><span class=\"comment\"># 查看已启动的服务列表：</span></span><br><span class=\"line\">systemctllist-unit-files | grep enabled</span><br><span class=\"line\"><span class=\"comment\"># 查看启动失败的服务列表：</span></span><br><span class=\"line\">systemctl--failed</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"配置firewalld-cmd\"><a href=\"#配置firewalld-cmd\" class=\"headerlink\" title=\"配置firewalld-cmd\"></a>配置firewalld-cmd</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查看版本</span></span><br><span class=\"line\">firewall-cmd --version</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看帮助 </span></span><br><span class=\"line\">firewall-cmd --<span class=\"built_in\">help</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 显示状态： </span></span><br><span class=\"line\">firewall-cmd --state</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看所有打开的端口： </span></span><br><span class=\"line\">firewall-cmd --zone=public --list-ports</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 更新防火墙规则： </span></span><br><span class=\"line\">firewall-cmd --reload</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看区域信息:  </span></span><br><span class=\"line\">firewall-cmd--get-active-zones</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看指定接口所属区域： </span></span><br><span class=\"line\">firewall-cmd--get-zone-of-interface=eth0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 拒绝所有包：</span></span><br><span class=\"line\">firewall-cmd --panic-on</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 取消拒绝状态： </span></span><br><span class=\"line\">firewall-cmd --panic-off</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#查看是否拒绝： </span></span><br><span class=\"line\">firewall-cmd --query-panic</span><br></pre></td></tr></table></figure>\n<h2 id=\"常用命令\"><a href=\"#常用命令\" class=\"headerlink\" title=\"常用命令\"></a>常用命令</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># a.添加一个端口 （--permanent永久生效，没有此参数重启后失效）</span></span><br><span class=\"line\">firewall-cmd --zone=public --add-port=80/tcp --permanent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># b.重新载入</span></span><br><span class=\"line\">firewall-cmd --reload</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># c.删除端口</span></span><br><span class=\"line\">firewall-cmd --zone=public --remove-port=6379/tcp --permanent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看当前开了哪些端口(其实一个服务对应一个端口，每个服务对应/usr/lib/firewalld/services下面一个xml文件)</span></span><br><span class=\"line\">firewall-cmd --list-services</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看所有打开的端口： </span></span><br><span class=\"line\">firewall-cmd --zone=public --list-ports</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 更新防火墙规则： </span></span><br><span class=\"line\">firewall-cmd --reload</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看还有哪些服务可以打开：</span></span><br><span class=\"line\">firewall-cmd --get-services</span><br></pre></td></tr></table></figure>"},{"title":"名句摘录","date":"2018-09-29T07:39:42.000Z","toc":true,"_content":"\n###  名句摘录\n>君子之行，动则思义，不为利回，不为义疚；\n\n>知足不辱，知止不殆，可以长久；\n","source":"_posts/Quotes.md","raw":"---\ntitle: 名句摘录\ndate: 2018-09-29 15:39:42\ntags:\n   - 名句\ncategories:\n   - 名句\ntoc: true\n---\n\n###  名句摘录\n>君子之行，动则思义，不为利回，不为义疚；\n\n>知足不辱，知止不殆，可以长久；\n","slug":"Quotes","published":1,"updated":"2019-02-20T03:33:24.420Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck2vmvr9i0011mgu5316fk3ko","content":"<h3 id=\"名句摘录\"><a href=\"#名句摘录\" class=\"headerlink\" title=\"名句摘录\"></a>名句摘录</h3><blockquote>\n<p>君子之行，动则思义，不为利回，不为义疚；</p>\n</blockquote>\n<blockquote>\n<p>知足不辱，知止不殆，可以长久；</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"名句摘录\"><a href=\"#名句摘录\" class=\"headerlink\" title=\"名句摘录\"></a>名句摘录</h3><blockquote>\n<p>君子之行，动则思义，不为利回，不为义疚；</p>\n</blockquote>\n<blockquote>\n<p>知足不辱，知止不殆，可以长久；</p>\n</blockquote>\n"},{"title":"Zookeeper学习笔记01","date":"2019-05-11T05:07:19.000Z","toc":true,"declare":true,"_content":"\n> 摘要: Zookeeper学习笔记\n\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/christopher-gower-291246-unsplash.jpg)\n<!-- more -->\nZookeeper\n## 安装方式\nzookeeper有单机、伪集群、集群三种部署方式，可根据自己对可靠性的需求选择合适的部署方式\n### 单机\n- 下载安装文件\n使用wget工具下载：\n```shell\nwget http://mirror.bit.edu.cn/apache/zookeeper/zookeeper-3.4.13/zookeeper-3.4.13.tar.gz\n```\n- 解压\n```\ntar zxf zookeeper-3.4.13.tar.gz -C /aikq/zookeeper\n```\n- 配置\n```shell\n# 进入安装目录\ncd /aikq/zookeeper\n# 创建数据文件和日志文件目录\nmkdir data\nmkdir logs\n# 进入conf目录下，配置参数文件\ncp zoo_sample.cfg zoo.cfg\n# 编辑文件zoo.cfg\ndataDir=/aikq/zookeeper/zookeeper-3.4.13/data\ndataLogDir=/aikq/zookeeper/zookeeper-3.4.13/logs\n```\n- 启动和停止\n```shell\n# 进入bin目录\n./zkServer.sh start\n./zkServer.sh stop\n./zkServer.sh restart\n./zkServer.sh status\n```\n\n### 伪集群（同一物理机分不同端口部署）\n\n### 集群\n\n### ZK UI 可视化管理\ngitUrl：https://github.com/DeemOpen/zkui\n\n\n\n\n--\n下载地址：\nhttp://mirror.bit.edu.cn/apache/zookeeper/zookeeper-3.4.13/zookeeper-3.4.13.tar.gz\n参考[安装教程](https://www.cnblogs.com/lsdb/p/7297731.html)\n\n","source":"_posts/Zookeeper-study-01.md","raw":"---\ntitle: Zookeeper学习笔记01\ndate: 2019-05-11 13:07:19\ntags:\n   - Zookeeper\ncategories:\n   - Zookeeper\ntoc: true\ndeclare: true\n---\n\n> 摘要: Zookeeper学习笔记\n\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/christopher-gower-291246-unsplash.jpg)\n<!-- more -->\nZookeeper\n## 安装方式\nzookeeper有单机、伪集群、集群三种部署方式，可根据自己对可靠性的需求选择合适的部署方式\n### 单机\n- 下载安装文件\n使用wget工具下载：\n```shell\nwget http://mirror.bit.edu.cn/apache/zookeeper/zookeeper-3.4.13/zookeeper-3.4.13.tar.gz\n```\n- 解压\n```\ntar zxf zookeeper-3.4.13.tar.gz -C /aikq/zookeeper\n```\n- 配置\n```shell\n# 进入安装目录\ncd /aikq/zookeeper\n# 创建数据文件和日志文件目录\nmkdir data\nmkdir logs\n# 进入conf目录下，配置参数文件\ncp zoo_sample.cfg zoo.cfg\n# 编辑文件zoo.cfg\ndataDir=/aikq/zookeeper/zookeeper-3.4.13/data\ndataLogDir=/aikq/zookeeper/zookeeper-3.4.13/logs\n```\n- 启动和停止\n```shell\n# 进入bin目录\n./zkServer.sh start\n./zkServer.sh stop\n./zkServer.sh restart\n./zkServer.sh status\n```\n\n### 伪集群（同一物理机分不同端口部署）\n\n### 集群\n\n### ZK UI 可视化管理\ngitUrl：https://github.com/DeemOpen/zkui\n\n\n\n\n--\n下载地址：\nhttp://mirror.bit.edu.cn/apache/zookeeper/zookeeper-3.4.13/zookeeper-3.4.13.tar.gz\n参考[安装教程](https://www.cnblogs.com/lsdb/p/7297731.html)\n\n","slug":"Zookeeper-study-01","published":1,"updated":"2019-05-14T07:00:26.358Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck2vmvr9o0015mgu576sgfe9n","content":"<blockquote>\n<p>摘要: Zookeeper学习笔记</p>\n</blockquote>\n<p><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/christopher-gower-291246-unsplash.jpg\" alt=\"\"><br><a id=\"more\"></a><br>Zookeeper</p>\n<h2 id=\"安装方式\"><a href=\"#安装方式\" class=\"headerlink\" title=\"安装方式\"></a>安装方式</h2><p>zookeeper有单机、伪集群、集群三种部署方式，可根据自己对可靠性的需求选择合适的部署方式</p>\n<h3 id=\"单机\"><a href=\"#单机\" class=\"headerlink\" title=\"单机\"></a>单机</h3><ul>\n<li><p>下载安装文件<br>使用wget工具下载：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://mirror.bit.edu.cn/apache/zookeeper/zookeeper-3.4.13/zookeeper-3.4.13.tar.gz</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>解压</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar zxf zookeeper-3.4.13.tar.gz -C /aikq/zookeeper</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>配置</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 进入安装目录</span></span><br><span class=\"line\">cd /aikq/zookeeper</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 创建数据文件和日志文件目录</span></span><br><span class=\"line\">mkdir data</span><br><span class=\"line\">mkdir logs</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 进入conf目录下，配置参数文件</span></span><br><span class=\"line\">cp zoo_sample.cfg zoo.cfg</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 编辑文件zoo.cfg</span></span><br><span class=\"line\">dataDir=/aikq/zookeeper/zookeeper-3.4.13/data</span><br><span class=\"line\">dataLogDir=/aikq/zookeeper/zookeeper-3.4.13/logs</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>启动和停止</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 进入bin目录</span></span><br><span class=\"line\">./zkServer.sh start</span><br><span class=\"line\">./zkServer.sh stop</span><br><span class=\"line\">./zkServer.sh restart</span><br><span class=\"line\">./zkServer.sh status</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"伪集群（同一物理机分不同端口部署）\"><a href=\"#伪集群（同一物理机分不同端口部署）\" class=\"headerlink\" title=\"伪集群（同一物理机分不同端口部署）\"></a>伪集群（同一物理机分不同端口部署）</h3><h3 id=\"集群\"><a href=\"#集群\" class=\"headerlink\" title=\"集群\"></a>集群</h3><h3 id=\"ZK-UI-可视化管理\"><a href=\"#ZK-UI-可视化管理\" class=\"headerlink\" title=\"ZK UI 可视化管理\"></a>ZK UI 可视化管理</h3><p>gitUrl：<a href=\"https://github.com/DeemOpen/zkui\" target=\"_blank\" rel=\"noopener\">https://github.com/DeemOpen/zkui</a></p>\n<p>–<br>下载地址：<br><a href=\"http://mirror.bit.edu.cn/apache/zookeeper/zookeeper-3.4.13/zookeeper-3.4.13.tar.gz\" target=\"_blank\" rel=\"noopener\">http://mirror.bit.edu.cn/apache/zookeeper/zookeeper-3.4.13/zookeeper-3.4.13.tar.gz</a><br>参考<a href=\"https://www.cnblogs.com/lsdb/p/7297731.html\" target=\"_blank\" rel=\"noopener\">安装教程</a></p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>摘要: Zookeeper学习笔记</p>\n</blockquote>\n<p><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/christopher-gower-291246-unsplash.jpg\" alt=\"\"><br>","more":"<br>Zookeeper</p>\n<h2 id=\"安装方式\"><a href=\"#安装方式\" class=\"headerlink\" title=\"安装方式\"></a>安装方式</h2><p>zookeeper有单机、伪集群、集群三种部署方式，可根据自己对可靠性的需求选择合适的部署方式</p>\n<h3 id=\"单机\"><a href=\"#单机\" class=\"headerlink\" title=\"单机\"></a>单机</h3><ul>\n<li><p>下载安装文件<br>使用wget工具下载：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://mirror.bit.edu.cn/apache/zookeeper/zookeeper-3.4.13/zookeeper-3.4.13.tar.gz</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>解压</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar zxf zookeeper-3.4.13.tar.gz -C /aikq/zookeeper</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>配置</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 进入安装目录</span></span><br><span class=\"line\">cd /aikq/zookeeper</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 创建数据文件和日志文件目录</span></span><br><span class=\"line\">mkdir data</span><br><span class=\"line\">mkdir logs</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 进入conf目录下，配置参数文件</span></span><br><span class=\"line\">cp zoo_sample.cfg zoo.cfg</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 编辑文件zoo.cfg</span></span><br><span class=\"line\">dataDir=/aikq/zookeeper/zookeeper-3.4.13/data</span><br><span class=\"line\">dataLogDir=/aikq/zookeeper/zookeeper-3.4.13/logs</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>启动和停止</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 进入bin目录</span></span><br><span class=\"line\">./zkServer.sh start</span><br><span class=\"line\">./zkServer.sh stop</span><br><span class=\"line\">./zkServer.sh restart</span><br><span class=\"line\">./zkServer.sh status</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"伪集群（同一物理机分不同端口部署）\"><a href=\"#伪集群（同一物理机分不同端口部署）\" class=\"headerlink\" title=\"伪集群（同一物理机分不同端口部署）\"></a>伪集群（同一物理机分不同端口部署）</h3><h3 id=\"集群\"><a href=\"#集群\" class=\"headerlink\" title=\"集群\"></a>集群</h3><h3 id=\"ZK-UI-可视化管理\"><a href=\"#ZK-UI-可视化管理\" class=\"headerlink\" title=\"ZK UI 可视化管理\"></a>ZK UI 可视化管理</h3><p>gitUrl：<a href=\"https://github.com/DeemOpen/zkui\" target=\"_blank\" rel=\"noopener\">https://github.com/DeemOpen/zkui</a></p>\n<p>–<br>下载地址：<br><a href=\"http://mirror.bit.edu.cn/apache/zookeeper/zookeeper-3.4.13/zookeeper-3.4.13.tar.gz\" target=\"_blank\" rel=\"noopener\">http://mirror.bit.edu.cn/apache/zookeeper/zookeeper-3.4.13/zookeeper-3.4.13.tar.gz</a><br>参考<a href=\"https://www.cnblogs.com/lsdb/p/7297731.html\" target=\"_blank\" rel=\"noopener\">安装教程</a></p>"},{"title":"IDEA常用快捷键","date":"2018-10-11T07:34:25.000Z","toc":true,"declare":true,"_content":"\n## IDEA 快捷键\n\nCtrl+Shift + Enter，语句完成\n“！”，否定完成，输入表达式时按 “！”键\n\n<!-- more -->\n\n### IDEA 配置\n因机器本身的配置而配置:\n\\IntelliJ IDEA8\\bin\\idea.exe.vmoptions  \n```bash\n-Xms2048m     \n-Xmx2048m  \n-XX:MaxPermSize=512m  \n-ea  \n-server  \n-Dsun.awt.keepWorkingSetOnMinimize=true\n```\n---\n\n### 实用快捷键\nCtrl+/ 或 Ctrl+Shift+/ 注释（// 或者/*...*/ ）\nCtrl+D 复制行\nCtrl+X 删除行\n快速修复 alt+enter(modify/cast)\n代码提示 alt+/\nctr+G 定位某一行\nShift+F6 重构-重命名 IDEA 批量修改变量名 点击变量名后按shift+F6\nCtrl+R 替换文本\nCtrl+F 查找文本\n\n代码处F2 快速定位编译出错位置\n\n\nCtrl+E 最近打开的文件\nCtrl+J 自动代码\n\nCtrl+ home/end 抵达文件头部,底部\n\n组织导入 ctr+alt+O\n格式化代码 ctr+alt+L\n大小写转化 ctr+shift+U\n\n---\n\n### IntelliJ Idea 常用快捷键列表\nAlt+回车导入包,自动修正\nCtrl+N   查找类\nCtrl+Shift+N 查找文件\nCtrl+Alt+L  格式化代码\n\nCtrl+Alt+O 优化导入的类和包\nAlt+Insert 生成代码(如get,set方法,构造函数等)\nCtrl+E或者Alt+Shift+C  最近更改的代码\nCtrl+R 替换文本\n\nCtrl+F 查找文本\nCtrl+Shift+Space 自动补全代码\nCtrl+空格代码提示\n\nCtrl+Alt+Space 类名或接口名提示\n\nCtrl+P 方法参数提示\n\nCtrl+Shift+Alt+N 查找类中的方法或变量\n\nAlt+Shift+C 对比最近修改的代码\n\n \n\nShift+F6  重构-重命名\nCtrl+Shift+先上键\nCtrl+X 删除行\nCtrl+D 复制行\nCtrl+/ 或 Ctrl+Shift+/  注释（// 或者/*...*/ ）\nCtrl+J  自动代码\nCtrl+E 最近打开的文件\n\nCtrl+H 显示类结构图\n\nCtrl+Q 显示注释文档\nAlt+F1 查找代码所在位置\nAlt+1 快速打开或隐藏工程面板\n\nCtrl+Alt+left/right 返回至上次浏览的位置\nAlt+ left/right 切换代码视图\n\nAlt+ Up/Down 在方法间快速移动定位\n\nCtrl+Shift+Up/Down代码向上/下移动。\n\nF2 或Shift+F2 高亮错误或警告快速定位\n\n \n\n代码标签输入完成后，按Tab，生成代码。\n\n选中文本，按Ctrl+Shift+F7 ，高亮显示所有该文本，按Esc高亮消失。\n\nCtrl+W 选中代码，连续按会有其他效果\n\n选中文本，按Alt+F3 ，逐个往下查找相同文本，并高亮显示。\n\nCtrl+Up/Down 光标跳转到第一行或最后一行下\n\nCtrl+B 快速打开光标处的类或方法 \n\nCtrl+O 查看该类可以重写哪些方法\n\n--- \n\n### 查询快捷键\n\nCTRL+N  查找类 \nCTRL+SHIFT+N  查找文件 \nCTRL+SHIFT+ALT+N 查找类中的方法或变量 \nCIRL+B   找变量的来源 \nCTRL+ALT+B  找所有的子类 \nCTRL+SHIFT+B  找变量的类 \nCTRL+G   定位行 \nCTRL+F   在当前窗口查找文本 \nCTRL+SHIFT+F  在指定窗口查找文本 \nCTRL+R   在当前窗口替换文本 \nCTRL+SHIFT+R  在指定窗口替换文本 \nALT+SHIFT+C  查找修改的文件 \nCTRL+E   最近打开的文件 \nF3   向下查找关键字出现位置 \nSHIFT+F3  向上一个关键字出现位置 \nF4   查找变量来源 \nCTRL+ALT+F7  选中的字符查找工程出现的地方 \nCTRL+SHIFT+O  弹出显示查找内容\n\n--- \n\n### 自动代码\nALT+回车  导入包,自动修正 \nCTRL+ALT+L  格式化代码 \nCTRL+ALT+I  自动缩进 \nCTRL+ALT+O  优化导入的类和包 \nALT+INSERT  生成代码(如GET,SET方法,构造函数等) \nCTRL+E 最近更改的代码 \nCTRL+SHIFT+SPACE 自动补全代码 \nCTRL+空格  代码提示 \nCTRL+ALT+SPACE  类名或接口名提示 \nCTRL+P   方法参数提示 \nCTRL+J   自动代码 \nCTRL+ALT+T  把选中的代码放在 TRY{} IF{} ELSE{}里\n\nCTRL+ALT+M  抽取方法\n\n---\n\n### 复制快捷方式\nCTRL+D  复制行 \nCTRL+X   剪切,删除行 \n\n---\n\n### 其他快捷方式\nCIRL+U  大小写切换 \nCTRL+Z   倒退 \nCTRL+SHIFT+Z  向前 \nCTRL+ALT+F12  资源管理器打开文件夹 \nALT+F1   查找文件所在目录位置 \nSHIFT+ALT+INSERT 竖编辑模式 \nCTRL+/   注释//   \nCTRL+SHIFT+/  注释/*...*/ \nCTRL+W   选中代码，连续按会有其他效果 \nCTRL+B   快速打开光标处的类或方法 \nALT+ ←/→ 切换代码视图 \nCTRL+ALT ←/→ 返回上次编辑的位置 \nALT+ ↑/↓ 在方法间快速移动定位 \nSHIFT+F6  重构-重命名 \nCTRL+H   显示类结构图 \nCTRL+Q   显示注释文档 \nALT+1   快速打开或隐藏工程面板 \nCTRL+SHIFT+UP/DOWN 代码向上/下移动。 \nCTRL+UP/DOWN  光标跳转到第一行或最后一行下 \nESC   光标返回编辑框 \nSHIFT+ESC  光标返回编辑框,关闭无用的窗口 \nF1   帮助千万别按,很卡! \n书签帮助L(操作非数字键盘的数字!!!!!!!)\n\nCtrl +Shift+1-9 书签定位行为1-9 或者字母,\n\nCtrl + 1-9 自动跳转到锁定位的书签位置\n\nCtrl+ F9 重新编译, 删除缓存.实时更新\n\nCtrl+Shift+U 大小写切换","source":"_posts/Tool-idea.md","raw":"---\ntitle: IDEA常用快捷键\ndate: 2018-10-11 15:34:25\ntags: \n   - IDEA\n   - 工具\ncategories:\n   - 工具\ntoc: true\ndeclare: true\n---\n\n## IDEA 快捷键\n\nCtrl+Shift + Enter，语句完成\n“！”，否定完成，输入表达式时按 “！”键\n\n<!-- more -->\n\n### IDEA 配置\n因机器本身的配置而配置:\n\\IntelliJ IDEA8\\bin\\idea.exe.vmoptions  \n```bash\n-Xms2048m     \n-Xmx2048m  \n-XX:MaxPermSize=512m  \n-ea  \n-server  \n-Dsun.awt.keepWorkingSetOnMinimize=true\n```\n---\n\n### 实用快捷键\nCtrl+/ 或 Ctrl+Shift+/ 注释（// 或者/*...*/ ）\nCtrl+D 复制行\nCtrl+X 删除行\n快速修复 alt+enter(modify/cast)\n代码提示 alt+/\nctr+G 定位某一行\nShift+F6 重构-重命名 IDEA 批量修改变量名 点击变量名后按shift+F6\nCtrl+R 替换文本\nCtrl+F 查找文本\n\n代码处F2 快速定位编译出错位置\n\n\nCtrl+E 最近打开的文件\nCtrl+J 自动代码\n\nCtrl+ home/end 抵达文件头部,底部\n\n组织导入 ctr+alt+O\n格式化代码 ctr+alt+L\n大小写转化 ctr+shift+U\n\n---\n\n### IntelliJ Idea 常用快捷键列表\nAlt+回车导入包,自动修正\nCtrl+N   查找类\nCtrl+Shift+N 查找文件\nCtrl+Alt+L  格式化代码\n\nCtrl+Alt+O 优化导入的类和包\nAlt+Insert 生成代码(如get,set方法,构造函数等)\nCtrl+E或者Alt+Shift+C  最近更改的代码\nCtrl+R 替换文本\n\nCtrl+F 查找文本\nCtrl+Shift+Space 自动补全代码\nCtrl+空格代码提示\n\nCtrl+Alt+Space 类名或接口名提示\n\nCtrl+P 方法参数提示\n\nCtrl+Shift+Alt+N 查找类中的方法或变量\n\nAlt+Shift+C 对比最近修改的代码\n\n \n\nShift+F6  重构-重命名\nCtrl+Shift+先上键\nCtrl+X 删除行\nCtrl+D 复制行\nCtrl+/ 或 Ctrl+Shift+/  注释（// 或者/*...*/ ）\nCtrl+J  自动代码\nCtrl+E 最近打开的文件\n\nCtrl+H 显示类结构图\n\nCtrl+Q 显示注释文档\nAlt+F1 查找代码所在位置\nAlt+1 快速打开或隐藏工程面板\n\nCtrl+Alt+left/right 返回至上次浏览的位置\nAlt+ left/right 切换代码视图\n\nAlt+ Up/Down 在方法间快速移动定位\n\nCtrl+Shift+Up/Down代码向上/下移动。\n\nF2 或Shift+F2 高亮错误或警告快速定位\n\n \n\n代码标签输入完成后，按Tab，生成代码。\n\n选中文本，按Ctrl+Shift+F7 ，高亮显示所有该文本，按Esc高亮消失。\n\nCtrl+W 选中代码，连续按会有其他效果\n\n选中文本，按Alt+F3 ，逐个往下查找相同文本，并高亮显示。\n\nCtrl+Up/Down 光标跳转到第一行或最后一行下\n\nCtrl+B 快速打开光标处的类或方法 \n\nCtrl+O 查看该类可以重写哪些方法\n\n--- \n\n### 查询快捷键\n\nCTRL+N  查找类 \nCTRL+SHIFT+N  查找文件 \nCTRL+SHIFT+ALT+N 查找类中的方法或变量 \nCIRL+B   找变量的来源 \nCTRL+ALT+B  找所有的子类 \nCTRL+SHIFT+B  找变量的类 \nCTRL+G   定位行 \nCTRL+F   在当前窗口查找文本 \nCTRL+SHIFT+F  在指定窗口查找文本 \nCTRL+R   在当前窗口替换文本 \nCTRL+SHIFT+R  在指定窗口替换文本 \nALT+SHIFT+C  查找修改的文件 \nCTRL+E   最近打开的文件 \nF3   向下查找关键字出现位置 \nSHIFT+F3  向上一个关键字出现位置 \nF4   查找变量来源 \nCTRL+ALT+F7  选中的字符查找工程出现的地方 \nCTRL+SHIFT+O  弹出显示查找内容\n\n--- \n\n### 自动代码\nALT+回车  导入包,自动修正 \nCTRL+ALT+L  格式化代码 \nCTRL+ALT+I  自动缩进 \nCTRL+ALT+O  优化导入的类和包 \nALT+INSERT  生成代码(如GET,SET方法,构造函数等) \nCTRL+E 最近更改的代码 \nCTRL+SHIFT+SPACE 自动补全代码 \nCTRL+空格  代码提示 \nCTRL+ALT+SPACE  类名或接口名提示 \nCTRL+P   方法参数提示 \nCTRL+J   自动代码 \nCTRL+ALT+T  把选中的代码放在 TRY{} IF{} ELSE{}里\n\nCTRL+ALT+M  抽取方法\n\n---\n\n### 复制快捷方式\nCTRL+D  复制行 \nCTRL+X   剪切,删除行 \n\n---\n\n### 其他快捷方式\nCIRL+U  大小写切换 \nCTRL+Z   倒退 \nCTRL+SHIFT+Z  向前 \nCTRL+ALT+F12  资源管理器打开文件夹 \nALT+F1   查找文件所在目录位置 \nSHIFT+ALT+INSERT 竖编辑模式 \nCTRL+/   注释//   \nCTRL+SHIFT+/  注释/*...*/ \nCTRL+W   选中代码，连续按会有其他效果 \nCTRL+B   快速打开光标处的类或方法 \nALT+ ←/→ 切换代码视图 \nCTRL+ALT ←/→ 返回上次编辑的位置 \nALT+ ↑/↓ 在方法间快速移动定位 \nSHIFT+F6  重构-重命名 \nCTRL+H   显示类结构图 \nCTRL+Q   显示注释文档 \nALT+1   快速打开或隐藏工程面板 \nCTRL+SHIFT+UP/DOWN 代码向上/下移动。 \nCTRL+UP/DOWN  光标跳转到第一行或最后一行下 \nESC   光标返回编辑框 \nSHIFT+ESC  光标返回编辑框,关闭无用的窗口 \nF1   帮助千万别按,很卡! \n书签帮助L(操作非数字键盘的数字!!!!!!!)\n\nCtrl +Shift+1-9 书签定位行为1-9 或者字母,\n\nCtrl + 1-9 自动跳转到锁定位的书签位置\n\nCtrl+ F9 重新编译, 删除缓存.实时更新\n\nCtrl+Shift+U 大小写切换","slug":"Tool-idea","published":1,"updated":"2019-05-14T07:06:20.963Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck2vmvr9s0017mgu5xj87hq8x","content":"<h2 id=\"IDEA-快捷键\"><a href=\"#IDEA-快捷键\" class=\"headerlink\" title=\"IDEA 快捷键\"></a>IDEA 快捷键</h2><p>Ctrl+Shift + Enter，语句完成<br>“！”，否定完成，输入表达式时按 “！”键</p>\n<a id=\"more\"></a>\n<h3 id=\"IDEA-配置\"><a href=\"#IDEA-配置\" class=\"headerlink\" title=\"IDEA 配置\"></a>IDEA 配置</h3><p>因机器本身的配置而配置:<br>\\IntelliJ IDEA8\\bin\\idea.exe.vmoptions<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-Xms2048m     </span><br><span class=\"line\">-Xmx2048m  </span><br><span class=\"line\">-XX:MaxPermSize=512m  </span><br><span class=\"line\">-ea  </span><br><span class=\"line\">-server  </span><br><span class=\"line\">-Dsun.awt.keepWorkingSetOnMinimize=<span class=\"literal\">true</span></span><br></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"实用快捷键\"><a href=\"#实用快捷键\" class=\"headerlink\" title=\"实用快捷键\"></a>实用快捷键</h3><p>Ctrl+/ 或 Ctrl+Shift+/ 注释（// 或者/<em>…</em>/ ）<br>Ctrl+D 复制行<br>Ctrl+X 删除行<br>快速修复 alt+enter(modify/cast)<br>代码提示 alt+/<br>ctr+G 定位某一行<br>Shift+F6 重构-重命名 IDEA 批量修改变量名 点击变量名后按shift+F6<br>Ctrl+R 替换文本<br>Ctrl+F 查找文本</p>\n<p>代码处F2 快速定位编译出错位置</p>\n<p>Ctrl+E 最近打开的文件<br>Ctrl+J 自动代码</p>\n<p>Ctrl+ home/end 抵达文件头部,底部</p>\n<p>组织导入 ctr+alt+O<br>格式化代码 ctr+alt+L<br>大小写转化 ctr+shift+U</p>\n<hr>\n<h3 id=\"IntelliJ-Idea-常用快捷键列表\"><a href=\"#IntelliJ-Idea-常用快捷键列表\" class=\"headerlink\" title=\"IntelliJ Idea 常用快捷键列表\"></a>IntelliJ Idea 常用快捷键列表</h3><p>Alt+回车导入包,自动修正<br>Ctrl+N   查找类<br>Ctrl+Shift+N 查找文件<br>Ctrl+Alt+L  格式化代码</p>\n<p>Ctrl+Alt+O 优化导入的类和包<br>Alt+Insert 生成代码(如get,set方法,构造函数等)<br>Ctrl+E或者Alt+Shift+C  最近更改的代码<br>Ctrl+R 替换文本</p>\n<p>Ctrl+F 查找文本<br>Ctrl+Shift+Space 自动补全代码<br>Ctrl+空格代码提示</p>\n<p>Ctrl+Alt+Space 类名或接口名提示</p>\n<p>Ctrl+P 方法参数提示</p>\n<p>Ctrl+Shift+Alt+N 查找类中的方法或变量</p>\n<p>Alt+Shift+C 对比最近修改的代码</p>\n<p>Shift+F6  重构-重命名<br>Ctrl+Shift+先上键<br>Ctrl+X 删除行<br>Ctrl+D 复制行<br>Ctrl+/ 或 Ctrl+Shift+/  注释（// 或者/<em>…</em>/ ）<br>Ctrl+J  自动代码<br>Ctrl+E 最近打开的文件</p>\n<p>Ctrl+H 显示类结构图</p>\n<p>Ctrl+Q 显示注释文档<br>Alt+F1 查找代码所在位置<br>Alt+1 快速打开或隐藏工程面板</p>\n<p>Ctrl+Alt+left/right 返回至上次浏览的位置<br>Alt+ left/right 切换代码视图</p>\n<p>Alt+ Up/Down 在方法间快速移动定位</p>\n<p>Ctrl+Shift+Up/Down代码向上/下移动。</p>\n<p>F2 或Shift+F2 高亮错误或警告快速定位</p>\n<p>代码标签输入完成后，按Tab，生成代码。</p>\n<p>选中文本，按Ctrl+Shift+F7 ，高亮显示所有该文本，按Esc高亮消失。</p>\n<p>Ctrl+W 选中代码，连续按会有其他效果</p>\n<p>选中文本，按Alt+F3 ，逐个往下查找相同文本，并高亮显示。</p>\n<p>Ctrl+Up/Down 光标跳转到第一行或最后一行下</p>\n<p>Ctrl+B 快速打开光标处的类或方法 </p>\n<p>Ctrl+O 查看该类可以重写哪些方法</p>\n<hr>\n<h3 id=\"查询快捷键\"><a href=\"#查询快捷键\" class=\"headerlink\" title=\"查询快捷键\"></a>查询快捷键</h3><p>CTRL+N  查找类<br>CTRL+SHIFT+N  查找文件<br>CTRL+SHIFT+ALT+N 查找类中的方法或变量<br>CIRL+B   找变量的来源<br>CTRL+ALT+B  找所有的子类<br>CTRL+SHIFT+B  找变量的类<br>CTRL+G   定位行<br>CTRL+F   在当前窗口查找文本<br>CTRL+SHIFT+F  在指定窗口查找文本<br>CTRL+R   在当前窗口替换文本<br>CTRL+SHIFT+R  在指定窗口替换文本<br>ALT+SHIFT+C  查找修改的文件<br>CTRL+E   最近打开的文件<br>F3   向下查找关键字出现位置<br>SHIFT+F3  向上一个关键字出现位置<br>F4   查找变量来源<br>CTRL+ALT+F7  选中的字符查找工程出现的地方<br>CTRL+SHIFT+O  弹出显示查找内容</p>\n<hr>\n<h3 id=\"自动代码\"><a href=\"#自动代码\" class=\"headerlink\" title=\"自动代码\"></a>自动代码</h3><p>ALT+回车  导入包,自动修正<br>CTRL+ALT+L  格式化代码<br>CTRL+ALT+I  自动缩进<br>CTRL+ALT+O  优化导入的类和包<br>ALT+INSERT  生成代码(如GET,SET方法,构造函数等)<br>CTRL+E 最近更改的代码<br>CTRL+SHIFT+SPACE 自动补全代码<br>CTRL+空格  代码提示<br>CTRL+ALT+SPACE  类名或接口名提示<br>CTRL+P   方法参数提示<br>CTRL+J   自动代码<br>CTRL+ALT+T  把选中的代码放在 TRY{} IF{} ELSE{}里</p>\n<p>CTRL+ALT+M  抽取方法</p>\n<hr>\n<h3 id=\"复制快捷方式\"><a href=\"#复制快捷方式\" class=\"headerlink\" title=\"复制快捷方式\"></a>复制快捷方式</h3><p>CTRL+D  复制行<br>CTRL+X   剪切,删除行 </p>\n<hr>\n<h3 id=\"其他快捷方式\"><a href=\"#其他快捷方式\" class=\"headerlink\" title=\"其他快捷方式\"></a>其他快捷方式</h3><p>CIRL+U  大小写切换<br>CTRL+Z   倒退<br>CTRL+SHIFT+Z  向前<br>CTRL+ALT+F12  资源管理器打开文件夹<br>ALT+F1   查找文件所在目录位置<br>SHIFT+ALT+INSERT 竖编辑模式<br>CTRL+/   注释//<br>CTRL+SHIFT+/  注释/<em>…</em>/<br>CTRL+W   选中代码，连续按会有其他效果<br>CTRL+B   快速打开光标处的类或方法<br>ALT+ ←/→ 切换代码视图<br>CTRL+ALT ←/→ 返回上次编辑的位置<br>ALT+ ↑/↓ 在方法间快速移动定位<br>SHIFT+F6  重构-重命名<br>CTRL+H   显示类结构图<br>CTRL+Q   显示注释文档<br>ALT+1   快速打开或隐藏工程面板<br>CTRL+SHIFT+UP/DOWN 代码向上/下移动。<br>CTRL+UP/DOWN  光标跳转到第一行或最后一行下<br>ESC   光标返回编辑框<br>SHIFT+ESC  光标返回编辑框,关闭无用的窗口<br>F1   帮助千万别按,很卡!<br>书签帮助L(操作非数字键盘的数字!!!!!!!)</p>\n<p>Ctrl +Shift+1-9 书签定位行为1-9 或者字母,</p>\n<p>Ctrl + 1-9 自动跳转到锁定位的书签位置</p>\n<p>Ctrl+ F9 重新编译, 删除缓存.实时更新</p>\n<p>Ctrl+Shift+U 大小写切换</p>\n","site":{"data":{}},"excerpt":"<h2 id=\"IDEA-快捷键\"><a href=\"#IDEA-快捷键\" class=\"headerlink\" title=\"IDEA 快捷键\"></a>IDEA 快捷键</h2><p>Ctrl+Shift + Enter，语句完成<br>“！”，否定完成，输入表达式时按 “！”键</p>","more":"<h3 id=\"IDEA-配置\"><a href=\"#IDEA-配置\" class=\"headerlink\" title=\"IDEA 配置\"></a>IDEA 配置</h3><p>因机器本身的配置而配置:<br>\\IntelliJ IDEA8\\bin\\idea.exe.vmoptions<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-Xms2048m     </span><br><span class=\"line\">-Xmx2048m  </span><br><span class=\"line\">-XX:MaxPermSize=512m  </span><br><span class=\"line\">-ea  </span><br><span class=\"line\">-server  </span><br><span class=\"line\">-Dsun.awt.keepWorkingSetOnMinimize=<span class=\"literal\">true</span></span><br></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"实用快捷键\"><a href=\"#实用快捷键\" class=\"headerlink\" title=\"实用快捷键\"></a>实用快捷键</h3><p>Ctrl+/ 或 Ctrl+Shift+/ 注释（// 或者/<em>…</em>/ ）<br>Ctrl+D 复制行<br>Ctrl+X 删除行<br>快速修复 alt+enter(modify/cast)<br>代码提示 alt+/<br>ctr+G 定位某一行<br>Shift+F6 重构-重命名 IDEA 批量修改变量名 点击变量名后按shift+F6<br>Ctrl+R 替换文本<br>Ctrl+F 查找文本</p>\n<p>代码处F2 快速定位编译出错位置</p>\n<p>Ctrl+E 最近打开的文件<br>Ctrl+J 自动代码</p>\n<p>Ctrl+ home/end 抵达文件头部,底部</p>\n<p>组织导入 ctr+alt+O<br>格式化代码 ctr+alt+L<br>大小写转化 ctr+shift+U</p>\n<hr>\n<h3 id=\"IntelliJ-Idea-常用快捷键列表\"><a href=\"#IntelliJ-Idea-常用快捷键列表\" class=\"headerlink\" title=\"IntelliJ Idea 常用快捷键列表\"></a>IntelliJ Idea 常用快捷键列表</h3><p>Alt+回车导入包,自动修正<br>Ctrl+N   查找类<br>Ctrl+Shift+N 查找文件<br>Ctrl+Alt+L  格式化代码</p>\n<p>Ctrl+Alt+O 优化导入的类和包<br>Alt+Insert 生成代码(如get,set方法,构造函数等)<br>Ctrl+E或者Alt+Shift+C  最近更改的代码<br>Ctrl+R 替换文本</p>\n<p>Ctrl+F 查找文本<br>Ctrl+Shift+Space 自动补全代码<br>Ctrl+空格代码提示</p>\n<p>Ctrl+Alt+Space 类名或接口名提示</p>\n<p>Ctrl+P 方法参数提示</p>\n<p>Ctrl+Shift+Alt+N 查找类中的方法或变量</p>\n<p>Alt+Shift+C 对比最近修改的代码</p>\n<p>Shift+F6  重构-重命名<br>Ctrl+Shift+先上键<br>Ctrl+X 删除行<br>Ctrl+D 复制行<br>Ctrl+/ 或 Ctrl+Shift+/  注释（// 或者/<em>…</em>/ ）<br>Ctrl+J  自动代码<br>Ctrl+E 最近打开的文件</p>\n<p>Ctrl+H 显示类结构图</p>\n<p>Ctrl+Q 显示注释文档<br>Alt+F1 查找代码所在位置<br>Alt+1 快速打开或隐藏工程面板</p>\n<p>Ctrl+Alt+left/right 返回至上次浏览的位置<br>Alt+ left/right 切换代码视图</p>\n<p>Alt+ Up/Down 在方法间快速移动定位</p>\n<p>Ctrl+Shift+Up/Down代码向上/下移动。</p>\n<p>F2 或Shift+F2 高亮错误或警告快速定位</p>\n<p>代码标签输入完成后，按Tab，生成代码。</p>\n<p>选中文本，按Ctrl+Shift+F7 ，高亮显示所有该文本，按Esc高亮消失。</p>\n<p>Ctrl+W 选中代码，连续按会有其他效果</p>\n<p>选中文本，按Alt+F3 ，逐个往下查找相同文本，并高亮显示。</p>\n<p>Ctrl+Up/Down 光标跳转到第一行或最后一行下</p>\n<p>Ctrl+B 快速打开光标处的类或方法 </p>\n<p>Ctrl+O 查看该类可以重写哪些方法</p>\n<hr>\n<h3 id=\"查询快捷键\"><a href=\"#查询快捷键\" class=\"headerlink\" title=\"查询快捷键\"></a>查询快捷键</h3><p>CTRL+N  查找类<br>CTRL+SHIFT+N  查找文件<br>CTRL+SHIFT+ALT+N 查找类中的方法或变量<br>CIRL+B   找变量的来源<br>CTRL+ALT+B  找所有的子类<br>CTRL+SHIFT+B  找变量的类<br>CTRL+G   定位行<br>CTRL+F   在当前窗口查找文本<br>CTRL+SHIFT+F  在指定窗口查找文本<br>CTRL+R   在当前窗口替换文本<br>CTRL+SHIFT+R  在指定窗口替换文本<br>ALT+SHIFT+C  查找修改的文件<br>CTRL+E   最近打开的文件<br>F3   向下查找关键字出现位置<br>SHIFT+F3  向上一个关键字出现位置<br>F4   查找变量来源<br>CTRL+ALT+F7  选中的字符查找工程出现的地方<br>CTRL+SHIFT+O  弹出显示查找内容</p>\n<hr>\n<h3 id=\"自动代码\"><a href=\"#自动代码\" class=\"headerlink\" title=\"自动代码\"></a>自动代码</h3><p>ALT+回车  导入包,自动修正<br>CTRL+ALT+L  格式化代码<br>CTRL+ALT+I  自动缩进<br>CTRL+ALT+O  优化导入的类和包<br>ALT+INSERT  生成代码(如GET,SET方法,构造函数等)<br>CTRL+E 最近更改的代码<br>CTRL+SHIFT+SPACE 自动补全代码<br>CTRL+空格  代码提示<br>CTRL+ALT+SPACE  类名或接口名提示<br>CTRL+P   方法参数提示<br>CTRL+J   自动代码<br>CTRL+ALT+T  把选中的代码放在 TRY{} IF{} ELSE{}里</p>\n<p>CTRL+ALT+M  抽取方法</p>\n<hr>\n<h3 id=\"复制快捷方式\"><a href=\"#复制快捷方式\" class=\"headerlink\" title=\"复制快捷方式\"></a>复制快捷方式</h3><p>CTRL+D  复制行<br>CTRL+X   剪切,删除行 </p>\n<hr>\n<h3 id=\"其他快捷方式\"><a href=\"#其他快捷方式\" class=\"headerlink\" title=\"其他快捷方式\"></a>其他快捷方式</h3><p>CIRL+U  大小写切换<br>CTRL+Z   倒退<br>CTRL+SHIFT+Z  向前<br>CTRL+ALT+F12  资源管理器打开文件夹<br>ALT+F1   查找文件所在目录位置<br>SHIFT+ALT+INSERT 竖编辑模式<br>CTRL+/   注释//<br>CTRL+SHIFT+/  注释/<em>…</em>/<br>CTRL+W   选中代码，连续按会有其他效果<br>CTRL+B   快速打开光标处的类或方法<br>ALT+ ←/→ 切换代码视图<br>CTRL+ALT ←/→ 返回上次编辑的位置<br>ALT+ ↑/↓ 在方法间快速移动定位<br>SHIFT+F6  重构-重命名<br>CTRL+H   显示类结构图<br>CTRL+Q   显示注释文档<br>ALT+1   快速打开或隐藏工程面板<br>CTRL+SHIFT+UP/DOWN 代码向上/下移动。<br>CTRL+UP/DOWN  光标跳转到第一行或最后一行下<br>ESC   光标返回编辑框<br>SHIFT+ESC  光标返回编辑框,关闭无用的窗口<br>F1   帮助千万别按,很卡!<br>书签帮助L(操作非数字键盘的数字!!!!!!!)</p>\n<p>Ctrl +Shift+1-9 书签定位行为1-9 或者字母,</p>\n<p>Ctrl + 1-9 自动跳转到锁定位的书签位置</p>\n<p>Ctrl+ F9 重新编译, 删除缓存.实时更新</p>\n<p>Ctrl+Shift+U 大小写切换</p>"},{"title":"Flink学习笔记 01","date":"2019-02-26T08:08:09.000Z","toc":true,"declare":true,"_content":"> 摘要: Flink学习笔记\n\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/StockSnap_T2VQ2QPA3R.jpg)\n<!-- more -->\nFlink-Studying\n[官网](https://flink.apache.org/)\n[翻译文档1.6](http://flink-cn.shinonomelab.com/)\n[翻译文档1.7](https://flink.sojb.cn/)\nBase on：已经安装好JDK环境\n\n## 安装\n### windows环境\n- 下载资源文件，[地址](https://flink.apache.org/downloads.html)\n下载对应的安装包，解压即可使用，进入bin目录下，点击bat后缀文件即可启动\n\n- 设置环境变量\nFLINK_HOME：flink解压目录  #配置Path，增加 %FLINK_HOME%\\bin\nFLINK_CONF_DIR: flink配置文件夹conf目录\n\n- 查看版本：`flink --version`\n\n- 启动flink\n进入bin目录下，点击运行 start-cluster.bat；弹出日志输出窗口\n浏览器输入：local host:8081 如图：\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222171343.png)\n\n\n### linux环境\n待补充···\n\n\n## 编写本地流处理demo\n### 新建flink-demo项目\nIDEA new project 选择maven项目，如图：\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222171900.png)\n\n### 编写测试类\n新建类文件SocketTextStreamWordCount.java\n```Java\npackage com.aikq.flink;\n\nimport org.apache.flink.api.common.functions.FlatMapFunction;\nimport org.apache.flink.api.java.tuple.Tuple2;\nimport org.apache.flink.streaming.api.datastream.DataStreamSource;\nimport org.apache.flink.streaming.api.datastream.SingleOutputStreamOperator;\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\nimport org.apache.flink.util.Collector;\n\n/**\n *  E\n * @author aikq\n * @date 2019年02月22日 14:47\n */\npublic class SocketTextStreamWordCount {\n\n\tpublic static void main(String[] args) throws Exception {\n\t\t// 参数校验\n\t\tif (args.length != 2){\n\t\t\tSystem.out.println(\"USAGE:\\nSocketTextStreamWordCount <hostname> <port>\");\n\t\t\treturn;\n\t\t}\n\n\t\tString hostname = args[0];\n\t\tInteger port = Integer.parseInt(args[1]);\n\n\t\tfinal StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n\n\t\t//获取数据\n\t\tDataStreamSource<String> stream = env.socketTextStream(hostname, port);\n\n\t\t//计数\n\t\tSingleOutputStreamOperator<Tuple2<String, Integer>> sum = stream.flatMap(new LineSplitter())\n\t\t\t\t.keyBy(0)\n\t\t\t\t.sum(1);\n\n\t\tsum.print();\n\n\t\tenv.execute(\"Java WordCount from SocketTextStream Demo\");\n\t}\n\n\tpublic static final class LineSplitter implements \t\t\t\tFlatMapFunction<String, Tuple2<String, Integer>> {\n\t\t@Override\n\t\tpublic void flatMap(String s, Collector<Tuple2<String, Integer>> collector) {\n\t\t\tString[] tokens = s.toLowerCase().split(\"\\\\W+\");\n\t\t\tfor (String token: tokens) {\n\t\t\t\tif (token.length() > 0) {\n\t\t\t\t\tcollector.collect(new Tuple2<String, Integer>(token, 1));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n```\n### 打包编译\n在项目根目录下，使用命令打包：`mvn clean package -Dmaven.test.skip=true`\n\n或者利用IDE，如图：\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222172615.png)\n1：忽略单元测试\npackage：执行打包命令，生成jar包，如图：\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222175501.png)\n\n\n### 开启本地监听端口\nwindows需要安装netcat，[下载地址](https://eternallybored.org/misc/netcat/)\n- 下载安装包\n- 解压\n- nc命令\nWindows OS环境下使用nc命令，实现TCP方式监听服务器端9000端口\n服务器端命令：`nc.exe -l -p [端口号]`\n客户端命令：`nc.exe [服务器端IP地址] [端口号]`\nWindows OS环境下使用nc命令，实现UDP方式监听服务器端9000端口\n服务器端命令：`nc.exe -lu -p [端口号]`\n客户端命令：`nc.exe -u [服务器端IP地址] [端口号]`\n如下图：\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222174153.png)\n\n\n## flink运行flink-demo.jar\n打开cmd，执行命令\n```bash\nflink run -c com.aikq.flink.SocketTextStreamWordCount flink-demo-1.0-SNAPSHOT.jar 127.0.0.1 9000\n```\n`com.aikq.flink.SocketTextStreamWordCount`必须是对应类含包名的全路径\n运行成功后可以在flink管理界面看到新增一个job，如图：\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222175135.png)\n\n然后再nc监听的9000端口窗口输入测试字符串，在日志窗口有对应输出，如图：\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222175032.png)","source":"_posts/Flink-study-01.md","raw":"---\ntitle: Flink学习笔记 01\ndate: 2019-02-26 16:08:09\ntags:\n   - flink\ncategories:\n   - flink\ntoc: true\ndeclare: true\n---\n> 摘要: Flink学习笔记\n\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/StockSnap_T2VQ2QPA3R.jpg)\n<!-- more -->\nFlink-Studying\n[官网](https://flink.apache.org/)\n[翻译文档1.6](http://flink-cn.shinonomelab.com/)\n[翻译文档1.7](https://flink.sojb.cn/)\nBase on：已经安装好JDK环境\n\n## 安装\n### windows环境\n- 下载资源文件，[地址](https://flink.apache.org/downloads.html)\n下载对应的安装包，解压即可使用，进入bin目录下，点击bat后缀文件即可启动\n\n- 设置环境变量\nFLINK_HOME：flink解压目录  #配置Path，增加 %FLINK_HOME%\\bin\nFLINK_CONF_DIR: flink配置文件夹conf目录\n\n- 查看版本：`flink --version`\n\n- 启动flink\n进入bin目录下，点击运行 start-cluster.bat；弹出日志输出窗口\n浏览器输入：local host:8081 如图：\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222171343.png)\n\n\n### linux环境\n待补充···\n\n\n## 编写本地流处理demo\n### 新建flink-demo项目\nIDEA new project 选择maven项目，如图：\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222171900.png)\n\n### 编写测试类\n新建类文件SocketTextStreamWordCount.java\n```Java\npackage com.aikq.flink;\n\nimport org.apache.flink.api.common.functions.FlatMapFunction;\nimport org.apache.flink.api.java.tuple.Tuple2;\nimport org.apache.flink.streaming.api.datastream.DataStreamSource;\nimport org.apache.flink.streaming.api.datastream.SingleOutputStreamOperator;\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\nimport org.apache.flink.util.Collector;\n\n/**\n *  E\n * @author aikq\n * @date 2019年02月22日 14:47\n */\npublic class SocketTextStreamWordCount {\n\n\tpublic static void main(String[] args) throws Exception {\n\t\t// 参数校验\n\t\tif (args.length != 2){\n\t\t\tSystem.out.println(\"USAGE:\\nSocketTextStreamWordCount <hostname> <port>\");\n\t\t\treturn;\n\t\t}\n\n\t\tString hostname = args[0];\n\t\tInteger port = Integer.parseInt(args[1]);\n\n\t\tfinal StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n\n\t\t//获取数据\n\t\tDataStreamSource<String> stream = env.socketTextStream(hostname, port);\n\n\t\t//计数\n\t\tSingleOutputStreamOperator<Tuple2<String, Integer>> sum = stream.flatMap(new LineSplitter())\n\t\t\t\t.keyBy(0)\n\t\t\t\t.sum(1);\n\n\t\tsum.print();\n\n\t\tenv.execute(\"Java WordCount from SocketTextStream Demo\");\n\t}\n\n\tpublic static final class LineSplitter implements \t\t\t\tFlatMapFunction<String, Tuple2<String, Integer>> {\n\t\t@Override\n\t\tpublic void flatMap(String s, Collector<Tuple2<String, Integer>> collector) {\n\t\t\tString[] tokens = s.toLowerCase().split(\"\\\\W+\");\n\t\t\tfor (String token: tokens) {\n\t\t\t\tif (token.length() > 0) {\n\t\t\t\t\tcollector.collect(new Tuple2<String, Integer>(token, 1));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n```\n### 打包编译\n在项目根目录下，使用命令打包：`mvn clean package -Dmaven.test.skip=true`\n\n或者利用IDE，如图：\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222172615.png)\n1：忽略单元测试\npackage：执行打包命令，生成jar包，如图：\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222175501.png)\n\n\n### 开启本地监听端口\nwindows需要安装netcat，[下载地址](https://eternallybored.org/misc/netcat/)\n- 下载安装包\n- 解压\n- nc命令\nWindows OS环境下使用nc命令，实现TCP方式监听服务器端9000端口\n服务器端命令：`nc.exe -l -p [端口号]`\n客户端命令：`nc.exe [服务器端IP地址] [端口号]`\nWindows OS环境下使用nc命令，实现UDP方式监听服务器端9000端口\n服务器端命令：`nc.exe -lu -p [端口号]`\n客户端命令：`nc.exe -u [服务器端IP地址] [端口号]`\n如下图：\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222174153.png)\n\n\n## flink运行flink-demo.jar\n打开cmd，执行命令\n```bash\nflink run -c com.aikq.flink.SocketTextStreamWordCount flink-demo-1.0-SNAPSHOT.jar 127.0.0.1 9000\n```\n`com.aikq.flink.SocketTextStreamWordCount`必须是对应类含包名的全路径\n运行成功后可以在flink管理界面看到新增一个job，如图：\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222175135.png)\n\n然后再nc监听的9000端口窗口输入测试字符串，在日志窗口有对应输出，如图：\n![](https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222175032.png)","slug":"Flink-study-01","published":1,"updated":"2019-02-26T08:27:59.204Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck2vmvr9u0019mgu5vl06hv77","content":"<blockquote>\n<p>摘要: Flink学习笔记</p>\n</blockquote>\n<p><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/StockSnap_T2VQ2QPA3R.jpg\" alt=\"\"><br><a id=\"more\"></a><br>Flink-Studying<br><a href=\"https://flink.apache.org/\" target=\"_blank\" rel=\"noopener\">官网</a><br><a href=\"http://flink-cn.shinonomelab.com/\" target=\"_blank\" rel=\"noopener\">翻译文档1.6</a><br><a href=\"https://flink.sojb.cn/\" target=\"_blank\" rel=\"noopener\">翻译文档1.7</a><br>Base on：已经安装好JDK环境</p>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"windows环境\"><a href=\"#windows环境\" class=\"headerlink\" title=\"windows环境\"></a>windows环境</h3><ul>\n<li><p>下载资源文件，<a href=\"https://flink.apache.org/downloads.html\" target=\"_blank\" rel=\"noopener\">地址</a><br>下载对应的安装包，解压即可使用，进入bin目录下，点击bat后缀文件即可启动</p>\n</li>\n<li><p>设置环境变量<br>FLINK_HOME：flink解压目录  #配置Path，增加 %FLINK_HOME%\\bin<br>FLINK_CONF_DIR: flink配置文件夹conf目录</p>\n</li>\n<li><p>查看版本：<code>flink --version</code></p>\n</li>\n<li><p>启动flink<br>进入bin目录下，点击运行 start-cluster.bat；弹出日志输出窗口<br>浏览器输入：local host:8081 如图：<br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222171343.png\" alt=\"\"></p>\n</li>\n</ul>\n<h3 id=\"linux环境\"><a href=\"#linux环境\" class=\"headerlink\" title=\"linux环境\"></a>linux环境</h3><p>待补充···</p>\n<h2 id=\"编写本地流处理demo\"><a href=\"#编写本地流处理demo\" class=\"headerlink\" title=\"编写本地流处理demo\"></a>编写本地流处理demo</h2><h3 id=\"新建flink-demo项目\"><a href=\"#新建flink-demo项目\" class=\"headerlink\" title=\"新建flink-demo项目\"></a>新建flink-demo项目</h3><p>IDEA new project 选择maven项目，如图：<br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222171900.png\" alt=\"\"></p>\n<h3 id=\"编写测试类\"><a href=\"#编写测试类\" class=\"headerlink\" title=\"编写测试类\"></a>编写测试类</h3><p>新建类文件SocketTextStreamWordCount.java<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.aikq.flink;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.api.common.functions.FlatMapFunction;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.api.java.tuple.Tuple2;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.datastream.DataStreamSource;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.datastream.SingleOutputStreamOperator;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.util.Collector;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  E</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> aikq</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span> 2019年02月22日 14:47</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SocketTextStreamWordCount</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// 参数校验</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (args.length != <span class=\"number\">2</span>)&#123;</span><br><span class=\"line\">\t\t\tSystem.out.println(<span class=\"string\">\"USAGE:\\nSocketTextStreamWordCount &lt;hostname&gt; &lt;port&gt;\"</span>);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tString hostname = args[<span class=\"number\">0</span>];</span><br><span class=\"line\">\t\tInteger port = Integer.parseInt(args[<span class=\"number\">1</span>]);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">final</span> StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">//获取数据</span></span><br><span class=\"line\">\t\tDataStreamSource&lt;String&gt; stream = env.socketTextStream(hostname, port);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">//计数</span></span><br><span class=\"line\">\t\tSingleOutputStreamOperator&lt;Tuple2&lt;String, Integer&gt;&gt; sum = stream.flatMap(<span class=\"keyword\">new</span> LineSplitter())</span><br><span class=\"line\">\t\t\t\t.keyBy(<span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t\t\t.sum(<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tsum.print();</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tenv.execute(<span class=\"string\">\"Java WordCount from SocketTextStream Demo\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LineSplitter</span> <span class=\"keyword\">implements</span> \t\t\t\t<span class=\"title\">FlatMapFunction</span>&lt;<span class=\"title\">String</span>, <span class=\"title\">Tuple2</span>&lt;<span class=\"title\">String</span>, <span class=\"title\">Integer</span>&gt;&gt; </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">flatMap</span><span class=\"params\">(String s, Collector&lt;Tuple2&lt;String, Integer&gt;&gt; collector)</span> </span>&#123;</span><br><span class=\"line\">\t\t\tString[] tokens = s.toLowerCase().split(<span class=\"string\">\"\\\\W+\"</span>);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">for</span> (String token: tokens) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (token.length() &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t\t\t\tcollector.collect(<span class=\"keyword\">new</span> Tuple2&lt;String, Integer&gt;(token, <span class=\"number\">1</span>));</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"打包编译\"><a href=\"#打包编译\" class=\"headerlink\" title=\"打包编译\"></a>打包编译</h3><p>在项目根目录下，使用命令打包：<code>mvn clean package -Dmaven.test.skip=true</code></p>\n<p>或者利用IDE，如图：<br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222172615.png\" alt=\"\"><br>1：忽略单元测试<br>package：执行打包命令，生成jar包，如图：<br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222175501.png\" alt=\"\"></p>\n<h3 id=\"开启本地监听端口\"><a href=\"#开启本地监听端口\" class=\"headerlink\" title=\"开启本地监听端口\"></a>开启本地监听端口</h3><p>windows需要安装netcat，<a href=\"https://eternallybored.org/misc/netcat/\" target=\"_blank\" rel=\"noopener\">下载地址</a></p>\n<ul>\n<li>下载安装包</li>\n<li>解压</li>\n<li>nc命令<br>Windows OS环境下使用nc命令，实现TCP方式监听服务器端9000端口<br>服务器端命令：<code>nc.exe -l -p [端口号]</code><br>客户端命令：<code>nc.exe [服务器端IP地址] [端口号]</code><br>Windows OS环境下使用nc命令，实现UDP方式监听服务器端9000端口<br>服务器端命令：<code>nc.exe -lu -p [端口号]</code><br>客户端命令：<code>nc.exe -u [服务器端IP地址] [端口号]</code><br>如下图：<br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222174153.png\" alt=\"\"></li>\n</ul>\n<h2 id=\"flink运行flink-demo-jar\"><a href=\"#flink运行flink-demo-jar\" class=\"headerlink\" title=\"flink运行flink-demo.jar\"></a>flink运行flink-demo.jar</h2><p>打开cmd，执行命令<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flink run -c com.aikq.flink.SocketTextStreamWordCount flink-demo-1.0-SNAPSHOT.jar 127.0.0.1 9000</span><br></pre></td></tr></table></figure></p>\n<p><code>com.aikq.flink.SocketTextStreamWordCount</code>必须是对应类含包名的全路径<br>运行成功后可以在flink管理界面看到新增一个job，如图：<br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222175135.png\" alt=\"\"></p>\n<p>然后再nc监听的9000端口窗口输入测试字符串，在日志窗口有对应输出，如图：<br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222175032.png\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>摘要: Flink学习笔记</p>\n</blockquote>\n<p><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/StockSnap_T2VQ2QPA3R.jpg\" alt=\"\"><br>","more":"<br>Flink-Studying<br><a href=\"https://flink.apache.org/\" target=\"_blank\" rel=\"noopener\">官网</a><br><a href=\"http://flink-cn.shinonomelab.com/\" target=\"_blank\" rel=\"noopener\">翻译文档1.6</a><br><a href=\"https://flink.sojb.cn/\" target=\"_blank\" rel=\"noopener\">翻译文档1.7</a><br>Base on：已经安装好JDK环境</p>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"windows环境\"><a href=\"#windows环境\" class=\"headerlink\" title=\"windows环境\"></a>windows环境</h3><ul>\n<li><p>下载资源文件，<a href=\"https://flink.apache.org/downloads.html\" target=\"_blank\" rel=\"noopener\">地址</a><br>下载对应的安装包，解压即可使用，进入bin目录下，点击bat后缀文件即可启动</p>\n</li>\n<li><p>设置环境变量<br>FLINK_HOME：flink解压目录  #配置Path，增加 %FLINK_HOME%\\bin<br>FLINK_CONF_DIR: flink配置文件夹conf目录</p>\n</li>\n<li><p>查看版本：<code>flink --version</code></p>\n</li>\n<li><p>启动flink<br>进入bin目录下，点击运行 start-cluster.bat；弹出日志输出窗口<br>浏览器输入：local host:8081 如图：<br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222171343.png\" alt=\"\"></p>\n</li>\n</ul>\n<h3 id=\"linux环境\"><a href=\"#linux环境\" class=\"headerlink\" title=\"linux环境\"></a>linux环境</h3><p>待补充···</p>\n<h2 id=\"编写本地流处理demo\"><a href=\"#编写本地流处理demo\" class=\"headerlink\" title=\"编写本地流处理demo\"></a>编写本地流处理demo</h2><h3 id=\"新建flink-demo项目\"><a href=\"#新建flink-demo项目\" class=\"headerlink\" title=\"新建flink-demo项目\"></a>新建flink-demo项目</h3><p>IDEA new project 选择maven项目，如图：<br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222171900.png\" alt=\"\"></p>\n<h3 id=\"编写测试类\"><a href=\"#编写测试类\" class=\"headerlink\" title=\"编写测试类\"></a>编写测试类</h3><p>新建类文件SocketTextStreamWordCount.java<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.aikq.flink;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.api.common.functions.FlatMapFunction;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.api.java.tuple.Tuple2;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.datastream.DataStreamSource;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.datastream.SingleOutputStreamOperator;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.flink.util.Collector;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *  E</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> aikq</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span> 2019年02月22日 14:47</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SocketTextStreamWordCount</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// 参数校验</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (args.length != <span class=\"number\">2</span>)&#123;</span><br><span class=\"line\">\t\t\tSystem.out.println(<span class=\"string\">\"USAGE:\\nSocketTextStreamWordCount &lt;hostname&gt; &lt;port&gt;\"</span>);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tString hostname = args[<span class=\"number\">0</span>];</span><br><span class=\"line\">\t\tInteger port = Integer.parseInt(args[<span class=\"number\">1</span>]);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">final</span> StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">//获取数据</span></span><br><span class=\"line\">\t\tDataStreamSource&lt;String&gt; stream = env.socketTextStream(hostname, port);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">//计数</span></span><br><span class=\"line\">\t\tSingleOutputStreamOperator&lt;Tuple2&lt;String, Integer&gt;&gt; sum = stream.flatMap(<span class=\"keyword\">new</span> LineSplitter())</span><br><span class=\"line\">\t\t\t\t.keyBy(<span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t\t\t.sum(<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tsum.print();</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tenv.execute(<span class=\"string\">\"Java WordCount from SocketTextStream Demo\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LineSplitter</span> <span class=\"keyword\">implements</span> \t\t\t\t<span class=\"title\">FlatMapFunction</span>&lt;<span class=\"title\">String</span>, <span class=\"title\">Tuple2</span>&lt;<span class=\"title\">String</span>, <span class=\"title\">Integer</span>&gt;&gt; </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">flatMap</span><span class=\"params\">(String s, Collector&lt;Tuple2&lt;String, Integer&gt;&gt; collector)</span> </span>&#123;</span><br><span class=\"line\">\t\t\tString[] tokens = s.toLowerCase().split(<span class=\"string\">\"\\\\W+\"</span>);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">for</span> (String token: tokens) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (token.length() &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t\t\t\tcollector.collect(<span class=\"keyword\">new</span> Tuple2&lt;String, Integer&gt;(token, <span class=\"number\">1</span>));</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"打包编译\"><a href=\"#打包编译\" class=\"headerlink\" title=\"打包编译\"></a>打包编译</h3><p>在项目根目录下，使用命令打包：<code>mvn clean package -Dmaven.test.skip=true</code></p>\n<p>或者利用IDE，如图：<br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222172615.png\" alt=\"\"><br>1：忽略单元测试<br>package：执行打包命令，生成jar包，如图：<br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222175501.png\" alt=\"\"></p>\n<h3 id=\"开启本地监听端口\"><a href=\"#开启本地监听端口\" class=\"headerlink\" title=\"开启本地监听端口\"></a>开启本地监听端口</h3><p>windows需要安装netcat，<a href=\"https://eternallybored.org/misc/netcat/\" target=\"_blank\" rel=\"noopener\">下载地址</a></p>\n<ul>\n<li>下载安装包</li>\n<li>解压</li>\n<li>nc命令<br>Windows OS环境下使用nc命令，实现TCP方式监听服务器端9000端口<br>服务器端命令：<code>nc.exe -l -p [端口号]</code><br>客户端命令：<code>nc.exe [服务器端IP地址] [端口号]</code><br>Windows OS环境下使用nc命令，实现UDP方式监听服务器端9000端口<br>服务器端命令：<code>nc.exe -lu -p [端口号]</code><br>客户端命令：<code>nc.exe -u [服务器端IP地址] [端口号]</code><br>如下图：<br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222174153.png\" alt=\"\"></li>\n</ul>\n<h2 id=\"flink运行flink-demo-jar\"><a href=\"#flink运行flink-demo-jar\" class=\"headerlink\" title=\"flink运行flink-demo.jar\"></a>flink运行flink-demo.jar</h2><p>打开cmd，执行命令<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flink run -c com.aikq.flink.SocketTextStreamWordCount flink-demo-1.0-SNAPSHOT.jar 127.0.0.1 9000</span><br></pre></td></tr></table></figure></p>\n<p><code>com.aikq.flink.SocketTextStreamWordCount</code>必须是对应类含包名的全路径<br>运行成功后可以在flink管理界面看到新增一个job，如图：<br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222175135.png\" alt=\"\"></p>\n<p>然后再nc监听的9000端口窗口输入测试字符串，在日志窗口有对应输出，如图：<br><img src=\"https://raw.githubusercontent.com/aikaiqiang/aikq-blog-comments/master/notepic/20190222175032.png\" alt=\"\"></p>"},{"title":"Docker+Rancher+Docker registry服务镜像化","date":"2018-09-30T08:00:54.000Z","toc":true,"declare":true,"_content":"\n>摘要：本次操作基于CentOS 7部署\n\n### 安装Docker\n\n####  利用yum工具安装docker\n```shell\nyum -y install docker\n```\n\n<!-- more -->\n\n#### 启动docker\n```bash\nsystemctl start docker\n```\n输入上面命令后，报错如图:\n\n{% asset_img 1_start_error.png 启动报错 %}\n\n根据提示输入命令：\n```bash\nsystemctl status docker.service\n```\n\n输出信息如下:\n\n{% asset_img 2_status_docker.png 启动报错 %}\n输出指出：SELinux 不支持overlay2，所以要关闭SELinux，编辑文件 `/etc/sysconfig/docker` :\n\n`vi /etc/sysconfig/docker`\n\n{% asset_img 3_edit_docker_config.png 修改配置docker文件 %}\n\n重启docker： `systemctl restart docker`\n\n#### 查看docker服务状态\n\n```bash\nsystemctl status docker\n```\n\n{% asset_img 4_docker_status.png 查看docker服务状态 %}\n到此docker已经安装并成功启动。。。\n\n-----\n\n#### 将docker服务加入开启自启动\n\n```bash\nsystemctl enable docker\n```\n\n#### 修改docker镜像地址为国内官方地址，重启docker是配置生效；\n\n`vim /etc/docker/daemon.json`\n\n```\n{\n\"registry-mirrors\": [\"https://registry.docker-cn.com\"]\n}\n```\n\n#### 修改docker镜像和容器的存储位置，Docker默认的镜像和容器存储位置在/var/lib/docker ：\n\n{% asset_img 5_docker_info.png 查看docker信息 %}\n\n编辑文件docker.service，使用-g参数指定存储位置\n\n```\nvi /usr/lib/systemd/system/docker.service\n```\nExecStart=/usr/bin/dockerd下面添加如下内容 :\n\n--graph  /data/tool/docker  #自定义存储目录\n\n{% asset_img docker_image_location.png docker镜像自定义目录 %}\n\nreload配置文件：systemctl daemon-reload\n\n重启docker服务：systemctl restart docker\n\n#### 查看linux信息\n```bash\n# 查看linux当前操作系统内核信息\nuname -a \n# Linux查看当前操作系统版本信息\ncat /proc/version      \n# Linux查看cpu相关信息，包括型号、主频、内核信息等\ncat /proc/cpuinfo\n```                   \n\n###  安装Rancher\n\n#### docker容器化部署：（[参考连接](https://rancher.com/docs/rancher/v1.6/zh/installing-rancher/installing-server/)）\n\n##### 启动 RANCHER SERVER - 单容器部署 - 使用外部数据库：\n\n```bash\ndocker run -d --restart=unless-stopped -p 8080:8080 rancher/server \\\n      --db-host 192.168.0.14 \\\n      --db-port 3306 \\\n      --db-user root \\\n      --db-password Cobbler1234! \\ \n      --db-name cattle\n```\n\ncattle 是提前在192.168.0.14上建好的数据库；\n1. 启动报错：exec: \"docker-proxy\": executable file not found in $PATH 如图：\n{% asset_img 7_docker_run_error.png %}\n\n查看下 docker-proxy 的位置： `cat /usr/lib/systemd/system/docker.service | grep prox`\n\n创建一条软连接到 /usr/bin/ 下：`ln -s /usr/libexec/docker/docker-proxy-current  /usr/bin/docker-proxy`\n\n2. 启动报错2：Error response from daemon: shim error: docker-runc not installed on system，如图：\n{% asset_img 9_docker_run_error.png %}\n   \n查看下 docker-runc 的位置：`cat/usr/lib/systemd/system/docker.service | grep runc`\n     \n创建一条软连接到 /usr/bin/ 下： `ln -s /usr/libexec/docker/docker-runc-current /usr/bin/docker-runc`\n\n##### 启动 RANCHER SERVER - 单容器部署 (NON-HA)\n\n```bash\ndocker run -d --restart=unless-stopped -p 8080:8080 rancher/server\n```\n\n启动报错：iptables failed: iptables --wait -t nat -A DOCKER -p tcp -d 0/0 --dport 8080 -j DNAT --to-destination 172.17.0.2:8080 ! -i docker0: iptables: No chain/target/match by that name.如图：\n{% asset_img 10_docker_run_error.png %}\n\n处理报错：\n```bash\n# 先看能不能ping通网络。若能依次执行以下命令:\npkill docker\niptables -t nat -F\nifconfig docker0 down\nbrctl delbr docker0\ndocker -d\n\n# 重启docker服务\nsystmctl restart docker\n```\n重启后，查看docker 容器： `docker ps -a`  如图：\n{% asset_img 11_docker_run_success.png %}\n\n启动成功，访问http://192.168.0.93:8080（部署服务器地址:端口）,如图：\n{% asset_img 12_docker_manage_index.png 管理界面 %}\n\n##### 配置RANCHER\n\n- 访问控制：\n{% asset_img 13_manage_controll.png 访问控制 %}\n\n目前选择本地身份认证（[参考链接](https://rancher.com/docs/rancher/v1.6/zh/configuration/access-control/#section-3)）：\n账户/密码：admin/123456\n\n- 添加主机\n{% asset_img 13_manage_add_host.png 添加主机 %}\n\n\n### 部署私有仓库 Docker Registry\n\n#### 安装运行 docker-registry\n\n- ***默认安装***\n\n```bash\ndocker run -d -p 5000:5000 --restart=always --name registry registry\n```\n\n使用官方的 registry 镜像来启动私有仓库。默认情况下，仓库会被创建在***容器***的 /var/lib/registry 目录下;\n\n- ***指定仓库目录安装***\n\n通过 `-v` 参数来将镜像文件存放在本地的指定路径 :\n\n```\ndocker run -d -p 5000:5000 -v /data/tool/docker/registry:/var/lib/registry registry\n```\n\n#### 查看系统当前的镜像：\n\n```bash\ndocker images\n```\n{% asset_img 14_docker_tag.png 添加主机 %}\n\n#### 使用 `docker tag` 来标记一个镜像，然后推送它到仓库。例如私有仓库地址为 `127.0.0.1:5000`\n\n格式为 `docker tag IMAGE[:TAG] [REGISTRY_HOST[:REGISTRY_PORT]/]REPOSITORY[:TAG]`  \n\n```\ndocker tag a0b9e05b2a03  127.0.0.1:5000/rancher_server:version1.0\n```\n\n如上图，多了一个rancher/server 镜像 tag 为 version1.0\n\n上传到私有仓库：`docker push 127.0.0.1:5000/rancher_server:version1.0`\n\n#### 用 `curl` 查看仓库中的镜像 ：`curl 127.0.0.1:5000/v2/_catalog`\n{% asset_img 14_docker_registry_1.png 查看仓库 %}\n直接在浏览器访问查看：\n{% asset_img 14_docker_registry_2.png  访问主页 %}\n\n-----\n\n### 【以下是基于本地win10系统安装docker后构建docker镜像】\n\n备注：下文中镜像仓库ip地址修改为 192.168.0.94\n\n####  使用Dockerfile文件构建镜像\n\n- 编写Dockerfile文件\n\t\n```Dockerfile\nFROM java:8\nVOLUME /data/container\nADD magic-eureka-center-0.0.1-SNAPSHOT.jar app.jar\nRUN bash -c 'touch /app.jar'\nEXPOSE 8761\nENTRYPOINT [\"java\",\"-Djava.security.egd=file:/dev/./urandom\",\"-jar\",\"/app.jar\"]\n```\n\n- docker build构建镜像\n格式：docker build -t  仓库名称/镜像名称[:标签]   Dockerfile的相对位置\n```\ndocker build -t magic/eureka:0.0.1 .\n```\n{% asset_img docker_build.png %}\n\n- 查看镜像\n\n```bash\ndocker images\n```\n{% asset_img docker_images.png %}\n\n#### 使用maven插件构建镜像\n\n在pom.xml文件增加插件：\n\n```\n<plugin>\n    <groupId>com.spotify</groupId>\n    <artifactId>docker-maven-plugin</artifactId>\n    <version>0.4.13</version>\n    <configuration>\n        <imageName>${project.artifactId}:${core.version}</imageName>\n        <dockerDirectory>${project.basedir}/src/main/docker</dockerDirectory>\n        <resources>\n            <resource>\n                <targetPath>/</targetPath>\n                <directory>${project.build.directory}</directory>\n                <include>${project.build.finalName}.jar</include>\n            </resource>\n        </resources>\n    </configuration>\n</plugin>\n```\n\n在/src/main/docker目录下新建Dockerfile\n\n```Dockerfile\nFROM java:8\nVOLUME /data/container\nADD magic-eureka-center-0.0.1-SNAPSHOT.jar app.jar\nRUN bash -c 'touch /app.jar'\nEXPOSE 8761\nENTRYPOINT [\"java\",\"-Djava.security.egd=file:/dev/./urandom\",\"-jar\",\"/app.jar\"]\n```\n\n子模块根目录下 magic-eureka-center/  使用命令构建，运行命令如下：\n\n```bash\nmvn clean package docker:build\n```\n\n或者 通过IDEA 配置：\n{% asset_img maven_docker_build.png %}\n在控制台Console可以看到构建成功后的输出信息;\n使用 `docker images` 查看新构建的镜像;\n\n\n#### 上传镜像私有Docker Registry\n- 为本地镜像打标签\n```bash\ndocker tag magic/eureka:0.0.1 192.168.0.94:5000/magic/eureka:0.0.1\n```\n- push到仓库\n```bash\ndocker push 192.168.0.94:5000/magic/eureka:0.0.1\n```\n\n有点不顺利~~~，报错如下：\n\n{% asset_img docker_push_error.png %}\n\n错误信息：Get https://192.168.0.94:5000/v2/: http: server gave HTTP response to HTTPS client\n\n查询错误原因：[参考博客](https://www.cnblogs.com/hobinly/p/6110624.html)\n\n{% asset_img docker_push_solution.png %}\n\n根据以上信息，我修改了本地【win10】docker的daemon.json文件 ，再重启服务： \n\n{% asset_img docker_daemon.png %}\n\n重新push就可以了，如图：\n\n```bash\ndocker push 192.168.0.94:5000/magic/eureka:0.0.1\n```\n\n{% asset_img docker_push_ok.png %}\n\n\n\n#### 从私有docker仓库pull镜像,启动服务\n在192.168.0.94机器上从私有docker镜像仓库获取之前上传的镜像，再运行\n- pull镜像\n```bash\ndocker pull 192.168.0.94:5000/magic/eureka:0.0.1\n```\n\n{% asset_img docker_pull_image.png %}\n\n地址上加http协议报错：\n```bash\ndocker pull http://192.168.0.94:5000/magic/eureka:0.0.1 #错误\n```\n\n{% asset_img docker_pull_error.png %}\n\n- 运行镜像\n\n```bash\ndocker run -d -p 8761:8761 192.168.0.94:5000/magic/eureka:0.0.1\n```\n\n{% asset_img docker_run_ok.png %}\n\n查看运行中的容器：\n```bash\ndocker ps\n```\n{% asset_img docker_ps.png %}\n\n\n#### 使用Docker-Compose 工具编排微服务\n- 安装docker-compose  [参考地址](https://docs.docker.com/compose/install/#install-compose)\n  - 下载最新版本docker-compose\n```bash\ncurl -L \"https://github.com/docker/compose/releases/download/1.22.0/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\n```\n\n  - 添加执行权限\n```bash\nsudo chmod +x /usr/local/bin/docker-compose\n```\n\n  - 安装完成\n{% asset_img docker-compose-success.png %}\n\n  \n- 安装docker-compose命令补全工具（输入docker-compose后按Tab键提示）\n[参考地址](https://docs.docker.com/compose/completion/)\n运行如下命令，重新连接终端即可生效\n```bash\nsudo curl -L https://raw.githubusercontent.com/docker/compose/1.22.0/contrib/completion/bash/docker-compose -o /etc/bash_completion.d/docker-compose\n```\n\n\n- 编写docker-compose.yml文件：\n目录结构：\n{% asset_img docker-compose-mulu.png %}\n\ndocker-compose.yml 代码:\n\n```bash\n# 表示该docker-compose.yml文件使用的是Version 2 file format\nversion: '2'\n# Version 2 file format 的固定写法，为project定义服务\nservices:\n# 指定服务名称\neureka:\n  # replace username/repo:tag with your name and image details\n  #image: username/repo:tag\n\n  # build构建镜像，Dockerfile文件相对地址\n  build: .\n\n  # 暴露端口\n  ports:\n  - \"8761:8761\"\n  expose:\n  - 8761\n```\n\nDockerfile文件代码：\n\n```Dockerfile\nFROM java:8\nVOLUME /data/container\nADD target/magic-eureka-center-0.0.1-SNAPSHOT.jar app.jar\nRUN bash -c 'touch /app.jar'\nEXPOSE 8761\nENTRYPOINT [\"java\",\"-Djava.security.egd=file:/dev/./urandom\",\"-jar\",\"/app.jar\"]\n```\n\n运行构建:`docker-compose up`  \n\n后台运行构建: `docker-compose up -d` \n\n\n","source":"_posts/Docker-rancher.md","raw":"---\ntitle: Docker+Rancher+Docker registry服务镜像化\ndate: 2018-09-30 16:00:54\ntags:\n   - Docker\n   - Rancher\n   - Docker Registry\ncategories:\n   - Docker\ntoc: true\ndeclare: true\n---\n\n>摘要：本次操作基于CentOS 7部署\n\n### 安装Docker\n\n####  利用yum工具安装docker\n```shell\nyum -y install docker\n```\n\n<!-- more -->\n\n#### 启动docker\n```bash\nsystemctl start docker\n```\n输入上面命令后，报错如图:\n\n{% asset_img 1_start_error.png 启动报错 %}\n\n根据提示输入命令：\n```bash\nsystemctl status docker.service\n```\n\n输出信息如下:\n\n{% asset_img 2_status_docker.png 启动报错 %}\n输出指出：SELinux 不支持overlay2，所以要关闭SELinux，编辑文件 `/etc/sysconfig/docker` :\n\n`vi /etc/sysconfig/docker`\n\n{% asset_img 3_edit_docker_config.png 修改配置docker文件 %}\n\n重启docker： `systemctl restart docker`\n\n#### 查看docker服务状态\n\n```bash\nsystemctl status docker\n```\n\n{% asset_img 4_docker_status.png 查看docker服务状态 %}\n到此docker已经安装并成功启动。。。\n\n-----\n\n#### 将docker服务加入开启自启动\n\n```bash\nsystemctl enable docker\n```\n\n#### 修改docker镜像地址为国内官方地址，重启docker是配置生效；\n\n`vim /etc/docker/daemon.json`\n\n```\n{\n\"registry-mirrors\": [\"https://registry.docker-cn.com\"]\n}\n```\n\n#### 修改docker镜像和容器的存储位置，Docker默认的镜像和容器存储位置在/var/lib/docker ：\n\n{% asset_img 5_docker_info.png 查看docker信息 %}\n\n编辑文件docker.service，使用-g参数指定存储位置\n\n```\nvi /usr/lib/systemd/system/docker.service\n```\nExecStart=/usr/bin/dockerd下面添加如下内容 :\n\n--graph  /data/tool/docker  #自定义存储目录\n\n{% asset_img docker_image_location.png docker镜像自定义目录 %}\n\nreload配置文件：systemctl daemon-reload\n\n重启docker服务：systemctl restart docker\n\n#### 查看linux信息\n```bash\n# 查看linux当前操作系统内核信息\nuname -a \n# Linux查看当前操作系统版本信息\ncat /proc/version      \n# Linux查看cpu相关信息，包括型号、主频、内核信息等\ncat /proc/cpuinfo\n```                   \n\n###  安装Rancher\n\n#### docker容器化部署：（[参考连接](https://rancher.com/docs/rancher/v1.6/zh/installing-rancher/installing-server/)）\n\n##### 启动 RANCHER SERVER - 单容器部署 - 使用外部数据库：\n\n```bash\ndocker run -d --restart=unless-stopped -p 8080:8080 rancher/server \\\n      --db-host 192.168.0.14 \\\n      --db-port 3306 \\\n      --db-user root \\\n      --db-password Cobbler1234! \\ \n      --db-name cattle\n```\n\ncattle 是提前在192.168.0.14上建好的数据库；\n1. 启动报错：exec: \"docker-proxy\": executable file not found in $PATH 如图：\n{% asset_img 7_docker_run_error.png %}\n\n查看下 docker-proxy 的位置： `cat /usr/lib/systemd/system/docker.service | grep prox`\n\n创建一条软连接到 /usr/bin/ 下：`ln -s /usr/libexec/docker/docker-proxy-current  /usr/bin/docker-proxy`\n\n2. 启动报错2：Error response from daemon: shim error: docker-runc not installed on system，如图：\n{% asset_img 9_docker_run_error.png %}\n   \n查看下 docker-runc 的位置：`cat/usr/lib/systemd/system/docker.service | grep runc`\n     \n创建一条软连接到 /usr/bin/ 下： `ln -s /usr/libexec/docker/docker-runc-current /usr/bin/docker-runc`\n\n##### 启动 RANCHER SERVER - 单容器部署 (NON-HA)\n\n```bash\ndocker run -d --restart=unless-stopped -p 8080:8080 rancher/server\n```\n\n启动报错：iptables failed: iptables --wait -t nat -A DOCKER -p tcp -d 0/0 --dport 8080 -j DNAT --to-destination 172.17.0.2:8080 ! -i docker0: iptables: No chain/target/match by that name.如图：\n{% asset_img 10_docker_run_error.png %}\n\n处理报错：\n```bash\n# 先看能不能ping通网络。若能依次执行以下命令:\npkill docker\niptables -t nat -F\nifconfig docker0 down\nbrctl delbr docker0\ndocker -d\n\n# 重启docker服务\nsystmctl restart docker\n```\n重启后，查看docker 容器： `docker ps -a`  如图：\n{% asset_img 11_docker_run_success.png %}\n\n启动成功，访问http://192.168.0.93:8080（部署服务器地址:端口）,如图：\n{% asset_img 12_docker_manage_index.png 管理界面 %}\n\n##### 配置RANCHER\n\n- 访问控制：\n{% asset_img 13_manage_controll.png 访问控制 %}\n\n目前选择本地身份认证（[参考链接](https://rancher.com/docs/rancher/v1.6/zh/configuration/access-control/#section-3)）：\n账户/密码：admin/123456\n\n- 添加主机\n{% asset_img 13_manage_add_host.png 添加主机 %}\n\n\n### 部署私有仓库 Docker Registry\n\n#### 安装运行 docker-registry\n\n- ***默认安装***\n\n```bash\ndocker run -d -p 5000:5000 --restart=always --name registry registry\n```\n\n使用官方的 registry 镜像来启动私有仓库。默认情况下，仓库会被创建在***容器***的 /var/lib/registry 目录下;\n\n- ***指定仓库目录安装***\n\n通过 `-v` 参数来将镜像文件存放在本地的指定路径 :\n\n```\ndocker run -d -p 5000:5000 -v /data/tool/docker/registry:/var/lib/registry registry\n```\n\n#### 查看系统当前的镜像：\n\n```bash\ndocker images\n```\n{% asset_img 14_docker_tag.png 添加主机 %}\n\n#### 使用 `docker tag` 来标记一个镜像，然后推送它到仓库。例如私有仓库地址为 `127.0.0.1:5000`\n\n格式为 `docker tag IMAGE[:TAG] [REGISTRY_HOST[:REGISTRY_PORT]/]REPOSITORY[:TAG]`  \n\n```\ndocker tag a0b9e05b2a03  127.0.0.1:5000/rancher_server:version1.0\n```\n\n如上图，多了一个rancher/server 镜像 tag 为 version1.0\n\n上传到私有仓库：`docker push 127.0.0.1:5000/rancher_server:version1.0`\n\n#### 用 `curl` 查看仓库中的镜像 ：`curl 127.0.0.1:5000/v2/_catalog`\n{% asset_img 14_docker_registry_1.png 查看仓库 %}\n直接在浏览器访问查看：\n{% asset_img 14_docker_registry_2.png  访问主页 %}\n\n-----\n\n### 【以下是基于本地win10系统安装docker后构建docker镜像】\n\n备注：下文中镜像仓库ip地址修改为 192.168.0.94\n\n####  使用Dockerfile文件构建镜像\n\n- 编写Dockerfile文件\n\t\n```Dockerfile\nFROM java:8\nVOLUME /data/container\nADD magic-eureka-center-0.0.1-SNAPSHOT.jar app.jar\nRUN bash -c 'touch /app.jar'\nEXPOSE 8761\nENTRYPOINT [\"java\",\"-Djava.security.egd=file:/dev/./urandom\",\"-jar\",\"/app.jar\"]\n```\n\n- docker build构建镜像\n格式：docker build -t  仓库名称/镜像名称[:标签]   Dockerfile的相对位置\n```\ndocker build -t magic/eureka:0.0.1 .\n```\n{% asset_img docker_build.png %}\n\n- 查看镜像\n\n```bash\ndocker images\n```\n{% asset_img docker_images.png %}\n\n#### 使用maven插件构建镜像\n\n在pom.xml文件增加插件：\n\n```\n<plugin>\n    <groupId>com.spotify</groupId>\n    <artifactId>docker-maven-plugin</artifactId>\n    <version>0.4.13</version>\n    <configuration>\n        <imageName>${project.artifactId}:${core.version}</imageName>\n        <dockerDirectory>${project.basedir}/src/main/docker</dockerDirectory>\n        <resources>\n            <resource>\n                <targetPath>/</targetPath>\n                <directory>${project.build.directory}</directory>\n                <include>${project.build.finalName}.jar</include>\n            </resource>\n        </resources>\n    </configuration>\n</plugin>\n```\n\n在/src/main/docker目录下新建Dockerfile\n\n```Dockerfile\nFROM java:8\nVOLUME /data/container\nADD magic-eureka-center-0.0.1-SNAPSHOT.jar app.jar\nRUN bash -c 'touch /app.jar'\nEXPOSE 8761\nENTRYPOINT [\"java\",\"-Djava.security.egd=file:/dev/./urandom\",\"-jar\",\"/app.jar\"]\n```\n\n子模块根目录下 magic-eureka-center/  使用命令构建，运行命令如下：\n\n```bash\nmvn clean package docker:build\n```\n\n或者 通过IDEA 配置：\n{% asset_img maven_docker_build.png %}\n在控制台Console可以看到构建成功后的输出信息;\n使用 `docker images` 查看新构建的镜像;\n\n\n#### 上传镜像私有Docker Registry\n- 为本地镜像打标签\n```bash\ndocker tag magic/eureka:0.0.1 192.168.0.94:5000/magic/eureka:0.0.1\n```\n- push到仓库\n```bash\ndocker push 192.168.0.94:5000/magic/eureka:0.0.1\n```\n\n有点不顺利~~~，报错如下：\n\n{% asset_img docker_push_error.png %}\n\n错误信息：Get https://192.168.0.94:5000/v2/: http: server gave HTTP response to HTTPS client\n\n查询错误原因：[参考博客](https://www.cnblogs.com/hobinly/p/6110624.html)\n\n{% asset_img docker_push_solution.png %}\n\n根据以上信息，我修改了本地【win10】docker的daemon.json文件 ，再重启服务： \n\n{% asset_img docker_daemon.png %}\n\n重新push就可以了，如图：\n\n```bash\ndocker push 192.168.0.94:5000/magic/eureka:0.0.1\n```\n\n{% asset_img docker_push_ok.png %}\n\n\n\n#### 从私有docker仓库pull镜像,启动服务\n在192.168.0.94机器上从私有docker镜像仓库获取之前上传的镜像，再运行\n- pull镜像\n```bash\ndocker pull 192.168.0.94:5000/magic/eureka:0.0.1\n```\n\n{% asset_img docker_pull_image.png %}\n\n地址上加http协议报错：\n```bash\ndocker pull http://192.168.0.94:5000/magic/eureka:0.0.1 #错误\n```\n\n{% asset_img docker_pull_error.png %}\n\n- 运行镜像\n\n```bash\ndocker run -d -p 8761:8761 192.168.0.94:5000/magic/eureka:0.0.1\n```\n\n{% asset_img docker_run_ok.png %}\n\n查看运行中的容器：\n```bash\ndocker ps\n```\n{% asset_img docker_ps.png %}\n\n\n#### 使用Docker-Compose 工具编排微服务\n- 安装docker-compose  [参考地址](https://docs.docker.com/compose/install/#install-compose)\n  - 下载最新版本docker-compose\n```bash\ncurl -L \"https://github.com/docker/compose/releases/download/1.22.0/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\n```\n\n  - 添加执行权限\n```bash\nsudo chmod +x /usr/local/bin/docker-compose\n```\n\n  - 安装完成\n{% asset_img docker-compose-success.png %}\n\n  \n- 安装docker-compose命令补全工具（输入docker-compose后按Tab键提示）\n[参考地址](https://docs.docker.com/compose/completion/)\n运行如下命令，重新连接终端即可生效\n```bash\nsudo curl -L https://raw.githubusercontent.com/docker/compose/1.22.0/contrib/completion/bash/docker-compose -o /etc/bash_completion.d/docker-compose\n```\n\n\n- 编写docker-compose.yml文件：\n目录结构：\n{% asset_img docker-compose-mulu.png %}\n\ndocker-compose.yml 代码:\n\n```bash\n# 表示该docker-compose.yml文件使用的是Version 2 file format\nversion: '2'\n# Version 2 file format 的固定写法，为project定义服务\nservices:\n# 指定服务名称\neureka:\n  # replace username/repo:tag with your name and image details\n  #image: username/repo:tag\n\n  # build构建镜像，Dockerfile文件相对地址\n  build: .\n\n  # 暴露端口\n  ports:\n  - \"8761:8761\"\n  expose:\n  - 8761\n```\n\nDockerfile文件代码：\n\n```Dockerfile\nFROM java:8\nVOLUME /data/container\nADD target/magic-eureka-center-0.0.1-SNAPSHOT.jar app.jar\nRUN bash -c 'touch /app.jar'\nEXPOSE 8761\nENTRYPOINT [\"java\",\"-Djava.security.egd=file:/dev/./urandom\",\"-jar\",\"/app.jar\"]\n```\n\n运行构建:`docker-compose up`  \n\n后台运行构建: `docker-compose up -d` \n\n\n","slug":"Docker-rancher","published":1,"updated":"2019-02-20T06:48:23.396Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck2vmvr9w001dmgu51crycycn","content":"<blockquote>\n<p>摘要：本次操作基于CentOS 7部署</p>\n</blockquote>\n<h3 id=\"安装Docker\"><a href=\"#安装Docker\" class=\"headerlink\" title=\"安装Docker\"></a>安装Docker</h3><h4 id=\"利用yum工具安装docker\"><a href=\"#利用yum工具安装docker\" class=\"headerlink\" title=\"利用yum工具安装docker\"></a>利用yum工具安装docker</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install docker</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<h4 id=\"启动docker\"><a href=\"#启动docker\" class=\"headerlink\" title=\"启动docker\"></a>启动docker</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start docker</span><br></pre></td></tr></table></figure>\n<p>输入上面命令后，报错如图:</p>\n\n<p>根据提示输入命令：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status docker.service</span><br></pre></td></tr></table></figure></p>\n<p>输出信息如下:</p>\n\n<p>输出指出：SELinux 不支持overlay2，所以要关闭SELinux，编辑文件 <code>/etc/sysconfig/docker</code> :</p>\n<p><code>vi /etc/sysconfig/docker</code></p>\n\n<p>重启docker： <code>systemctl restart docker</code></p>\n<h4 id=\"查看docker服务状态\"><a href=\"#查看docker服务状态\" class=\"headerlink\" title=\"查看docker服务状态\"></a>查看docker服务状态</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status docker</span><br></pre></td></tr></table></figure>\n\n<p>到此docker已经安装并成功启动。。。</p>\n<hr>\n<h4 id=\"将docker服务加入开启自启动\"><a href=\"#将docker服务加入开启自启动\" class=\"headerlink\" title=\"将docker服务加入开启自启动\"></a>将docker服务加入开启自启动</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl <span class=\"built_in\">enable</span> docker</span><br></pre></td></tr></table></figure>\n<h4 id=\"修改docker镜像地址为国内官方地址，重启docker是配置生效；\"><a href=\"#修改docker镜像地址为国内官方地址，重启docker是配置生效；\" class=\"headerlink\" title=\"修改docker镜像地址为国内官方地址，重启docker是配置生效；\"></a>修改docker镜像地址为国内官方地址，重启docker是配置生效；</h4><p><code>vim /etc/docker/daemon.json</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">&quot;registry-mirrors&quot;: [&quot;https://registry.docker-cn.com&quot;]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"修改docker镜像和容器的存储位置，Docker默认的镜像和容器存储位置在-var-lib-docker-：\"><a href=\"#修改docker镜像和容器的存储位置，Docker默认的镜像和容器存储位置在-var-lib-docker-：\" class=\"headerlink\" title=\"修改docker镜像和容器的存储位置，Docker默认的镜像和容器存储位置在/var/lib/docker ：\"></a>修改docker镜像和容器的存储位置，Docker默认的镜像和容器存储位置在/var/lib/docker ：</h4>\n<p>编辑文件docker.service，使用-g参数指定存储位置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /usr/lib/systemd/system/docker.service</span><br></pre></td></tr></table></figure>\n<p>ExecStart=/usr/bin/dockerd下面添加如下内容 :</p>\n<p>–graph  /data/tool/docker  #自定义存储目录</p>\n\n<p>reload配置文件：systemctl daemon-reload</p>\n<p>重启docker服务：systemctl restart docker</p>\n<h4 id=\"查看linux信息\"><a href=\"#查看linux信息\" class=\"headerlink\" title=\"查看linux信息\"></a>查看linux信息</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查看linux当前操作系统内核信息</span></span><br><span class=\"line\">uname -a </span><br><span class=\"line\"><span class=\"comment\"># Linux查看当前操作系统版本信息</span></span><br><span class=\"line\">cat /proc/version      </span><br><span class=\"line\"><span class=\"comment\"># Linux查看cpu相关信息，包括型号、主频、内核信息等</span></span><br><span class=\"line\">cat /proc/cpuinfo</span><br><span class=\"line\">```                   </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###  安装Rancher</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#### docker容器化部署：（[参考连接](https://rancher.com/docs/rancher/v1.6/zh/installing-rancher/installing-server/)）</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##### 启动 RANCHER SERVER - 单容器部署 - 使用外部数据库：</span></span><br><span class=\"line\"></span><br><span class=\"line\">```bash</span><br><span class=\"line\">docker run -d --restart=unless-stopped -p 8080:8080 rancher/server \\</span><br><span class=\"line\">      --db-host 192.168.0.14 \\</span><br><span class=\"line\">      --db-port 3306 \\</span><br><span class=\"line\">      --db-user root \\</span><br><span class=\"line\">      --db-password Cobbler1234! \\ </span><br><span class=\"line\">      --db-name cattle</span><br></pre></td></tr></table></figure>\n<p>cattle 是提前在192.168.0.14上建好的数据库；</p>\n<ol>\n<li>启动报错：exec: “docker-proxy”: executable file not found in $PATH 如图：\n</li>\n</ol>\n<p>查看下 docker-proxy 的位置： <code>cat /usr/lib/systemd/system/docker.service | grep prox</code></p>\n<p>创建一条软连接到 /usr/bin/ 下：<code>ln -s /usr/libexec/docker/docker-proxy-current  /usr/bin/docker-proxy</code></p>\n<ol start=\"2\">\n<li>启动报错2：Error response from daemon: shim error: docker-runc not installed on system，如图：\n</li>\n</ol>\n<p>查看下 docker-runc 的位置：<code>cat/usr/lib/systemd/system/docker.service | grep runc</code></p>\n<p>创建一条软连接到 /usr/bin/ 下： <code>ln -s /usr/libexec/docker/docker-runc-current /usr/bin/docker-runc</code></p>\n<h5 id=\"启动-RANCHER-SERVER-单容器部署-NON-HA\"><a href=\"#启动-RANCHER-SERVER-单容器部署-NON-HA\" class=\"headerlink\" title=\"启动 RANCHER SERVER - 单容器部署 (NON-HA)\"></a>启动 RANCHER SERVER - 单容器部署 (NON-HA)</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -d --restart=unless-stopped -p 8080:8080 rancher/server</span><br></pre></td></tr></table></figure>\n<p>启动报错：iptables failed: iptables –wait -t nat -A DOCKER -p tcp -d 0/0 –dport 8080 -j DNAT –to-destination 172.17.0.2:8080 ! -i docker0: iptables: No chain/target/match by that name.如图：<br></p>\n<p>处理报错：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 先看能不能ping通网络。若能依次执行以下命令:</span></span><br><span class=\"line\">pkill docker</span><br><span class=\"line\">iptables -t nat -F</span><br><span class=\"line\">ifconfig docker0 down</span><br><span class=\"line\">brctl delbr docker0</span><br><span class=\"line\">docker -d</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 重启docker服务</span></span><br><span class=\"line\">systmctl restart docker</span><br></pre></td></tr></table></figure></p>\n<p>重启后，查看docker 容器： <code>docker ps -a</code>  如图：<br></p>\n<p>启动成功，访问<a href=\"http://192.168.0.93:8080（部署服务器地址:端口）,如图：\" target=\"_blank\" rel=\"noopener\">http://192.168.0.93:8080（部署服务器地址:端口）,如图：</a><br></p>\n<h5 id=\"配置RANCHER\"><a href=\"#配置RANCHER\" class=\"headerlink\" title=\"配置RANCHER\"></a>配置RANCHER</h5><ul>\n<li>访问控制：\n</li>\n</ul>\n<p>目前选择本地身份认证（<a href=\"https://rancher.com/docs/rancher/v1.6/zh/configuration/access-control/#section-3\" target=\"_blank\" rel=\"noopener\">参考链接</a>）：<br>账户/密码：admin/123456</p>\n<ul>\n<li>添加主机\n</li>\n</ul>\n<h3 id=\"部署私有仓库-Docker-Registry\"><a href=\"#部署私有仓库-Docker-Registry\" class=\"headerlink\" title=\"部署私有仓库 Docker Registry\"></a>部署私有仓库 Docker Registry</h3><h4 id=\"安装运行-docker-registry\"><a href=\"#安装运行-docker-registry\" class=\"headerlink\" title=\"安装运行 docker-registry\"></a>安装运行 docker-registry</h4><ul>\n<li><strong><em>默认安装</em></strong></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -d -p 5000:5000 --restart=always --name registry registry</span><br></pre></td></tr></table></figure>\n<p>使用官方的 registry 镜像来启动私有仓库。默认情况下，仓库会被创建在<strong><em>容器</em></strong>的 /var/lib/registry 目录下;</p>\n<ul>\n<li><strong><em>指定仓库目录安装</em></strong></li>\n</ul>\n<p>通过 <code>-v</code> 参数来将镜像文件存放在本地的指定路径 :</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -d -p 5000:5000 -v /data/tool/docker/registry:/var/lib/registry registry</span><br></pre></td></tr></table></figure>\n<h4 id=\"查看系统当前的镜像：\"><a href=\"#查看系统当前的镜像：\" class=\"headerlink\" title=\"查看系统当前的镜像：\"></a>查看系统当前的镜像：</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"使用-docker-tag-来标记一个镜像，然后推送它到仓库。例如私有仓库地址为-127-0-0-1-5000\"><a href=\"#使用-docker-tag-来标记一个镜像，然后推送它到仓库。例如私有仓库地址为-127-0-0-1-5000\" class=\"headerlink\" title=\"使用 docker tag 来标记一个镜像，然后推送它到仓库。例如私有仓库地址为 127.0.0.1:5000\"></a>使用 <code>docker tag</code> 来标记一个镜像，然后推送它到仓库。例如私有仓库地址为 <code>127.0.0.1:5000</code></h4><p>格式为 <code>docker tag IMAGE[:TAG] [REGISTRY_HOST[:REGISTRY_PORT]/]REPOSITORY[:TAG]</code>  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker tag a0b9e05b2a03  127.0.0.1:5000/rancher_server:version1.0</span><br></pre></td></tr></table></figure>\n<p>如上图，多了一个rancher/server 镜像 tag 为 version1.0</p>\n<p>上传到私有仓库：<code>docker push 127.0.0.1:5000/rancher_server:version1.0</code></p>\n<h4 id=\"用-curl-查看仓库中的镜像-：curl-127-0-0-1-5000-v2-catalog\"><a href=\"#用-curl-查看仓库中的镜像-：curl-127-0-0-1-5000-v2-catalog\" class=\"headerlink\" title=\"用 curl 查看仓库中的镜像 ：curl 127.0.0.1:5000/v2/_catalog\"></a>用 <code>curl</code> 查看仓库中的镜像 ：<code>curl 127.0.0.1:5000/v2/_catalog</code></h4>\n<p>直接在浏览器访问查看：<br></p>\n<hr>\n<h3 id=\"【以下是基于本地win10系统安装docker后构建docker镜像】\"><a href=\"#【以下是基于本地win10系统安装docker后构建docker镜像】\" class=\"headerlink\" title=\"【以下是基于本地win10系统安装docker后构建docker镜像】\"></a>【以下是基于本地win10系统安装docker后构建docker镜像】</h3><p>备注：下文中镜像仓库ip地址修改为 192.168.0.94</p>\n<h4 id=\"使用Dockerfile文件构建镜像\"><a href=\"#使用Dockerfile文件构建镜像\" class=\"headerlink\" title=\"使用Dockerfile文件构建镜像\"></a>使用Dockerfile文件构建镜像</h4><ul>\n<li>编写Dockerfile文件</li>\n</ul>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span> java:<span class=\"number\">8</span></span><br><span class=\"line\"><span class=\"keyword\">VOLUME</span><span class=\"bash\"> /data/container</span></span><br><span class=\"line\"><span class=\"bash\">ADD magic-eureka-center-0.0.1-SNAPSHOT.jar app.jar</span></span><br><span class=\"line\"><span class=\"bash\">RUN bash -c <span class=\"string\">'touch /app.jar'</span></span></span><br><span class=\"line\"><span class=\"bash\">EXPOSE 8761</span></span><br><span class=\"line\"><span class=\"bash\">ENTRYPOINT [<span class=\"string\">\"java\"</span>,<span class=\"string\">\"-Djava.security.egd=file:/dev/./urandom\"</span>,<span class=\"string\">\"-jar\"</span>,<span class=\"string\">\"/app.jar\"</span>]</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>docker build构建镜像<br>格式：docker build -t  仓库名称/镜像名称[:标签]   Dockerfile的相对位置<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t magic/eureka:0.0.1 .</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n\n<ul>\n<li>查看镜像</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"使用maven插件构建镜像\"><a href=\"#使用maven插件构建镜像\" class=\"headerlink\" title=\"使用maven插件构建镜像\"></a>使用maven插件构建镜像</h4><p>在pom.xml文件增加插件：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;plugin&gt;</span><br><span class=\"line\">    &lt;groupId&gt;com.spotify&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;docker-maven-plugin&lt;/artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;0.4.13&lt;/version&gt;</span><br><span class=\"line\">    &lt;configuration&gt;</span><br><span class=\"line\">        &lt;imageName&gt;$&#123;project.artifactId&#125;:$&#123;core.version&#125;&lt;/imageName&gt;</span><br><span class=\"line\">        &lt;dockerDirectory&gt;$&#123;project.basedir&#125;/src/main/docker&lt;/dockerDirectory&gt;</span><br><span class=\"line\">        &lt;resources&gt;</span><br><span class=\"line\">            &lt;resource&gt;</span><br><span class=\"line\">                &lt;targetPath&gt;/&lt;/targetPath&gt;</span><br><span class=\"line\">                &lt;directory&gt;$&#123;project.build.directory&#125;&lt;/directory&gt;</span><br><span class=\"line\">                &lt;include&gt;$&#123;project.build.finalName&#125;.jar&lt;/include&gt;</span><br><span class=\"line\">            &lt;/resource&gt;</span><br><span class=\"line\">        &lt;/resources&gt;</span><br><span class=\"line\">    &lt;/configuration&gt;</span><br><span class=\"line\">&lt;/plugin&gt;</span><br></pre></td></tr></table></figure>\n<p>在/src/main/docker目录下新建Dockerfile</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span> java:<span class=\"number\">8</span></span><br><span class=\"line\"><span class=\"keyword\">VOLUME</span><span class=\"bash\"> /data/container</span></span><br><span class=\"line\"><span class=\"bash\">ADD magic-eureka-center-0.0.1-SNAPSHOT.jar app.jar</span></span><br><span class=\"line\"><span class=\"bash\">RUN bash -c <span class=\"string\">'touch /app.jar'</span></span></span><br><span class=\"line\"><span class=\"bash\">EXPOSE 8761</span></span><br><span class=\"line\"><span class=\"bash\">ENTRYPOINT [<span class=\"string\">\"java\"</span>,<span class=\"string\">\"-Djava.security.egd=file:/dev/./urandom\"</span>,<span class=\"string\">\"-jar\"</span>,<span class=\"string\">\"/app.jar\"</span>]</span></span><br></pre></td></tr></table></figure>\n<p>子模块根目录下 magic-eureka-center/  使用命令构建，运行命令如下：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn clean package docker:build</span><br></pre></td></tr></table></figure>\n<p>或者 通过IDEA 配置：<br><br>在控制台Console可以看到构建成功后的输出信息;<br>使用 <code>docker images</code> 查看新构建的镜像;</p>\n<h4 id=\"上传镜像私有Docker-Registry\"><a href=\"#上传镜像私有Docker-Registry\" class=\"headerlink\" title=\"上传镜像私有Docker Registry\"></a>上传镜像私有Docker Registry</h4><ul>\n<li><p>为本地镜像打标签</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker tag magic/eureka:0.0.1 192.168.0.94:5000/magic/eureka:0.0.1</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>push到仓库</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker push 192.168.0.94:5000/magic/eureka:0.0.1</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>有点不顺利~~~，报错如下：</p>\n\n<p>错误信息：Get <a href=\"https://192.168.0.94:5000/v2/\" target=\"_blank\" rel=\"noopener\">https://192.168.0.94:5000/v2/</a>: http: server gave HTTP response to HTTPS client</p>\n<p>查询错误原因：<a href=\"https://www.cnblogs.com/hobinly/p/6110624.html\" target=\"_blank\" rel=\"noopener\">参考博客</a></p>\n\n<p>根据以上信息，我修改了本地【win10】docker的daemon.json文件 ，再重启服务： </p>\n\n<p>重新push就可以了，如图：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker push 192.168.0.94:5000/magic/eureka:0.0.1</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"从私有docker仓库pull镜像-启动服务\"><a href=\"#从私有docker仓库pull镜像-启动服务\" class=\"headerlink\" title=\"从私有docker仓库pull镜像,启动服务\"></a>从私有docker仓库pull镜像,启动服务</h4><p>在192.168.0.94机器上从私有docker镜像仓库获取之前上传的镜像，再运行</p>\n<ul>\n<li>pull镜像<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull 192.168.0.94:5000/magic/eureka:0.0.1</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n\n<p>地址上加http协议报错：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull http://192.168.0.94:5000/magic/eureka:0.0.1 <span class=\"comment\">#错误</span></span><br></pre></td></tr></table></figure></p>\n\n<ul>\n<li>运行镜像</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -d -p 8761:8761 192.168.0.94:5000/magic/eureka:0.0.1</span><br></pre></td></tr></table></figure>\n\n<p>查看运行中的容器：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps</span><br></pre></td></tr></table></figure></p>\n\n<h4 id=\"使用Docker-Compose-工具编排微服务\"><a href=\"#使用Docker-Compose-工具编排微服务\" class=\"headerlink\" title=\"使用Docker-Compose 工具编排微服务\"></a>使用Docker-Compose 工具编排微服务</h4><ul>\n<li><p>安装docker-compose  <a href=\"https://docs.docker.com/compose/install/#install-compose\" target=\"_blank\" rel=\"noopener\">参考地址</a></p>\n<ul>\n<li><p>下载最新版本docker-compose</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -L <span class=\"string\">\"https://github.com/docker/compose/releases/download/1.22.0/docker-compose-<span class=\"variable\">$(uname -s)</span>-<span class=\"variable\">$(uname -m)</span>\"</span> -o /usr/<span class=\"built_in\">local</span>/bin/docker-compose</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>添加执行权限</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chmod +x /usr/<span class=\"built_in\">local</span>/bin/docker-compose</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>安装完成</p>\n\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><p>安装docker-compose命令补全工具（输入docker-compose后按Tab键提示）<br><a href=\"https://docs.docker.com/compose/completion/\" target=\"_blank\" rel=\"noopener\">参考地址</a><br>运行如下命令，重新连接终端即可生效</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo curl -L https://raw.githubusercontent.com/docker/compose/1.22.0/contrib/completion/bash/docker-compose -o /etc/bash_completion.d/docker-compose</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>编写docker-compose.yml文件：<br>目录结构：</p>\n\n</li>\n</ul>\n<p>docker-compose.yml 代码:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 表示该docker-compose.yml文件使用的是Version 2 file format</span></span><br><span class=\"line\">version: <span class=\"string\">'2'</span></span><br><span class=\"line\"><span class=\"comment\"># Version 2 file format 的固定写法，为project定义服务</span></span><br><span class=\"line\">services:</span><br><span class=\"line\"><span class=\"comment\"># 指定服务名称</span></span><br><span class=\"line\">eureka:</span><br><span class=\"line\">  <span class=\"comment\"># replace username/repo:tag with your name and image details</span></span><br><span class=\"line\">  <span class=\"comment\">#image: username/repo:tag</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># build构建镜像，Dockerfile文件相对地址</span></span><br><span class=\"line\">  build: .</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># 暴露端口</span></span><br><span class=\"line\">  ports:</span><br><span class=\"line\">  - <span class=\"string\">\"8761:8761\"</span></span><br><span class=\"line\">  expose:</span><br><span class=\"line\">  - 8761</span><br></pre></td></tr></table></figure>\n<p>Dockerfile文件代码：</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span> java:<span class=\"number\">8</span></span><br><span class=\"line\"><span class=\"keyword\">VOLUME</span><span class=\"bash\"> /data/container</span></span><br><span class=\"line\"><span class=\"bash\">ADD target/magic-eureka-center-0.0.1-SNAPSHOT.jar app.jar</span></span><br><span class=\"line\"><span class=\"bash\">RUN bash -c <span class=\"string\">'touch /app.jar'</span></span></span><br><span class=\"line\"><span class=\"bash\">EXPOSE 8761</span></span><br><span class=\"line\"><span class=\"bash\">ENTRYPOINT [<span class=\"string\">\"java\"</span>,<span class=\"string\">\"-Djava.security.egd=file:/dev/./urandom\"</span>,<span class=\"string\">\"-jar\"</span>,<span class=\"string\">\"/app.jar\"</span>]</span></span><br></pre></td></tr></table></figure>\n<p>运行构建:<code>docker-compose up</code>  </p>\n<p>后台运行构建: <code>docker-compose up -d</code> </p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>摘要：本次操作基于CentOS 7部署</p>\n</blockquote>\n<h3 id=\"安装Docker\"><a href=\"#安装Docker\" class=\"headerlink\" title=\"安装Docker\"></a>安装Docker</h3><h4 id=\"利用yum工具安装docker\"><a href=\"#利用yum工具安装docker\" class=\"headerlink\" title=\"利用yum工具安装docker\"></a>利用yum工具安装docker</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install docker</span><br></pre></td></tr></table></figure>","more":"<h4 id=\"启动docker\"><a href=\"#启动docker\" class=\"headerlink\" title=\"启动docker\"></a>启动docker</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start docker</span><br></pre></td></tr></table></figure>\n<p>输入上面命令后，报错如图:</p>\n\n<p>根据提示输入命令：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status docker.service</span><br></pre></td></tr></table></figure></p>\n<p>输出信息如下:</p>\n\n<p>输出指出：SELinux 不支持overlay2，所以要关闭SELinux，编辑文件 <code>/etc/sysconfig/docker</code> :</p>\n<p><code>vi /etc/sysconfig/docker</code></p>\n\n<p>重启docker： <code>systemctl restart docker</code></p>\n<h4 id=\"查看docker服务状态\"><a href=\"#查看docker服务状态\" class=\"headerlink\" title=\"查看docker服务状态\"></a>查看docker服务状态</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status docker</span><br></pre></td></tr></table></figure>\n\n<p>到此docker已经安装并成功启动。。。</p>\n<hr>\n<h4 id=\"将docker服务加入开启自启动\"><a href=\"#将docker服务加入开启自启动\" class=\"headerlink\" title=\"将docker服务加入开启自启动\"></a>将docker服务加入开启自启动</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl <span class=\"built_in\">enable</span> docker</span><br></pre></td></tr></table></figure>\n<h4 id=\"修改docker镜像地址为国内官方地址，重启docker是配置生效；\"><a href=\"#修改docker镜像地址为国内官方地址，重启docker是配置生效；\" class=\"headerlink\" title=\"修改docker镜像地址为国内官方地址，重启docker是配置生效；\"></a>修改docker镜像地址为国内官方地址，重启docker是配置生效；</h4><p><code>vim /etc/docker/daemon.json</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">&quot;registry-mirrors&quot;: [&quot;https://registry.docker-cn.com&quot;]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"修改docker镜像和容器的存储位置，Docker默认的镜像和容器存储位置在-var-lib-docker-：\"><a href=\"#修改docker镜像和容器的存储位置，Docker默认的镜像和容器存储位置在-var-lib-docker-：\" class=\"headerlink\" title=\"修改docker镜像和容器的存储位置，Docker默认的镜像和容器存储位置在/var/lib/docker ：\"></a>修改docker镜像和容器的存储位置，Docker默认的镜像和容器存储位置在/var/lib/docker ：</h4>\n<p>编辑文件docker.service，使用-g参数指定存储位置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /usr/lib/systemd/system/docker.service</span><br></pre></td></tr></table></figure>\n<p>ExecStart=/usr/bin/dockerd下面添加如下内容 :</p>\n<p>–graph  /data/tool/docker  #自定义存储目录</p>\n\n<p>reload配置文件：systemctl daemon-reload</p>\n<p>重启docker服务：systemctl restart docker</p>\n<h4 id=\"查看linux信息\"><a href=\"#查看linux信息\" class=\"headerlink\" title=\"查看linux信息\"></a>查看linux信息</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查看linux当前操作系统内核信息</span></span><br><span class=\"line\">uname -a </span><br><span class=\"line\"><span class=\"comment\"># Linux查看当前操作系统版本信息</span></span><br><span class=\"line\">cat /proc/version      </span><br><span class=\"line\"><span class=\"comment\"># Linux查看cpu相关信息，包括型号、主频、内核信息等</span></span><br><span class=\"line\">cat /proc/cpuinfo</span><br><span class=\"line\">```                   </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###  安装Rancher</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#### docker容器化部署：（[参考连接](https://rancher.com/docs/rancher/v1.6/zh/installing-rancher/installing-server/)）</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##### 启动 RANCHER SERVER - 单容器部署 - 使用外部数据库：</span></span><br><span class=\"line\"></span><br><span class=\"line\">```bash</span><br><span class=\"line\">docker run -d --restart=unless-stopped -p 8080:8080 rancher/server \\</span><br><span class=\"line\">      --db-host 192.168.0.14 \\</span><br><span class=\"line\">      --db-port 3306 \\</span><br><span class=\"line\">      --db-user root \\</span><br><span class=\"line\">      --db-password Cobbler1234! \\ </span><br><span class=\"line\">      --db-name cattle</span><br></pre></td></tr></table></figure>\n<p>cattle 是提前在192.168.0.14上建好的数据库；</p>\n<ol>\n<li>启动报错：exec: “docker-proxy”: executable file not found in $PATH 如图：\n</li>\n</ol>\n<p>查看下 docker-proxy 的位置： <code>cat /usr/lib/systemd/system/docker.service | grep prox</code></p>\n<p>创建一条软连接到 /usr/bin/ 下：<code>ln -s /usr/libexec/docker/docker-proxy-current  /usr/bin/docker-proxy</code></p>\n<ol start=\"2\">\n<li>启动报错2：Error response from daemon: shim error: docker-runc not installed on system，如图：\n</li>\n</ol>\n<p>查看下 docker-runc 的位置：<code>cat/usr/lib/systemd/system/docker.service | grep runc</code></p>\n<p>创建一条软连接到 /usr/bin/ 下： <code>ln -s /usr/libexec/docker/docker-runc-current /usr/bin/docker-runc</code></p>\n<h5 id=\"启动-RANCHER-SERVER-单容器部署-NON-HA\"><a href=\"#启动-RANCHER-SERVER-单容器部署-NON-HA\" class=\"headerlink\" title=\"启动 RANCHER SERVER - 单容器部署 (NON-HA)\"></a>启动 RANCHER SERVER - 单容器部署 (NON-HA)</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -d --restart=unless-stopped -p 8080:8080 rancher/server</span><br></pre></td></tr></table></figure>\n<p>启动报错：iptables failed: iptables –wait -t nat -A DOCKER -p tcp -d 0/0 –dport 8080 -j DNAT –to-destination 172.17.0.2:8080 ! -i docker0: iptables: No chain/target/match by that name.如图：<br></p>\n<p>处理报错：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 先看能不能ping通网络。若能依次执行以下命令:</span></span><br><span class=\"line\">pkill docker</span><br><span class=\"line\">iptables -t nat -F</span><br><span class=\"line\">ifconfig docker0 down</span><br><span class=\"line\">brctl delbr docker0</span><br><span class=\"line\">docker -d</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 重启docker服务</span></span><br><span class=\"line\">systmctl restart docker</span><br></pre></td></tr></table></figure></p>\n<p>重启后，查看docker 容器： <code>docker ps -a</code>  如图：<br></p>\n<p>启动成功，访问<a href=\"http://192.168.0.93:8080（部署服务器地址:端口）,如图：\" target=\"_blank\" rel=\"noopener\">http://192.168.0.93:8080（部署服务器地址:端口）,如图：</a><br></p>\n<h5 id=\"配置RANCHER\"><a href=\"#配置RANCHER\" class=\"headerlink\" title=\"配置RANCHER\"></a>配置RANCHER</h5><ul>\n<li>访问控制：\n</li>\n</ul>\n<p>目前选择本地身份认证（<a href=\"https://rancher.com/docs/rancher/v1.6/zh/configuration/access-control/#section-3\" target=\"_blank\" rel=\"noopener\">参考链接</a>）：<br>账户/密码：admin/123456</p>\n<ul>\n<li>添加主机\n</li>\n</ul>\n<h3 id=\"部署私有仓库-Docker-Registry\"><a href=\"#部署私有仓库-Docker-Registry\" class=\"headerlink\" title=\"部署私有仓库 Docker Registry\"></a>部署私有仓库 Docker Registry</h3><h4 id=\"安装运行-docker-registry\"><a href=\"#安装运行-docker-registry\" class=\"headerlink\" title=\"安装运行 docker-registry\"></a>安装运行 docker-registry</h4><ul>\n<li><strong><em>默认安装</em></strong></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -d -p 5000:5000 --restart=always --name registry registry</span><br></pre></td></tr></table></figure>\n<p>使用官方的 registry 镜像来启动私有仓库。默认情况下，仓库会被创建在<strong><em>容器</em></strong>的 /var/lib/registry 目录下;</p>\n<ul>\n<li><strong><em>指定仓库目录安装</em></strong></li>\n</ul>\n<p>通过 <code>-v</code> 参数来将镜像文件存放在本地的指定路径 :</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -d -p 5000:5000 -v /data/tool/docker/registry:/var/lib/registry registry</span><br></pre></td></tr></table></figure>\n<h4 id=\"查看系统当前的镜像：\"><a href=\"#查看系统当前的镜像：\" class=\"headerlink\" title=\"查看系统当前的镜像：\"></a>查看系统当前的镜像：</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"使用-docker-tag-来标记一个镜像，然后推送它到仓库。例如私有仓库地址为-127-0-0-1-5000\"><a href=\"#使用-docker-tag-来标记一个镜像，然后推送它到仓库。例如私有仓库地址为-127-0-0-1-5000\" class=\"headerlink\" title=\"使用 docker tag 来标记一个镜像，然后推送它到仓库。例如私有仓库地址为 127.0.0.1:5000\"></a>使用 <code>docker tag</code> 来标记一个镜像，然后推送它到仓库。例如私有仓库地址为 <code>127.0.0.1:5000</code></h4><p>格式为 <code>docker tag IMAGE[:TAG] [REGISTRY_HOST[:REGISTRY_PORT]/]REPOSITORY[:TAG]</code>  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker tag a0b9e05b2a03  127.0.0.1:5000/rancher_server:version1.0</span><br></pre></td></tr></table></figure>\n<p>如上图，多了一个rancher/server 镜像 tag 为 version1.0</p>\n<p>上传到私有仓库：<code>docker push 127.0.0.1:5000/rancher_server:version1.0</code></p>\n<h4 id=\"用-curl-查看仓库中的镜像-：curl-127-0-0-1-5000-v2-catalog\"><a href=\"#用-curl-查看仓库中的镜像-：curl-127-0-0-1-5000-v2-catalog\" class=\"headerlink\" title=\"用 curl 查看仓库中的镜像 ：curl 127.0.0.1:5000/v2/_catalog\"></a>用 <code>curl</code> 查看仓库中的镜像 ：<code>curl 127.0.0.1:5000/v2/_catalog</code></h4>\n<p>直接在浏览器访问查看：<br></p>\n<hr>\n<h3 id=\"【以下是基于本地win10系统安装docker后构建docker镜像】\"><a href=\"#【以下是基于本地win10系统安装docker后构建docker镜像】\" class=\"headerlink\" title=\"【以下是基于本地win10系统安装docker后构建docker镜像】\"></a>【以下是基于本地win10系统安装docker后构建docker镜像】</h3><p>备注：下文中镜像仓库ip地址修改为 192.168.0.94</p>\n<h4 id=\"使用Dockerfile文件构建镜像\"><a href=\"#使用Dockerfile文件构建镜像\" class=\"headerlink\" title=\"使用Dockerfile文件构建镜像\"></a>使用Dockerfile文件构建镜像</h4><ul>\n<li>编写Dockerfile文件</li>\n</ul>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span> java:<span class=\"number\">8</span></span><br><span class=\"line\"><span class=\"keyword\">VOLUME</span><span class=\"bash\"> /data/container</span></span><br><span class=\"line\"><span class=\"bash\">ADD magic-eureka-center-0.0.1-SNAPSHOT.jar app.jar</span></span><br><span class=\"line\"><span class=\"bash\">RUN bash -c <span class=\"string\">'touch /app.jar'</span></span></span><br><span class=\"line\"><span class=\"bash\">EXPOSE 8761</span></span><br><span class=\"line\"><span class=\"bash\">ENTRYPOINT [<span class=\"string\">\"java\"</span>,<span class=\"string\">\"-Djava.security.egd=file:/dev/./urandom\"</span>,<span class=\"string\">\"-jar\"</span>,<span class=\"string\">\"/app.jar\"</span>]</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>docker build构建镜像<br>格式：docker build -t  仓库名称/镜像名称[:标签]   Dockerfile的相对位置<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t magic/eureka:0.0.1 .</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n\n<ul>\n<li>查看镜像</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"使用maven插件构建镜像\"><a href=\"#使用maven插件构建镜像\" class=\"headerlink\" title=\"使用maven插件构建镜像\"></a>使用maven插件构建镜像</h4><p>在pom.xml文件增加插件：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;plugin&gt;</span><br><span class=\"line\">    &lt;groupId&gt;com.spotify&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;docker-maven-plugin&lt;/artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;0.4.13&lt;/version&gt;</span><br><span class=\"line\">    &lt;configuration&gt;</span><br><span class=\"line\">        &lt;imageName&gt;$&#123;project.artifactId&#125;:$&#123;core.version&#125;&lt;/imageName&gt;</span><br><span class=\"line\">        &lt;dockerDirectory&gt;$&#123;project.basedir&#125;/src/main/docker&lt;/dockerDirectory&gt;</span><br><span class=\"line\">        &lt;resources&gt;</span><br><span class=\"line\">            &lt;resource&gt;</span><br><span class=\"line\">                &lt;targetPath&gt;/&lt;/targetPath&gt;</span><br><span class=\"line\">                &lt;directory&gt;$&#123;project.build.directory&#125;&lt;/directory&gt;</span><br><span class=\"line\">                &lt;include&gt;$&#123;project.build.finalName&#125;.jar&lt;/include&gt;</span><br><span class=\"line\">            &lt;/resource&gt;</span><br><span class=\"line\">        &lt;/resources&gt;</span><br><span class=\"line\">    &lt;/configuration&gt;</span><br><span class=\"line\">&lt;/plugin&gt;</span><br></pre></td></tr></table></figure>\n<p>在/src/main/docker目录下新建Dockerfile</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span> java:<span class=\"number\">8</span></span><br><span class=\"line\"><span class=\"keyword\">VOLUME</span><span class=\"bash\"> /data/container</span></span><br><span class=\"line\"><span class=\"bash\">ADD magic-eureka-center-0.0.1-SNAPSHOT.jar app.jar</span></span><br><span class=\"line\"><span class=\"bash\">RUN bash -c <span class=\"string\">'touch /app.jar'</span></span></span><br><span class=\"line\"><span class=\"bash\">EXPOSE 8761</span></span><br><span class=\"line\"><span class=\"bash\">ENTRYPOINT [<span class=\"string\">\"java\"</span>,<span class=\"string\">\"-Djava.security.egd=file:/dev/./urandom\"</span>,<span class=\"string\">\"-jar\"</span>,<span class=\"string\">\"/app.jar\"</span>]</span></span><br></pre></td></tr></table></figure>\n<p>子模块根目录下 magic-eureka-center/  使用命令构建，运行命令如下：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn clean package docker:build</span><br></pre></td></tr></table></figure>\n<p>或者 通过IDEA 配置：<br><br>在控制台Console可以看到构建成功后的输出信息;<br>使用 <code>docker images</code> 查看新构建的镜像;</p>\n<h4 id=\"上传镜像私有Docker-Registry\"><a href=\"#上传镜像私有Docker-Registry\" class=\"headerlink\" title=\"上传镜像私有Docker Registry\"></a>上传镜像私有Docker Registry</h4><ul>\n<li><p>为本地镜像打标签</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker tag magic/eureka:0.0.1 192.168.0.94:5000/magic/eureka:0.0.1</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>push到仓库</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker push 192.168.0.94:5000/magic/eureka:0.0.1</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>有点不顺利~~~，报错如下：</p>\n\n<p>错误信息：Get <a href=\"https://192.168.0.94:5000/v2/\" target=\"_blank\" rel=\"noopener\">https://192.168.0.94:5000/v2/</a>: http: server gave HTTP response to HTTPS client</p>\n<p>查询错误原因：<a href=\"https://www.cnblogs.com/hobinly/p/6110624.html\" target=\"_blank\" rel=\"noopener\">参考博客</a></p>\n\n<p>根据以上信息，我修改了本地【win10】docker的daemon.json文件 ，再重启服务： </p>\n\n<p>重新push就可以了，如图：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker push 192.168.0.94:5000/magic/eureka:0.0.1</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"从私有docker仓库pull镜像-启动服务\"><a href=\"#从私有docker仓库pull镜像-启动服务\" class=\"headerlink\" title=\"从私有docker仓库pull镜像,启动服务\"></a>从私有docker仓库pull镜像,启动服务</h4><p>在192.168.0.94机器上从私有docker镜像仓库获取之前上传的镜像，再运行</p>\n<ul>\n<li>pull镜像<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull 192.168.0.94:5000/magic/eureka:0.0.1</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n\n<p>地址上加http协议报错：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull http://192.168.0.94:5000/magic/eureka:0.0.1 <span class=\"comment\">#错误</span></span><br></pre></td></tr></table></figure></p>\n\n<ul>\n<li>运行镜像</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -d -p 8761:8761 192.168.0.94:5000/magic/eureka:0.0.1</span><br></pre></td></tr></table></figure>\n\n<p>查看运行中的容器：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps</span><br></pre></td></tr></table></figure></p>\n\n<h4 id=\"使用Docker-Compose-工具编排微服务\"><a href=\"#使用Docker-Compose-工具编排微服务\" class=\"headerlink\" title=\"使用Docker-Compose 工具编排微服务\"></a>使用Docker-Compose 工具编排微服务</h4><ul>\n<li><p>安装docker-compose  <a href=\"https://docs.docker.com/compose/install/#install-compose\" target=\"_blank\" rel=\"noopener\">参考地址</a></p>\n<ul>\n<li><p>下载最新版本docker-compose</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -L <span class=\"string\">\"https://github.com/docker/compose/releases/download/1.22.0/docker-compose-<span class=\"variable\">$(uname -s)</span>-<span class=\"variable\">$(uname -m)</span>\"</span> -o /usr/<span class=\"built_in\">local</span>/bin/docker-compose</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>添加执行权限</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chmod +x /usr/<span class=\"built_in\">local</span>/bin/docker-compose</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>安装完成</p>\n\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><p>安装docker-compose命令补全工具（输入docker-compose后按Tab键提示）<br><a href=\"https://docs.docker.com/compose/completion/\" target=\"_blank\" rel=\"noopener\">参考地址</a><br>运行如下命令，重新连接终端即可生效</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo curl -L https://raw.githubusercontent.com/docker/compose/1.22.0/contrib/completion/bash/docker-compose -o /etc/bash_completion.d/docker-compose</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>编写docker-compose.yml文件：<br>目录结构：</p>\n\n</li>\n</ul>\n<p>docker-compose.yml 代码:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 表示该docker-compose.yml文件使用的是Version 2 file format</span></span><br><span class=\"line\">version: <span class=\"string\">'2'</span></span><br><span class=\"line\"><span class=\"comment\"># Version 2 file format 的固定写法，为project定义服务</span></span><br><span class=\"line\">services:</span><br><span class=\"line\"><span class=\"comment\"># 指定服务名称</span></span><br><span class=\"line\">eureka:</span><br><span class=\"line\">  <span class=\"comment\"># replace username/repo:tag with your name and image details</span></span><br><span class=\"line\">  <span class=\"comment\">#image: username/repo:tag</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># build构建镜像，Dockerfile文件相对地址</span></span><br><span class=\"line\">  build: .</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># 暴露端口</span></span><br><span class=\"line\">  ports:</span><br><span class=\"line\">  - <span class=\"string\">\"8761:8761\"</span></span><br><span class=\"line\">  expose:</span><br><span class=\"line\">  - 8761</span><br></pre></td></tr></table></figure>\n<p>Dockerfile文件代码：</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span> java:<span class=\"number\">8</span></span><br><span class=\"line\"><span class=\"keyword\">VOLUME</span><span class=\"bash\"> /data/container</span></span><br><span class=\"line\"><span class=\"bash\">ADD target/magic-eureka-center-0.0.1-SNAPSHOT.jar app.jar</span></span><br><span class=\"line\"><span class=\"bash\">RUN bash -c <span class=\"string\">'touch /app.jar'</span></span></span><br><span class=\"line\"><span class=\"bash\">EXPOSE 8761</span></span><br><span class=\"line\"><span class=\"bash\">ENTRYPOINT [<span class=\"string\">\"java\"</span>,<span class=\"string\">\"-Djava.security.egd=file:/dev/./urandom\"</span>,<span class=\"string\">\"-jar\"</span>,<span class=\"string\">\"/app.jar\"</span>]</span></span><br></pre></td></tr></table></figure>\n<p>运行构建:<code>docker-compose up</code>  </p>\n<p>后台运行构建: <code>docker-compose up -d</code> </p>"},{"title":"本地Docker镜像仓库Harbor搭建","date":"2018-10-11T07:40:50.000Z","toc":true,"declare":true,"_content":">摘要：Harbor是一个用于存储和分发Docker镜像的企业级Registry服务器，通过添加一些企业必需的功能特性\n\n### 关于Harbor\n\nHarbor是一个用于存储和分发Docker镜像的企业级Registry服务器，通过添加一些企业必需的功能特性，例如安全、标识和管理等，扩展了开源Docker Distribution。作为一个企业级私有Registry服务器，Harbor提供了更好的性能和安全。提升用户使用Registry构建和运行环境传输镜像的效率。Harbor支持安装在多个Registry节点的镜像资源复制，镜像全部保存在私有Registry中， 确保数据和知识产权在公司内部网络中管控。另外，Harbor也提供了高级的安全特性，诸如用户管理，访问控制和活动审计等 ；\n\n<!-- more -->\n\n### 安装Harbor\n\n安装环境：CentOS Linux release 7.2.1511 (Core )\n\n#### 安装Docker\n\n#### 安装Docker-Compose\n- 二进制安装\n- pip安装\n\n#### 安装Harbor\n\n##### 在线安装\n\n###### 下载文件：\n```\nwget -P /usr/local/src/     https://github.com/vmware/harbor/releases/download/v1.2.0/harbor-online-installer-v1.2.0.tgz\n```\n\n######  解压文件：\n```\ntar zxf harbor-online-installer-v1.2.0.tgz  -C /usr/local/\n```\n\n###### 修改配置文件：\n```\ncd /usr/local/harbor/\nvim harbor.cfg\n# 域名设置\nhostname = reg.hancloud.cn\n# 邮箱设置\nemail_server = smtp.hancloud.cn\nemail_server_port = 25\nemail_username = aikaiqiang@hancloud.cn\nemail_password = @akq930210\nemail_from = aikaiqiang <aikaiqiang@hancloud.cn>\nemail_ssl = false\n# 禁止用户注册\nself_registration = off\n\n# 设置只有管理员可以创建项目\nproject_creation_restriction = adminonly\n```\n\n###### 执行安装脚本：\n```\n./install.sh\n# 执行过程\n[Step 0]: checking installation environment ...\n\nNote: docker version: 1.13.1\n\nNote: docker-compose version: 1.22.0\n      \n[Step 1]: preparing environment ...\nGenerated and saved secret to file: /data/secretkey\nGenerated configuration file: ./common/config/nginx/nginx.conf\nGenerated configuration file: ./common/config/adminserver/env\nGenerated configuration file: ./common/config/ui/env\nGenerated configuration file: ./common/config/registry/config.yml\nGenerated configuration file: ./common/config/db/env\nGenerated configuration file: ./common/config/jobservice/env\nGenerated configuration file: ./common/config/jobservice/app.conf\nGenerated configuration file: ./common/config/ui/app.conf\nGenerated certificate, key file: ./common/config/ui/private_key.pem, cert file: ./common/config/registry/root.crt\nThe configuration files are ready, please use docker-compose to start the service.\n  \n[Step 2]: checking existing instance of Harbor ...\n    \n[Step 3]: starting Harbor ...\nCreating network \"harbor_harbor\" with the default driver\nPulling log (vmware/harbor-log:v1.2.0)...\nTrying to pull repository docker.io/vmware/harbor-log ... \nv1.2.0: Pulling from docker.io/vmware/harbor-log\n93b3dcee11d6: Pull complete\n07d028a1dbdd: Pull complete\n208723cd598a: Pull complete\nb876b05989fc: Pull complete\n12f0e0ef448a: Pull complete\nDigest: sha256:608e10b7aaac07e10a4cd639d8848aef96daa7dd5c7ebaaf6a7ecd47f903e1f8\nStatus: Downloaded newer image for docker.io/vmware/harbor-log:v1.2.0\nPulling registry (vmware/registry:2.6.2-photon)...\nTrying to pull repository docker.io/vmware/registry ... \n2.6.2-photon: Pulling from docker.io/vmware/registry\n4b40d82f242f: Pull complete\nf01e70edcc2b: Pull complete\n798027835c5f: Pull complete\n8652f3177ad3: Pull complete\n4753e541e7b5: Pull complete\n058f3d3811f4: Pull complete\nc6edb6ed847b: Pull complete\nDigest: sha256:d7cdde865c1fc389900f1929d9c4865fd1b598ca9be3f27bbe900339a10a5788\nStatus: Downloaded newer image for docker.io/vmware/registry:2.6.2-photon\nPulling mysql (vmware/harbor-db:v1.2.0)...\nTrying to pull repository docker.io/vmware/harbor-db ... \nv1.2.0: Pulling from docker.io/vmware/harbor-db\ndf559435c037: Pull complete\na6310a57af5d: Pull complete\nd13d90890144: Pull complete\nb694d8967a6c: Pull complete\na34f6cef56a6: Pull complete\n3519eec83af5: Pull complete\n34bae610e56c: Pull complete\n86a867bebd89: Pull complete\n3db2d0ac366e: Pull complete\nc0d307ee295f: Pull complete\nc5b1b404c5ee: Pull complete\n14f4a4328366: Pull complete\nc7fa77b46ec4: Pull complete\n0cbe2b5669b8: Pull complete\nDigest: sha256:c10b3555beb6d1c851ae49a4e90ef4296a1ad42bcd1a58ae97e316b034515b6e\nStatus: Downloaded newer image for docker.io/vmware/harbor-db:v1.2.0\nPulling adminserver (vmware/harbor-adminserver:v1.2.0)...\nTrying to pull repository docker.io/vmware/harbor-adminserver ... \nv1.2.0: Pulling from docker.io/vmware/harbor-adminserver\n93b3dcee11d6: Already exists\n6ab21236e58b: Pull complete\nf70b0efff900: Pull complete\nc5d206b5e184: Pull complete\nDigest: sha256:aba66ec90fc12fe0814cecc9f647f5d17b41395199821cc7af69db9c0fbe446c\nStatus: Downloaded newer image for docker.io/vmware/harbor-adminserver:v1.2.0\nPulling ui (vmware/harbor-ui:v1.2.0)...\nTrying to pull repository docker.io/vmware/harbor-ui ... \nv1.2.0: Pulling from docker.io/vmware/harbor-ui\n93b3dcee11d6: Already exists\n6ab21236e58b: Already exists\n7753f4b55df6: Pull complete\na647b33bdf74: Pull complete\neb30db926101: Pull complete\n204d77847826: Pull complete\n4910a0b56c59: Pull complete\ne880a4b0031f: Pull complete\nDigest: sha256:b198d8f2f59515d286bdcf06c7f99c370eb4475e2547495c3e1db8761940646b\nStatus: Downloaded newer image for docker.io/vmware/harbor-ui:v1.2.0\nPulling jobservice (vmware/harbor-jobservice:v1.2.0)...\nTrying to pull repository docker.io/vmware/harbor-jobservice ... \nv1.2.0: Pulling from docker.io/vmware/harbor-jobservice\n93b3dcee11d6: Already exists\n6ab21236e58b: Already exists\n64bd0172d071: Pull complete\nb4f5382f226f: Pull complete\nDigest: sha256:0692648176c1c87379025b0519036b9f3f1a0eceb2646f17dd40eb143c898d5c\nStatus: Downloaded newer image for docker.io/vmware/harbor-jobservice:v1.2.0\nPulling proxy (vmware/nginx-photon:1.11.13)...\nTrying to pull repository docker.io/vmware/nginx-photon ... \n1.11.13: Pulling from docker.io/vmware/nginx-photon\n4b40d82f242f: Already exists\n2dcfe2cb4f13: Pull complete\nDigest: sha256:5a32f122b86f2d7794651f1a67c5e9ce1dce79b0e0c1bc25d559405312c156db\nStatus: Downloaded newer image for docker.io/vmware/nginx-photon:1.11.13\nCreating harbor-log ... done\nCreating registry           ... done\nCreating harbor-adminserver ... done\nCreating harbor-db          ... done\nCreating harbor-ui          ... done\nCreating harbor-jobservice  ... done\nCreating nginx              ... done\n\n✔ ----Harbor has been installed and started successfully.----\n\nNow you should be able to visit the admin portal at http://reg.hancloud.cn. \nFor more details, please visit https://github.com/vmware/harbor \n\n```\n\n执行成功！\n```\n# 查看本地镜像文件，会多处如图几个镜像\ndocker images\n```\n{% asset_img harbor_images.png  %}\n\nHarbor 管理是通过docker-compose来完成的，Harbor本身有多个服务进程，都放在docker容器之中运行，我们可以通过docker ps或者docker-compose  ps命令查看 ;\n\n{% asset_img harbor-docker-compose.png  %}\n\n    \n###### Harbor的启动和停止 ：\n```bash\n# 启动Harbor\ndocker-compose start\n# 停止Harbor\ndocker-comose stop\n# 重启Harbor\ndocker-compose restart\n```\n\n###### 访问测试:\n在浏览器输入 reg.hancloud.cn，harbor.cfg文件配置的域名为reg.hancloud.cn，默认账号/密码：admin/Harbor12345\n\n{% asset_img harbor-index.png %}\n\n##### 上传下载镜像\n\n###### 指定仓库地址\n\n```bash\nvim /etc/docker/daemon.json\n\n{ \"insecure-registries\":[\"reg.hancloud.cn\"] }\n```\n\n重启docker：`systemctl  restart docker` \n\n###### 创建Dockerfile\n\n```bash\nvim Dockerfile \nFROM centos:centos7.1.1503\nENV TZ \"Asia/Shanghai\"\n```\n\n###### 创建镜像\n\n```bash\n# docker build -t reg.hanclound.cn/library/centos7.1:V0.0.1 .\n```\n\n###### 把镜像push到Harbor\n\n```bash\n# docker login reg.hanclound.cn\n# docker push reg.hanclound.cn/library/centos7.1:V0.0.1\n```\n\n#### 配置TLS证书\n\n#####  修改配置文件harbor.cfg \n\n```bash\nhostname = 域名\nui_url_protocol = https\nssl_cert = /etc/certs/ca.crt\nssl_cert_key = /etc/certs/ca.key\n```\n\n##### 创建自签名证书key文件\n\n```bash\nmkdir /etc/certs\nopenssl genrsa -out /etc/certs/ca.key 2048 \n```\n\n##### 创建自签名证书crt文件\n注意：命令中`/CN=reg.hanclound.cn `字段中`reg.hanclound.cn `修改为自己配置的仓库域名\n```bash\nopenssl req -x509 -new -nodes -key /etc/certs/ca.key -subj \"/CN=rgs.unixfbi.com\" -days 5000 -out /etc/certs/ca.crt\n```\n\n##### 安装Harbor\n`./install.sh` \n\n##### 客户端配置\n客户端需要创建证书文件存放的位置，并且把服务端创建的证书拷贝到该目录下，然后重启客户端docker。我们这里创建目录为：`/etc/docker/certs.d/reg.hanclound.cn ;\n\n把服务端crt证书文件拷贝到客户端，例如我这的客户端为：192.168.0.94; \n`# scp /etc/certs/ca.crt root@192.168.0.94:/etc/docker/certs.d/reg.hanclound.cn/`\n重启客户端docker \n`systemctl restart docker` \n\n\n参考文案：\n\n博客：[运维特工](https://www.cnblogs.com/pangguoping/p/7650014.html)\n\n","source":"_posts/Docker-harbor.md","raw":"---\ntitle: 本地Docker镜像仓库Harbor搭建\ndate: 2018-10-11 15:40:50\ntags:\n   - Docker\n   - Harbor\n   - Docker Registry\ncategories:\n   - Docker\ntoc: true\ndeclare: true\n---\n>摘要：Harbor是一个用于存储和分发Docker镜像的企业级Registry服务器，通过添加一些企业必需的功能特性\n\n### 关于Harbor\n\nHarbor是一个用于存储和分发Docker镜像的企业级Registry服务器，通过添加一些企业必需的功能特性，例如安全、标识和管理等，扩展了开源Docker Distribution。作为一个企业级私有Registry服务器，Harbor提供了更好的性能和安全。提升用户使用Registry构建和运行环境传输镜像的效率。Harbor支持安装在多个Registry节点的镜像资源复制，镜像全部保存在私有Registry中， 确保数据和知识产权在公司内部网络中管控。另外，Harbor也提供了高级的安全特性，诸如用户管理，访问控制和活动审计等 ；\n\n<!-- more -->\n\n### 安装Harbor\n\n安装环境：CentOS Linux release 7.2.1511 (Core )\n\n#### 安装Docker\n\n#### 安装Docker-Compose\n- 二进制安装\n- pip安装\n\n#### 安装Harbor\n\n##### 在线安装\n\n###### 下载文件：\n```\nwget -P /usr/local/src/     https://github.com/vmware/harbor/releases/download/v1.2.0/harbor-online-installer-v1.2.0.tgz\n```\n\n######  解压文件：\n```\ntar zxf harbor-online-installer-v1.2.0.tgz  -C /usr/local/\n```\n\n###### 修改配置文件：\n```\ncd /usr/local/harbor/\nvim harbor.cfg\n# 域名设置\nhostname = reg.hancloud.cn\n# 邮箱设置\nemail_server = smtp.hancloud.cn\nemail_server_port = 25\nemail_username = aikaiqiang@hancloud.cn\nemail_password = @akq930210\nemail_from = aikaiqiang <aikaiqiang@hancloud.cn>\nemail_ssl = false\n# 禁止用户注册\nself_registration = off\n\n# 设置只有管理员可以创建项目\nproject_creation_restriction = adminonly\n```\n\n###### 执行安装脚本：\n```\n./install.sh\n# 执行过程\n[Step 0]: checking installation environment ...\n\nNote: docker version: 1.13.1\n\nNote: docker-compose version: 1.22.0\n      \n[Step 1]: preparing environment ...\nGenerated and saved secret to file: /data/secretkey\nGenerated configuration file: ./common/config/nginx/nginx.conf\nGenerated configuration file: ./common/config/adminserver/env\nGenerated configuration file: ./common/config/ui/env\nGenerated configuration file: ./common/config/registry/config.yml\nGenerated configuration file: ./common/config/db/env\nGenerated configuration file: ./common/config/jobservice/env\nGenerated configuration file: ./common/config/jobservice/app.conf\nGenerated configuration file: ./common/config/ui/app.conf\nGenerated certificate, key file: ./common/config/ui/private_key.pem, cert file: ./common/config/registry/root.crt\nThe configuration files are ready, please use docker-compose to start the service.\n  \n[Step 2]: checking existing instance of Harbor ...\n    \n[Step 3]: starting Harbor ...\nCreating network \"harbor_harbor\" with the default driver\nPulling log (vmware/harbor-log:v1.2.0)...\nTrying to pull repository docker.io/vmware/harbor-log ... \nv1.2.0: Pulling from docker.io/vmware/harbor-log\n93b3dcee11d6: Pull complete\n07d028a1dbdd: Pull complete\n208723cd598a: Pull complete\nb876b05989fc: Pull complete\n12f0e0ef448a: Pull complete\nDigest: sha256:608e10b7aaac07e10a4cd639d8848aef96daa7dd5c7ebaaf6a7ecd47f903e1f8\nStatus: Downloaded newer image for docker.io/vmware/harbor-log:v1.2.0\nPulling registry (vmware/registry:2.6.2-photon)...\nTrying to pull repository docker.io/vmware/registry ... \n2.6.2-photon: Pulling from docker.io/vmware/registry\n4b40d82f242f: Pull complete\nf01e70edcc2b: Pull complete\n798027835c5f: Pull complete\n8652f3177ad3: Pull complete\n4753e541e7b5: Pull complete\n058f3d3811f4: Pull complete\nc6edb6ed847b: Pull complete\nDigest: sha256:d7cdde865c1fc389900f1929d9c4865fd1b598ca9be3f27bbe900339a10a5788\nStatus: Downloaded newer image for docker.io/vmware/registry:2.6.2-photon\nPulling mysql (vmware/harbor-db:v1.2.0)...\nTrying to pull repository docker.io/vmware/harbor-db ... \nv1.2.0: Pulling from docker.io/vmware/harbor-db\ndf559435c037: Pull complete\na6310a57af5d: Pull complete\nd13d90890144: Pull complete\nb694d8967a6c: Pull complete\na34f6cef56a6: Pull complete\n3519eec83af5: Pull complete\n34bae610e56c: Pull complete\n86a867bebd89: Pull complete\n3db2d0ac366e: Pull complete\nc0d307ee295f: Pull complete\nc5b1b404c5ee: Pull complete\n14f4a4328366: Pull complete\nc7fa77b46ec4: Pull complete\n0cbe2b5669b8: Pull complete\nDigest: sha256:c10b3555beb6d1c851ae49a4e90ef4296a1ad42bcd1a58ae97e316b034515b6e\nStatus: Downloaded newer image for docker.io/vmware/harbor-db:v1.2.0\nPulling adminserver (vmware/harbor-adminserver:v1.2.0)...\nTrying to pull repository docker.io/vmware/harbor-adminserver ... \nv1.2.0: Pulling from docker.io/vmware/harbor-adminserver\n93b3dcee11d6: Already exists\n6ab21236e58b: Pull complete\nf70b0efff900: Pull complete\nc5d206b5e184: Pull complete\nDigest: sha256:aba66ec90fc12fe0814cecc9f647f5d17b41395199821cc7af69db9c0fbe446c\nStatus: Downloaded newer image for docker.io/vmware/harbor-adminserver:v1.2.0\nPulling ui (vmware/harbor-ui:v1.2.0)...\nTrying to pull repository docker.io/vmware/harbor-ui ... \nv1.2.0: Pulling from docker.io/vmware/harbor-ui\n93b3dcee11d6: Already exists\n6ab21236e58b: Already exists\n7753f4b55df6: Pull complete\na647b33bdf74: Pull complete\neb30db926101: Pull complete\n204d77847826: Pull complete\n4910a0b56c59: Pull complete\ne880a4b0031f: Pull complete\nDigest: sha256:b198d8f2f59515d286bdcf06c7f99c370eb4475e2547495c3e1db8761940646b\nStatus: Downloaded newer image for docker.io/vmware/harbor-ui:v1.2.0\nPulling jobservice (vmware/harbor-jobservice:v1.2.0)...\nTrying to pull repository docker.io/vmware/harbor-jobservice ... \nv1.2.0: Pulling from docker.io/vmware/harbor-jobservice\n93b3dcee11d6: Already exists\n6ab21236e58b: Already exists\n64bd0172d071: Pull complete\nb4f5382f226f: Pull complete\nDigest: sha256:0692648176c1c87379025b0519036b9f3f1a0eceb2646f17dd40eb143c898d5c\nStatus: Downloaded newer image for docker.io/vmware/harbor-jobservice:v1.2.0\nPulling proxy (vmware/nginx-photon:1.11.13)...\nTrying to pull repository docker.io/vmware/nginx-photon ... \n1.11.13: Pulling from docker.io/vmware/nginx-photon\n4b40d82f242f: Already exists\n2dcfe2cb4f13: Pull complete\nDigest: sha256:5a32f122b86f2d7794651f1a67c5e9ce1dce79b0e0c1bc25d559405312c156db\nStatus: Downloaded newer image for docker.io/vmware/nginx-photon:1.11.13\nCreating harbor-log ... done\nCreating registry           ... done\nCreating harbor-adminserver ... done\nCreating harbor-db          ... done\nCreating harbor-ui          ... done\nCreating harbor-jobservice  ... done\nCreating nginx              ... done\n\n✔ ----Harbor has been installed and started successfully.----\n\nNow you should be able to visit the admin portal at http://reg.hancloud.cn. \nFor more details, please visit https://github.com/vmware/harbor \n\n```\n\n执行成功！\n```\n# 查看本地镜像文件，会多处如图几个镜像\ndocker images\n```\n{% asset_img harbor_images.png  %}\n\nHarbor 管理是通过docker-compose来完成的，Harbor本身有多个服务进程，都放在docker容器之中运行，我们可以通过docker ps或者docker-compose  ps命令查看 ;\n\n{% asset_img harbor-docker-compose.png  %}\n\n    \n###### Harbor的启动和停止 ：\n```bash\n# 启动Harbor\ndocker-compose start\n# 停止Harbor\ndocker-comose stop\n# 重启Harbor\ndocker-compose restart\n```\n\n###### 访问测试:\n在浏览器输入 reg.hancloud.cn，harbor.cfg文件配置的域名为reg.hancloud.cn，默认账号/密码：admin/Harbor12345\n\n{% asset_img harbor-index.png %}\n\n##### 上传下载镜像\n\n###### 指定仓库地址\n\n```bash\nvim /etc/docker/daemon.json\n\n{ \"insecure-registries\":[\"reg.hancloud.cn\"] }\n```\n\n重启docker：`systemctl  restart docker` \n\n###### 创建Dockerfile\n\n```bash\nvim Dockerfile \nFROM centos:centos7.1.1503\nENV TZ \"Asia/Shanghai\"\n```\n\n###### 创建镜像\n\n```bash\n# docker build -t reg.hanclound.cn/library/centos7.1:V0.0.1 .\n```\n\n###### 把镜像push到Harbor\n\n```bash\n# docker login reg.hanclound.cn\n# docker push reg.hanclound.cn/library/centos7.1:V0.0.1\n```\n\n#### 配置TLS证书\n\n#####  修改配置文件harbor.cfg \n\n```bash\nhostname = 域名\nui_url_protocol = https\nssl_cert = /etc/certs/ca.crt\nssl_cert_key = /etc/certs/ca.key\n```\n\n##### 创建自签名证书key文件\n\n```bash\nmkdir /etc/certs\nopenssl genrsa -out /etc/certs/ca.key 2048 \n```\n\n##### 创建自签名证书crt文件\n注意：命令中`/CN=reg.hanclound.cn `字段中`reg.hanclound.cn `修改为自己配置的仓库域名\n```bash\nopenssl req -x509 -new -nodes -key /etc/certs/ca.key -subj \"/CN=rgs.unixfbi.com\" -days 5000 -out /etc/certs/ca.crt\n```\n\n##### 安装Harbor\n`./install.sh` \n\n##### 客户端配置\n客户端需要创建证书文件存放的位置，并且把服务端创建的证书拷贝到该目录下，然后重启客户端docker。我们这里创建目录为：`/etc/docker/certs.d/reg.hanclound.cn ;\n\n把服务端crt证书文件拷贝到客户端，例如我这的客户端为：192.168.0.94; \n`# scp /etc/certs/ca.crt root@192.168.0.94:/etc/docker/certs.d/reg.hanclound.cn/`\n重启客户端docker \n`systemctl restart docker` \n\n\n参考文案：\n\n博客：[运维特工](https://www.cnblogs.com/pangguoping/p/7650014.html)\n\n","slug":"Docker-harbor","published":1,"updated":"2019-02-20T06:48:23.428Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck2vmvra0001fmgu5c1qap0tb","content":"<blockquote>\n<p>摘要：Harbor是一个用于存储和分发Docker镜像的企业级Registry服务器，通过添加一些企业必需的功能特性</p>\n</blockquote>\n<h3 id=\"关于Harbor\"><a href=\"#关于Harbor\" class=\"headerlink\" title=\"关于Harbor\"></a>关于Harbor</h3><p>Harbor是一个用于存储和分发Docker镜像的企业级Registry服务器，通过添加一些企业必需的功能特性，例如安全、标识和管理等，扩展了开源Docker Distribution。作为一个企业级私有Registry服务器，Harbor提供了更好的性能和安全。提升用户使用Registry构建和运行环境传输镜像的效率。Harbor支持安装在多个Registry节点的镜像资源复制，镜像全部保存在私有Registry中， 确保数据和知识产权在公司内部网络中管控。另外，Harbor也提供了高级的安全特性，诸如用户管理，访问控制和活动审计等 ；</p>\n<a id=\"more\"></a>\n<h3 id=\"安装Harbor\"><a href=\"#安装Harbor\" class=\"headerlink\" title=\"安装Harbor\"></a>安装Harbor</h3><p>安装环境：CentOS Linux release 7.2.1511 (Core )</p>\n<h4 id=\"安装Docker\"><a href=\"#安装Docker\" class=\"headerlink\" title=\"安装Docker\"></a>安装Docker</h4><h4 id=\"安装Docker-Compose\"><a href=\"#安装Docker-Compose\" class=\"headerlink\" title=\"安装Docker-Compose\"></a>安装Docker-Compose</h4><ul>\n<li>二进制安装</li>\n<li>pip安装</li>\n</ul>\n<h4 id=\"安装Harbor-1\"><a href=\"#安装Harbor-1\" class=\"headerlink\" title=\"安装Harbor\"></a>安装Harbor</h4><h5 id=\"在线安装\"><a href=\"#在线安装\" class=\"headerlink\" title=\"在线安装\"></a>在线安装</h5><h6 id=\"下载文件：\"><a href=\"#下载文件：\" class=\"headerlink\" title=\"下载文件：\"></a>下载文件：</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget -P /usr/local/src/     https://github.com/vmware/harbor/releases/download/v1.2.0/harbor-online-installer-v1.2.0.tgz</span><br></pre></td></tr></table></figure>\n<h6 id=\"解压文件：\"><a href=\"#解压文件：\" class=\"headerlink\" title=\"解压文件：\"></a>解压文件：</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar zxf harbor-online-installer-v1.2.0.tgz  -C /usr/local/</span><br></pre></td></tr></table></figure>\n<h6 id=\"修改配置文件：\"><a href=\"#修改配置文件：\" class=\"headerlink\" title=\"修改配置文件：\"></a>修改配置文件：</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/local/harbor/</span><br><span class=\"line\">vim harbor.cfg</span><br><span class=\"line\"># 域名设置</span><br><span class=\"line\">hostname = reg.hancloud.cn</span><br><span class=\"line\"># 邮箱设置</span><br><span class=\"line\">email_server = smtp.hancloud.cn</span><br><span class=\"line\">email_server_port = 25</span><br><span class=\"line\">email_username = aikaiqiang@hancloud.cn</span><br><span class=\"line\">email_password = @akq930210</span><br><span class=\"line\">email_from = aikaiqiang &lt;aikaiqiang@hancloud.cn&gt;</span><br><span class=\"line\">email_ssl = false</span><br><span class=\"line\"># 禁止用户注册</span><br><span class=\"line\">self_registration = off</span><br><span class=\"line\"></span><br><span class=\"line\"># 设置只有管理员可以创建项目</span><br><span class=\"line\">project_creation_restriction = adminonly</span><br></pre></td></tr></table></figure>\n<h6 id=\"执行安装脚本：\"><a href=\"#执行安装脚本：\" class=\"headerlink\" title=\"执行安装脚本：\"></a>执行安装脚本：</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./install.sh</span><br><span class=\"line\"># 执行过程</span><br><span class=\"line\">[Step 0]: checking installation environment ...</span><br><span class=\"line\"></span><br><span class=\"line\">Note: docker version: 1.13.1</span><br><span class=\"line\"></span><br><span class=\"line\">Note: docker-compose version: 1.22.0</span><br><span class=\"line\">      </span><br><span class=\"line\">[Step 1]: preparing environment ...</span><br><span class=\"line\">Generated and saved secret to file: /data/secretkey</span><br><span class=\"line\">Generated configuration file: ./common/config/nginx/nginx.conf</span><br><span class=\"line\">Generated configuration file: ./common/config/adminserver/env</span><br><span class=\"line\">Generated configuration file: ./common/config/ui/env</span><br><span class=\"line\">Generated configuration file: ./common/config/registry/config.yml</span><br><span class=\"line\">Generated configuration file: ./common/config/db/env</span><br><span class=\"line\">Generated configuration file: ./common/config/jobservice/env</span><br><span class=\"line\">Generated configuration file: ./common/config/jobservice/app.conf</span><br><span class=\"line\">Generated configuration file: ./common/config/ui/app.conf</span><br><span class=\"line\">Generated certificate, key file: ./common/config/ui/private_key.pem, cert file: ./common/config/registry/root.crt</span><br><span class=\"line\">The configuration files are ready, please use docker-compose to start the service.</span><br><span class=\"line\">  </span><br><span class=\"line\">[Step 2]: checking existing instance of Harbor ...</span><br><span class=\"line\">    </span><br><span class=\"line\">[Step 3]: starting Harbor ...</span><br><span class=\"line\">Creating network &quot;harbor_harbor&quot; with the default driver</span><br><span class=\"line\">Pulling log (vmware/harbor-log:v1.2.0)...</span><br><span class=\"line\">Trying to pull repository docker.io/vmware/harbor-log ... </span><br><span class=\"line\">v1.2.0: Pulling from docker.io/vmware/harbor-log</span><br><span class=\"line\">93b3dcee11d6: Pull complete</span><br><span class=\"line\">07d028a1dbdd: Pull complete</span><br><span class=\"line\">208723cd598a: Pull complete</span><br><span class=\"line\">b876b05989fc: Pull complete</span><br><span class=\"line\">12f0e0ef448a: Pull complete</span><br><span class=\"line\">Digest: sha256:608e10b7aaac07e10a4cd639d8848aef96daa7dd5c7ebaaf6a7ecd47f903e1f8</span><br><span class=\"line\">Status: Downloaded newer image for docker.io/vmware/harbor-log:v1.2.0</span><br><span class=\"line\">Pulling registry (vmware/registry:2.6.2-photon)...</span><br><span class=\"line\">Trying to pull repository docker.io/vmware/registry ... </span><br><span class=\"line\">2.6.2-photon: Pulling from docker.io/vmware/registry</span><br><span class=\"line\">4b40d82f242f: Pull complete</span><br><span class=\"line\">f01e70edcc2b: Pull complete</span><br><span class=\"line\">798027835c5f: Pull complete</span><br><span class=\"line\">8652f3177ad3: Pull complete</span><br><span class=\"line\">4753e541e7b5: Pull complete</span><br><span class=\"line\">058f3d3811f4: Pull complete</span><br><span class=\"line\">c6edb6ed847b: Pull complete</span><br><span class=\"line\">Digest: sha256:d7cdde865c1fc389900f1929d9c4865fd1b598ca9be3f27bbe900339a10a5788</span><br><span class=\"line\">Status: Downloaded newer image for docker.io/vmware/registry:2.6.2-photon</span><br><span class=\"line\">Pulling mysql (vmware/harbor-db:v1.2.0)...</span><br><span class=\"line\">Trying to pull repository docker.io/vmware/harbor-db ... </span><br><span class=\"line\">v1.2.0: Pulling from docker.io/vmware/harbor-db</span><br><span class=\"line\">df559435c037: Pull complete</span><br><span class=\"line\">a6310a57af5d: Pull complete</span><br><span class=\"line\">d13d90890144: Pull complete</span><br><span class=\"line\">b694d8967a6c: Pull complete</span><br><span class=\"line\">a34f6cef56a6: Pull complete</span><br><span class=\"line\">3519eec83af5: Pull complete</span><br><span class=\"line\">34bae610e56c: Pull complete</span><br><span class=\"line\">86a867bebd89: Pull complete</span><br><span class=\"line\">3db2d0ac366e: Pull complete</span><br><span class=\"line\">c0d307ee295f: Pull complete</span><br><span class=\"line\">c5b1b404c5ee: Pull complete</span><br><span class=\"line\">14f4a4328366: Pull complete</span><br><span class=\"line\">c7fa77b46ec4: Pull complete</span><br><span class=\"line\">0cbe2b5669b8: Pull complete</span><br><span class=\"line\">Digest: sha256:c10b3555beb6d1c851ae49a4e90ef4296a1ad42bcd1a58ae97e316b034515b6e</span><br><span class=\"line\">Status: Downloaded newer image for docker.io/vmware/harbor-db:v1.2.0</span><br><span class=\"line\">Pulling adminserver (vmware/harbor-adminserver:v1.2.0)...</span><br><span class=\"line\">Trying to pull repository docker.io/vmware/harbor-adminserver ... </span><br><span class=\"line\">v1.2.0: Pulling from docker.io/vmware/harbor-adminserver</span><br><span class=\"line\">93b3dcee11d6: Already exists</span><br><span class=\"line\">6ab21236e58b: Pull complete</span><br><span class=\"line\">f70b0efff900: Pull complete</span><br><span class=\"line\">c5d206b5e184: Pull complete</span><br><span class=\"line\">Digest: sha256:aba66ec90fc12fe0814cecc9f647f5d17b41395199821cc7af69db9c0fbe446c</span><br><span class=\"line\">Status: Downloaded newer image for docker.io/vmware/harbor-adminserver:v1.2.0</span><br><span class=\"line\">Pulling ui (vmware/harbor-ui:v1.2.0)...</span><br><span class=\"line\">Trying to pull repository docker.io/vmware/harbor-ui ... </span><br><span class=\"line\">v1.2.0: Pulling from docker.io/vmware/harbor-ui</span><br><span class=\"line\">93b3dcee11d6: Already exists</span><br><span class=\"line\">6ab21236e58b: Already exists</span><br><span class=\"line\">7753f4b55df6: Pull complete</span><br><span class=\"line\">a647b33bdf74: Pull complete</span><br><span class=\"line\">eb30db926101: Pull complete</span><br><span class=\"line\">204d77847826: Pull complete</span><br><span class=\"line\">4910a0b56c59: Pull complete</span><br><span class=\"line\">e880a4b0031f: Pull complete</span><br><span class=\"line\">Digest: sha256:b198d8f2f59515d286bdcf06c7f99c370eb4475e2547495c3e1db8761940646b</span><br><span class=\"line\">Status: Downloaded newer image for docker.io/vmware/harbor-ui:v1.2.0</span><br><span class=\"line\">Pulling jobservice (vmware/harbor-jobservice:v1.2.0)...</span><br><span class=\"line\">Trying to pull repository docker.io/vmware/harbor-jobservice ... </span><br><span class=\"line\">v1.2.0: Pulling from docker.io/vmware/harbor-jobservice</span><br><span class=\"line\">93b3dcee11d6: Already exists</span><br><span class=\"line\">6ab21236e58b: Already exists</span><br><span class=\"line\">64bd0172d071: Pull complete</span><br><span class=\"line\">b4f5382f226f: Pull complete</span><br><span class=\"line\">Digest: sha256:0692648176c1c87379025b0519036b9f3f1a0eceb2646f17dd40eb143c898d5c</span><br><span class=\"line\">Status: Downloaded newer image for docker.io/vmware/harbor-jobservice:v1.2.0</span><br><span class=\"line\">Pulling proxy (vmware/nginx-photon:1.11.13)...</span><br><span class=\"line\">Trying to pull repository docker.io/vmware/nginx-photon ... </span><br><span class=\"line\">1.11.13: Pulling from docker.io/vmware/nginx-photon</span><br><span class=\"line\">4b40d82f242f: Already exists</span><br><span class=\"line\">2dcfe2cb4f13: Pull complete</span><br><span class=\"line\">Digest: sha256:5a32f122b86f2d7794651f1a67c5e9ce1dce79b0e0c1bc25d559405312c156db</span><br><span class=\"line\">Status: Downloaded newer image for docker.io/vmware/nginx-photon:1.11.13</span><br><span class=\"line\">Creating harbor-log ... done</span><br><span class=\"line\">Creating registry           ... done</span><br><span class=\"line\">Creating harbor-adminserver ... done</span><br><span class=\"line\">Creating harbor-db          ... done</span><br><span class=\"line\">Creating harbor-ui          ... done</span><br><span class=\"line\">Creating harbor-jobservice  ... done</span><br><span class=\"line\">Creating nginx              ... done</span><br><span class=\"line\"></span><br><span class=\"line\">✔ ----Harbor has been installed and started successfully.----</span><br><span class=\"line\"></span><br><span class=\"line\">Now you should be able to visit the admin portal at http://reg.hancloud.cn. </span><br><span class=\"line\">For more details, please visit https://github.com/vmware/harbor</span><br></pre></td></tr></table></figure>\n<p>执行成功！<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 查看本地镜像文件，会多处如图几个镜像</span><br><span class=\"line\">docker images</span><br></pre></td></tr></table></figure></p>\n\n<p>Harbor 管理是通过docker-compose来完成的，Harbor本身有多个服务进程，都放在docker容器之中运行，我们可以通过docker ps或者docker-compose  ps命令查看 ;</p>\n\n<h6 id=\"Harbor的启动和停止-：\"><a href=\"#Harbor的启动和停止-：\" class=\"headerlink\" title=\"Harbor的启动和停止 ：\"></a>Harbor的启动和停止 ：</h6><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 启动Harbor</span></span><br><span class=\"line\">docker-compose start</span><br><span class=\"line\"><span class=\"comment\"># 停止Harbor</span></span><br><span class=\"line\">docker-comose stop</span><br><span class=\"line\"><span class=\"comment\"># 重启Harbor</span></span><br><span class=\"line\">docker-compose restart</span><br></pre></td></tr></table></figure>\n<h6 id=\"访问测试\"><a href=\"#访问测试\" class=\"headerlink\" title=\"访问测试:\"></a>访问测试:</h6><p>在浏览器输入 reg.hancloud.cn，harbor.cfg文件配置的域名为reg.hancloud.cn，默认账号/密码：admin/Harbor12345</p>\n\n<h5 id=\"上传下载镜像\"><a href=\"#上传下载镜像\" class=\"headerlink\" title=\"上传下载镜像\"></a>上传下载镜像</h5><h6 id=\"指定仓库地址\"><a href=\"#指定仓库地址\" class=\"headerlink\" title=\"指定仓库地址\"></a>指定仓库地址</h6><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/docker/daemon.json</span><br><span class=\"line\"></span><br><span class=\"line\">&#123; <span class=\"string\">\"insecure-registries\"</span>:[<span class=\"string\">\"reg.hancloud.cn\"</span>] &#125;</span><br></pre></td></tr></table></figure>\n<p>重启docker：<code>systemctl  restart docker</code> </p>\n<h6 id=\"创建Dockerfile\"><a href=\"#创建Dockerfile\" class=\"headerlink\" title=\"创建Dockerfile\"></a>创建Dockerfile</h6><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim Dockerfile </span><br><span class=\"line\">FROM centos:centos7.1.1503</span><br><span class=\"line\">ENV TZ <span class=\"string\">\"Asia/Shanghai\"</span></span><br></pre></td></tr></table></figure>\n<h6 id=\"创建镜像\"><a href=\"#创建镜像\" class=\"headerlink\" title=\"创建镜像\"></a>创建镜像</h6><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># docker build -t reg.hanclound.cn/library/centos7.1:V0.0.1 .</span></span><br></pre></td></tr></table></figure>\n<h6 id=\"把镜像push到Harbor\"><a href=\"#把镜像push到Harbor\" class=\"headerlink\" title=\"把镜像push到Harbor\"></a>把镜像push到Harbor</h6><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># docker login reg.hanclound.cn</span></span><br><span class=\"line\"><span class=\"comment\"># docker push reg.hanclound.cn/library/centos7.1:V0.0.1</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"配置TLS证书\"><a href=\"#配置TLS证书\" class=\"headerlink\" title=\"配置TLS证书\"></a>配置TLS证书</h4><h5 id=\"修改配置文件harbor-cfg\"><a href=\"#修改配置文件harbor-cfg\" class=\"headerlink\" title=\"修改配置文件harbor.cfg\"></a>修改配置文件harbor.cfg</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hostname = 域名</span><br><span class=\"line\">ui_url_protocol = https</span><br><span class=\"line\">ssl_cert = /etc/certs/ca.crt</span><br><span class=\"line\">ssl_cert_key = /etc/certs/ca.key</span><br></pre></td></tr></table></figure>\n<h5 id=\"创建自签名证书key文件\"><a href=\"#创建自签名证书key文件\" class=\"headerlink\" title=\"创建自签名证书key文件\"></a>创建自签名证书key文件</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /etc/certs</span><br><span class=\"line\">openssl genrsa -out /etc/certs/ca.key 2048</span><br></pre></td></tr></table></figure>\n<h5 id=\"创建自签名证书crt文件\"><a href=\"#创建自签名证书crt文件\" class=\"headerlink\" title=\"创建自签名证书crt文件\"></a>创建自签名证书crt文件</h5><p>注意：命令中<code>/CN=reg.hanclound.cn</code>字段中<code>reg.hanclound.cn</code>修改为自己配置的仓库域名<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">openssl req -x509 -new -nodes -key /etc/certs/ca.key -subj <span class=\"string\">\"/CN=rgs.unixfbi.com\"</span> -days 5000 -out /etc/certs/ca.crt</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"安装Harbor-2\"><a href=\"#安装Harbor-2\" class=\"headerlink\" title=\"安装Harbor\"></a>安装Harbor</h5><p><code>./install.sh</code> </p>\n<h5 id=\"客户端配置\"><a href=\"#客户端配置\" class=\"headerlink\" title=\"客户端配置\"></a>客户端配置</h5><p>客户端需要创建证书文件存放的位置，并且把服务端创建的证书拷贝到该目录下，然后重启客户端docker。我们这里创建目录为：`/etc/docker/certs.d/reg.hanclound.cn ;</p>\n<p>把服务端crt证书文件拷贝到客户端，例如我这的客户端为：192.168.0.94;<br><code># scp /etc/certs/ca.crt root@192.168.0.94:/etc/docker/certs.d/reg.hanclound.cn/</code><br>重启客户端docker<br><code>systemctl restart docker</code> </p>\n<p>参考文案：</p>\n<p>博客：<a href=\"https://www.cnblogs.com/pangguoping/p/7650014.html\" target=\"_blank\" rel=\"noopener\">运维特工</a></p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>摘要：Harbor是一个用于存储和分发Docker镜像的企业级Registry服务器，通过添加一些企业必需的功能特性</p>\n</blockquote>\n<h3 id=\"关于Harbor\"><a href=\"#关于Harbor\" class=\"headerlink\" title=\"关于Harbor\"></a>关于Harbor</h3><p>Harbor是一个用于存储和分发Docker镜像的企业级Registry服务器，通过添加一些企业必需的功能特性，例如安全、标识和管理等，扩展了开源Docker Distribution。作为一个企业级私有Registry服务器，Harbor提供了更好的性能和安全。提升用户使用Registry构建和运行环境传输镜像的效率。Harbor支持安装在多个Registry节点的镜像资源复制，镜像全部保存在私有Registry中， 确保数据和知识产权在公司内部网络中管控。另外，Harbor也提供了高级的安全特性，诸如用户管理，访问控制和活动审计等 ；</p>","more":"<h3 id=\"安装Harbor\"><a href=\"#安装Harbor\" class=\"headerlink\" title=\"安装Harbor\"></a>安装Harbor</h3><p>安装环境：CentOS Linux release 7.2.1511 (Core )</p>\n<h4 id=\"安装Docker\"><a href=\"#安装Docker\" class=\"headerlink\" title=\"安装Docker\"></a>安装Docker</h4><h4 id=\"安装Docker-Compose\"><a href=\"#安装Docker-Compose\" class=\"headerlink\" title=\"安装Docker-Compose\"></a>安装Docker-Compose</h4><ul>\n<li>二进制安装</li>\n<li>pip安装</li>\n</ul>\n<h4 id=\"安装Harbor-1\"><a href=\"#安装Harbor-1\" class=\"headerlink\" title=\"安装Harbor\"></a>安装Harbor</h4><h5 id=\"在线安装\"><a href=\"#在线安装\" class=\"headerlink\" title=\"在线安装\"></a>在线安装</h5><h6 id=\"下载文件：\"><a href=\"#下载文件：\" class=\"headerlink\" title=\"下载文件：\"></a>下载文件：</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget -P /usr/local/src/     https://github.com/vmware/harbor/releases/download/v1.2.0/harbor-online-installer-v1.2.0.tgz</span><br></pre></td></tr></table></figure>\n<h6 id=\"解压文件：\"><a href=\"#解压文件：\" class=\"headerlink\" title=\"解压文件：\"></a>解压文件：</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar zxf harbor-online-installer-v1.2.0.tgz  -C /usr/local/</span><br></pre></td></tr></table></figure>\n<h6 id=\"修改配置文件：\"><a href=\"#修改配置文件：\" class=\"headerlink\" title=\"修改配置文件：\"></a>修改配置文件：</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/local/harbor/</span><br><span class=\"line\">vim harbor.cfg</span><br><span class=\"line\"># 域名设置</span><br><span class=\"line\">hostname = reg.hancloud.cn</span><br><span class=\"line\"># 邮箱设置</span><br><span class=\"line\">email_server = smtp.hancloud.cn</span><br><span class=\"line\">email_server_port = 25</span><br><span class=\"line\">email_username = aikaiqiang@hancloud.cn</span><br><span class=\"line\">email_password = @akq930210</span><br><span class=\"line\">email_from = aikaiqiang &lt;aikaiqiang@hancloud.cn&gt;</span><br><span class=\"line\">email_ssl = false</span><br><span class=\"line\"># 禁止用户注册</span><br><span class=\"line\">self_registration = off</span><br><span class=\"line\"></span><br><span class=\"line\"># 设置只有管理员可以创建项目</span><br><span class=\"line\">project_creation_restriction = adminonly</span><br></pre></td></tr></table></figure>\n<h6 id=\"执行安装脚本：\"><a href=\"#执行安装脚本：\" class=\"headerlink\" title=\"执行安装脚本：\"></a>执行安装脚本：</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./install.sh</span><br><span class=\"line\"># 执行过程</span><br><span class=\"line\">[Step 0]: checking installation environment ...</span><br><span class=\"line\"></span><br><span class=\"line\">Note: docker version: 1.13.1</span><br><span class=\"line\"></span><br><span class=\"line\">Note: docker-compose version: 1.22.0</span><br><span class=\"line\">      </span><br><span class=\"line\">[Step 1]: preparing environment ...</span><br><span class=\"line\">Generated and saved secret to file: /data/secretkey</span><br><span class=\"line\">Generated configuration file: ./common/config/nginx/nginx.conf</span><br><span class=\"line\">Generated configuration file: ./common/config/adminserver/env</span><br><span class=\"line\">Generated configuration file: ./common/config/ui/env</span><br><span class=\"line\">Generated configuration file: ./common/config/registry/config.yml</span><br><span class=\"line\">Generated configuration file: ./common/config/db/env</span><br><span class=\"line\">Generated configuration file: ./common/config/jobservice/env</span><br><span class=\"line\">Generated configuration file: ./common/config/jobservice/app.conf</span><br><span class=\"line\">Generated configuration file: ./common/config/ui/app.conf</span><br><span class=\"line\">Generated certificate, key file: ./common/config/ui/private_key.pem, cert file: ./common/config/registry/root.crt</span><br><span class=\"line\">The configuration files are ready, please use docker-compose to start the service.</span><br><span class=\"line\">  </span><br><span class=\"line\">[Step 2]: checking existing instance of Harbor ...</span><br><span class=\"line\">    </span><br><span class=\"line\">[Step 3]: starting Harbor ...</span><br><span class=\"line\">Creating network &quot;harbor_harbor&quot; with the default driver</span><br><span class=\"line\">Pulling log (vmware/harbor-log:v1.2.0)...</span><br><span class=\"line\">Trying to pull repository docker.io/vmware/harbor-log ... </span><br><span class=\"line\">v1.2.0: Pulling from docker.io/vmware/harbor-log</span><br><span class=\"line\">93b3dcee11d6: Pull complete</span><br><span class=\"line\">07d028a1dbdd: Pull complete</span><br><span class=\"line\">208723cd598a: Pull complete</span><br><span class=\"line\">b876b05989fc: Pull complete</span><br><span class=\"line\">12f0e0ef448a: Pull complete</span><br><span class=\"line\">Digest: sha256:608e10b7aaac07e10a4cd639d8848aef96daa7dd5c7ebaaf6a7ecd47f903e1f8</span><br><span class=\"line\">Status: Downloaded newer image for docker.io/vmware/harbor-log:v1.2.0</span><br><span class=\"line\">Pulling registry (vmware/registry:2.6.2-photon)...</span><br><span class=\"line\">Trying to pull repository docker.io/vmware/registry ... </span><br><span class=\"line\">2.6.2-photon: Pulling from docker.io/vmware/registry</span><br><span class=\"line\">4b40d82f242f: Pull complete</span><br><span class=\"line\">f01e70edcc2b: Pull complete</span><br><span class=\"line\">798027835c5f: Pull complete</span><br><span class=\"line\">8652f3177ad3: Pull complete</span><br><span class=\"line\">4753e541e7b5: Pull complete</span><br><span class=\"line\">058f3d3811f4: Pull complete</span><br><span class=\"line\">c6edb6ed847b: Pull complete</span><br><span class=\"line\">Digest: sha256:d7cdde865c1fc389900f1929d9c4865fd1b598ca9be3f27bbe900339a10a5788</span><br><span class=\"line\">Status: Downloaded newer image for docker.io/vmware/registry:2.6.2-photon</span><br><span class=\"line\">Pulling mysql (vmware/harbor-db:v1.2.0)...</span><br><span class=\"line\">Trying to pull repository docker.io/vmware/harbor-db ... </span><br><span class=\"line\">v1.2.0: Pulling from docker.io/vmware/harbor-db</span><br><span class=\"line\">df559435c037: Pull complete</span><br><span class=\"line\">a6310a57af5d: Pull complete</span><br><span class=\"line\">d13d90890144: Pull complete</span><br><span class=\"line\">b694d8967a6c: Pull complete</span><br><span class=\"line\">a34f6cef56a6: Pull complete</span><br><span class=\"line\">3519eec83af5: Pull complete</span><br><span class=\"line\">34bae610e56c: Pull complete</span><br><span class=\"line\">86a867bebd89: Pull complete</span><br><span class=\"line\">3db2d0ac366e: Pull complete</span><br><span class=\"line\">c0d307ee295f: Pull complete</span><br><span class=\"line\">c5b1b404c5ee: Pull complete</span><br><span class=\"line\">14f4a4328366: Pull complete</span><br><span class=\"line\">c7fa77b46ec4: Pull complete</span><br><span class=\"line\">0cbe2b5669b8: Pull complete</span><br><span class=\"line\">Digest: sha256:c10b3555beb6d1c851ae49a4e90ef4296a1ad42bcd1a58ae97e316b034515b6e</span><br><span class=\"line\">Status: Downloaded newer image for docker.io/vmware/harbor-db:v1.2.0</span><br><span class=\"line\">Pulling adminserver (vmware/harbor-adminserver:v1.2.0)...</span><br><span class=\"line\">Trying to pull repository docker.io/vmware/harbor-adminserver ... </span><br><span class=\"line\">v1.2.0: Pulling from docker.io/vmware/harbor-adminserver</span><br><span class=\"line\">93b3dcee11d6: Already exists</span><br><span class=\"line\">6ab21236e58b: Pull complete</span><br><span class=\"line\">f70b0efff900: Pull complete</span><br><span class=\"line\">c5d206b5e184: Pull complete</span><br><span class=\"line\">Digest: sha256:aba66ec90fc12fe0814cecc9f647f5d17b41395199821cc7af69db9c0fbe446c</span><br><span class=\"line\">Status: Downloaded newer image for docker.io/vmware/harbor-adminserver:v1.2.0</span><br><span class=\"line\">Pulling ui (vmware/harbor-ui:v1.2.0)...</span><br><span class=\"line\">Trying to pull repository docker.io/vmware/harbor-ui ... </span><br><span class=\"line\">v1.2.0: Pulling from docker.io/vmware/harbor-ui</span><br><span class=\"line\">93b3dcee11d6: Already exists</span><br><span class=\"line\">6ab21236e58b: Already exists</span><br><span class=\"line\">7753f4b55df6: Pull complete</span><br><span class=\"line\">a647b33bdf74: Pull complete</span><br><span class=\"line\">eb30db926101: Pull complete</span><br><span class=\"line\">204d77847826: Pull complete</span><br><span class=\"line\">4910a0b56c59: Pull complete</span><br><span class=\"line\">e880a4b0031f: Pull complete</span><br><span class=\"line\">Digest: sha256:b198d8f2f59515d286bdcf06c7f99c370eb4475e2547495c3e1db8761940646b</span><br><span class=\"line\">Status: Downloaded newer image for docker.io/vmware/harbor-ui:v1.2.0</span><br><span class=\"line\">Pulling jobservice (vmware/harbor-jobservice:v1.2.0)...</span><br><span class=\"line\">Trying to pull repository docker.io/vmware/harbor-jobservice ... </span><br><span class=\"line\">v1.2.0: Pulling from docker.io/vmware/harbor-jobservice</span><br><span class=\"line\">93b3dcee11d6: Already exists</span><br><span class=\"line\">6ab21236e58b: Already exists</span><br><span class=\"line\">64bd0172d071: Pull complete</span><br><span class=\"line\">b4f5382f226f: Pull complete</span><br><span class=\"line\">Digest: sha256:0692648176c1c87379025b0519036b9f3f1a0eceb2646f17dd40eb143c898d5c</span><br><span class=\"line\">Status: Downloaded newer image for docker.io/vmware/harbor-jobservice:v1.2.0</span><br><span class=\"line\">Pulling proxy (vmware/nginx-photon:1.11.13)...</span><br><span class=\"line\">Trying to pull repository docker.io/vmware/nginx-photon ... </span><br><span class=\"line\">1.11.13: Pulling from docker.io/vmware/nginx-photon</span><br><span class=\"line\">4b40d82f242f: Already exists</span><br><span class=\"line\">2dcfe2cb4f13: Pull complete</span><br><span class=\"line\">Digest: sha256:5a32f122b86f2d7794651f1a67c5e9ce1dce79b0e0c1bc25d559405312c156db</span><br><span class=\"line\">Status: Downloaded newer image for docker.io/vmware/nginx-photon:1.11.13</span><br><span class=\"line\">Creating harbor-log ... done</span><br><span class=\"line\">Creating registry           ... done</span><br><span class=\"line\">Creating harbor-adminserver ... done</span><br><span class=\"line\">Creating harbor-db          ... done</span><br><span class=\"line\">Creating harbor-ui          ... done</span><br><span class=\"line\">Creating harbor-jobservice  ... done</span><br><span class=\"line\">Creating nginx              ... done</span><br><span class=\"line\"></span><br><span class=\"line\">✔ ----Harbor has been installed and started successfully.----</span><br><span class=\"line\"></span><br><span class=\"line\">Now you should be able to visit the admin portal at http://reg.hancloud.cn. </span><br><span class=\"line\">For more details, please visit https://github.com/vmware/harbor</span><br></pre></td></tr></table></figure>\n<p>执行成功！<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 查看本地镜像文件，会多处如图几个镜像</span><br><span class=\"line\">docker images</span><br></pre></td></tr></table></figure></p>\n\n<p>Harbor 管理是通过docker-compose来完成的，Harbor本身有多个服务进程，都放在docker容器之中运行，我们可以通过docker ps或者docker-compose  ps命令查看 ;</p>\n\n<h6 id=\"Harbor的启动和停止-：\"><a href=\"#Harbor的启动和停止-：\" class=\"headerlink\" title=\"Harbor的启动和停止 ：\"></a>Harbor的启动和停止 ：</h6><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 启动Harbor</span></span><br><span class=\"line\">docker-compose start</span><br><span class=\"line\"><span class=\"comment\"># 停止Harbor</span></span><br><span class=\"line\">docker-comose stop</span><br><span class=\"line\"><span class=\"comment\"># 重启Harbor</span></span><br><span class=\"line\">docker-compose restart</span><br></pre></td></tr></table></figure>\n<h6 id=\"访问测试\"><a href=\"#访问测试\" class=\"headerlink\" title=\"访问测试:\"></a>访问测试:</h6><p>在浏览器输入 reg.hancloud.cn，harbor.cfg文件配置的域名为reg.hancloud.cn，默认账号/密码：admin/Harbor12345</p>\n\n<h5 id=\"上传下载镜像\"><a href=\"#上传下载镜像\" class=\"headerlink\" title=\"上传下载镜像\"></a>上传下载镜像</h5><h6 id=\"指定仓库地址\"><a href=\"#指定仓库地址\" class=\"headerlink\" title=\"指定仓库地址\"></a>指定仓库地址</h6><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/docker/daemon.json</span><br><span class=\"line\"></span><br><span class=\"line\">&#123; <span class=\"string\">\"insecure-registries\"</span>:[<span class=\"string\">\"reg.hancloud.cn\"</span>] &#125;</span><br></pre></td></tr></table></figure>\n<p>重启docker：<code>systemctl  restart docker</code> </p>\n<h6 id=\"创建Dockerfile\"><a href=\"#创建Dockerfile\" class=\"headerlink\" title=\"创建Dockerfile\"></a>创建Dockerfile</h6><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim Dockerfile </span><br><span class=\"line\">FROM centos:centos7.1.1503</span><br><span class=\"line\">ENV TZ <span class=\"string\">\"Asia/Shanghai\"</span></span><br></pre></td></tr></table></figure>\n<h6 id=\"创建镜像\"><a href=\"#创建镜像\" class=\"headerlink\" title=\"创建镜像\"></a>创建镜像</h6><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># docker build -t reg.hanclound.cn/library/centos7.1:V0.0.1 .</span></span><br></pre></td></tr></table></figure>\n<h6 id=\"把镜像push到Harbor\"><a href=\"#把镜像push到Harbor\" class=\"headerlink\" title=\"把镜像push到Harbor\"></a>把镜像push到Harbor</h6><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># docker login reg.hanclound.cn</span></span><br><span class=\"line\"><span class=\"comment\"># docker push reg.hanclound.cn/library/centos7.1:V0.0.1</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"配置TLS证书\"><a href=\"#配置TLS证书\" class=\"headerlink\" title=\"配置TLS证书\"></a>配置TLS证书</h4><h5 id=\"修改配置文件harbor-cfg\"><a href=\"#修改配置文件harbor-cfg\" class=\"headerlink\" title=\"修改配置文件harbor.cfg\"></a>修改配置文件harbor.cfg</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hostname = 域名</span><br><span class=\"line\">ui_url_protocol = https</span><br><span class=\"line\">ssl_cert = /etc/certs/ca.crt</span><br><span class=\"line\">ssl_cert_key = /etc/certs/ca.key</span><br></pre></td></tr></table></figure>\n<h5 id=\"创建自签名证书key文件\"><a href=\"#创建自签名证书key文件\" class=\"headerlink\" title=\"创建自签名证书key文件\"></a>创建自签名证书key文件</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /etc/certs</span><br><span class=\"line\">openssl genrsa -out /etc/certs/ca.key 2048</span><br></pre></td></tr></table></figure>\n<h5 id=\"创建自签名证书crt文件\"><a href=\"#创建自签名证书crt文件\" class=\"headerlink\" title=\"创建自签名证书crt文件\"></a>创建自签名证书crt文件</h5><p>注意：命令中<code>/CN=reg.hanclound.cn</code>字段中<code>reg.hanclound.cn</code>修改为自己配置的仓库域名<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">openssl req -x509 -new -nodes -key /etc/certs/ca.key -subj <span class=\"string\">\"/CN=rgs.unixfbi.com\"</span> -days 5000 -out /etc/certs/ca.crt</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"安装Harbor-2\"><a href=\"#安装Harbor-2\" class=\"headerlink\" title=\"安装Harbor\"></a>安装Harbor</h5><p><code>./install.sh</code> </p>\n<h5 id=\"客户端配置\"><a href=\"#客户端配置\" class=\"headerlink\" title=\"客户端配置\"></a>客户端配置</h5><p>客户端需要创建证书文件存放的位置，并且把服务端创建的证书拷贝到该目录下，然后重启客户端docker。我们这里创建目录为：`/etc/docker/certs.d/reg.hanclound.cn ;</p>\n<p>把服务端crt证书文件拷贝到客户端，例如我这的客户端为：192.168.0.94;<br><code># scp /etc/certs/ca.crt root@192.168.0.94:/etc/docker/certs.d/reg.hanclound.cn/</code><br>重启客户端docker<br><code>systemctl restart docker</code> </p>\n<p>参考文案：</p>\n<p>博客：<a href=\"https://www.cnblogs.com/pangguoping/p/7650014.html\" target=\"_blank\" rel=\"noopener\">运维特工</a></p>"}],"PostAsset":[],"PostCategory":[{"post_id":"ck2vmvr810000mgu5c57xged2","category_id":"ck2vmvr8b0002mgu55j13ol53","_id":"ck2vmvr8l000amgu5u2mq192d"},{"post_id":"ck2vmvr890001mgu59u8ybxci","category_id":"ck2vmvr8j0007mgu5mac5j7jb","_id":"ck2vmvr8n000fmgu5sdoo2gqz"},{"post_id":"ck2vmvr8f0004mgu5p96a2huy","category_id":"ck2vmvr8l000bmgu5tz9obyap","_id":"ck2vmvr8o000jmgu51o0wdyel"},{"post_id":"ck2vmvr8h0005mgu554cyhblj","category_id":"ck2vmvr8n000gmgu51wetzjg4","_id":"ck2vmvr8q000nmgu5xko92onh"},{"post_id":"ck2vmvr8i0006mgu5dd7z9fwt","category_id":"ck2vmvr8p000kmgu51osy6ad7","_id":"ck2vmvr8r000qmgu5ykskpaat"},{"post_id":"ck2vmvr9c000zmgu5heebd3mz","category_id":"ck2vmvr9l0012mgu5w5v9pej2","_id":"ck2vmvra1001gmgu5vjdriqls"},{"post_id":"ck2vmvr9w001dmgu51crycycn","category_id":"ck2vmvr8p000kmgu51osy6ad7","_id":"ck2vmvra9001kmgu54b4ouylo"},{"post_id":"ck2vmvr9i0011mgu5316fk3ko","category_id":"ck2vmvr9v001amgu5v1n0fr0x","_id":"ck2vmvraa001omgu5gwj59pia"},{"post_id":"ck2vmvra0001fmgu5c1qap0tb","category_id":"ck2vmvr8p000kmgu51osy6ad7","_id":"ck2vmvrab001qmgu5m5d136ua"},{"post_id":"ck2vmvr9o0015mgu576sgfe9n","category_id":"ck2vmvra2001hmgu5ihapqv0s","_id":"ck2vmvrac001umgu5w5vgcyhk"},{"post_id":"ck2vmvr9s0017mgu5xj87hq8x","category_id":"ck2vmvra9001mmgu5ygtymcnq","_id":"ck2vmvrae001xmgu5lxxxthpz"},{"post_id":"ck2vmvr9u0019mgu5vl06hv77","category_id":"ck2vmvrac001smgu52t10xkdz","_id":"ck2vmvrag0020mgu5wa7v5sxe"}],"PostTag":[{"post_id":"ck2vmvr810000mgu5c57xged2","tag_id":"ck2vmvr8e0003mgu5l96v9ii2","_id":"ck2vmvr8m000dmgu5uog06y65"},{"post_id":"ck2vmvr810000mgu5c57xged2","tag_id":"ck2vmvr8j0008mgu5poemz4xq","_id":"ck2vmvr8n000emgu5pn3234qa"},{"post_id":"ck2vmvr890001mgu59u8ybxci","tag_id":"ck2vmvr8m000cmgu5w71hxezq","_id":"ck2vmvr8o000imgu5k4epo6xw"},{"post_id":"ck2vmvr8f0004mgu5p96a2huy","tag_id":"ck2vmvr8n000hmgu541nk0ild","_id":"ck2vmvr8p000mmgu58kwfqhbe"},{"post_id":"ck2vmvr8h0005mgu554cyhblj","tag_id":"ck2vmvr8p000lmgu5ub0hnbs8","_id":"ck2vmvr8r000pmgu57ea5pi5j"},{"post_id":"ck2vmvr8i0006mgu5dd7z9fwt","tag_id":"ck2vmvr8q000omgu5usut98pm","_id":"ck2vmvr8u000umgu5qk07uxpv"},{"post_id":"ck2vmvr8i0006mgu5dd7z9fwt","tag_id":"ck2vmvr8s000rmgu56njq0rli","_id":"ck2vmvr8u000vmgu55yfgy03o"},{"post_id":"ck2vmvr8i0006mgu5dd7z9fwt","tag_id":"ck2vmvr8t000smgu56v19nmue","_id":"ck2vmvr8u000wmgu5yb4tsvsd"},{"post_id":"ck2vmvr8k0009mgu5pudx3jgt","tag_id":"ck2vmvr8t000tmgu5plxd4wk6","_id":"ck2vmvr8v000xmgu51foer4v7"},{"post_id":"ck2vmvr9c000zmgu5heebd3mz","tag_id":"ck2vmvr9m0013mgu5o881ttd8","_id":"ck2vmvra7001jmgu5fq0d6714"},{"post_id":"ck2vmvr9c000zmgu5heebd3mz","tag_id":"ck2vmvr9v001bmgu50cfxl3uo","_id":"ck2vmvra9001lmgu54umkkuzp"},{"post_id":"ck2vmvra0001fmgu5c1qap0tb","tag_id":"ck2vmvr8q000omgu5usut98pm","_id":"ck2vmvraa001pmgu5onvekxg4"},{"post_id":"ck2vmvra0001fmgu5c1qap0tb","tag_id":"ck2vmvr8s000rmgu56njq0rli","_id":"ck2vmvrab001rmgu5hhcxhzx5"},{"post_id":"ck2vmvra0001fmgu5c1qap0tb","tag_id":"ck2vmvr8t000smgu56v19nmue","_id":"ck2vmvrad001vmgu5l5ffjvrq"},{"post_id":"ck2vmvr9i0011mgu5316fk3ko","tag_id":"ck2vmvra2001imgu54df6ly96","_id":"ck2vmvrad001wmgu5ex94xk3m"},{"post_id":"ck2vmvr9o0015mgu576sgfe9n","tag_id":"ck2vmvraa001nmgu5qkc3mpja","_id":"ck2vmvraf001zmgu5jpmbc2u9"},{"post_id":"ck2vmvr9s0017mgu5xj87hq8x","tag_id":"ck2vmvrac001tmgu5ayjrmjy8","_id":"ck2vmvrah0022mgu50b3uq5xd"},{"post_id":"ck2vmvr9s0017mgu5xj87hq8x","tag_id":"ck2vmvraf001ymgu5mhl262bc","_id":"ck2vmvrah0023mgu5yst0hp8t"},{"post_id":"ck2vmvr9u0019mgu5vl06hv77","tag_id":"ck2vmvrag0021mgu5cein77gv","_id":"ck2vmvrai0025mgu5w2zsy3sn"},{"post_id":"ck2vmvr9w001dmgu51crycycn","tag_id":"ck2vmvr8q000omgu5usut98pm","_id":"ck2vmvrak0026mgu5k58hov4e"},{"post_id":"ck2vmvr9w001dmgu51crycycn","tag_id":"ck2vmvrai0024mgu5g9yc4cr6","_id":"ck2vmvrak0027mgu5xhn7usbe"},{"post_id":"ck2vmvr9w001dmgu51crycycn","tag_id":"ck2vmvr8t000smgu56v19nmue","_id":"ck2vmvrak0028mgu51dilvjbz"}],"Tag":[{"name":"Canal","_id":"ck2vmvr8e0003mgu5l96v9ii2"},{"name":"Mysql","_id":"ck2vmvr8j0008mgu5poemz4xq"},{"name":"Maven","_id":"ck2vmvr8m000cmgu5w71hxezq"},{"name":"Hexo","_id":"ck2vmvr8n000hmgu541nk0ild"},{"name":"Git","_id":"ck2vmvr8p000lmgu5ub0hnbs8"},{"name":"Docker","_id":"ck2vmvr8q000omgu5usut98pm"},{"name":"Harbor","_id":"ck2vmvr8s000rmgu56njq0rli"},{"name":"Docker Registry","_id":"ck2vmvr8t000smgu56v19nmue"},{"name":"technology","_id":"ck2vmvr8t000tmgu5plxd4wk6"},{"name":"Linux","_id":"ck2vmvr9m0013mgu5o881ttd8"},{"name":"firewalld","_id":"ck2vmvr9v001bmgu50cfxl3uo"},{"name":"名句","_id":"ck2vmvra2001imgu54df6ly96"},{"name":"Zookeeper","_id":"ck2vmvraa001nmgu5qkc3mpja"},{"name":"IDEA","_id":"ck2vmvrac001tmgu5ayjrmjy8"},{"name":"工具","_id":"ck2vmvraf001ymgu5mhl262bc"},{"name":"flink","_id":"ck2vmvrag0021mgu5cein77gv"},{"name":"Rancher","_id":"ck2vmvrai0024mgu5g9yc4cr6"}]}}